const _0x765170 = _0x3929;
(function (_0x3612f9, _0x36bad1) {
  const _0x4bc83d = _0x3929,
    _0x383143 = _0x3612f9();
  while (!![]) {
    try {
      const _0x11936e =
        (parseInt(_0x4bc83d(0x3fc)) / 0x1) *
          (parseInt(_0x4bc83d(0x29f)) / 0x2) +
        -parseInt(_0x4bc83d(0x2d6)) / 0x3 +
        parseInt(_0x4bc83d(0x3d3)) / 0x4 +
        (-parseInt(_0x4bc83d(0x39a)) / 0x5) *
          (-parseInt(_0x4bc83d(0x37e)) / 0x6) +
        parseInt(_0x4bc83d(0x3d4)) / 0x7 +
        (-parseInt(_0x4bc83d(0x3e6)) / 0x8) *
          (parseInt(_0x4bc83d(0x36c)) / 0x9) +
        (parseInt(_0x4bc83d(0x221)) / 0xa) *
          (-parseInt(_0x4bc83d(0x4a9)) / 0xb);
      if (_0x11936e === _0x36bad1) break;
      else _0x383143["push"](_0x383143["shift"]());
    } catch (_0x289c86) {
      _0x383143["push"](_0x383143["shift"]());
    }
  }
})(_0x121e, 0xf24b7);
function _0x121e() {
  const _0x2a53f6 = [
    "CANTIDAD_X_PRECIO_FIJO",
    "</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-success\x22>Total\x20con\x20Promo</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "🌐\x20<strong>Backend:</strong>\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20p-2\x20text-center\x22\x20style=\x22background-color:#f8f9fa;\x20border-radius:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>ℹ️\x20Sin\x20promociones\x20activas</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-danger\x22\x20role=\x22alert\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6>❌\x20Producto\x20no\x20encontrado</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>No\x20se\x20pudo\x20encontrar\x20el\x20producto\x20con\x20SKU:\x20",
    "code_32_reader",
    "https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js",
    "promociones-generales-modal-body",
    "\x20comprando\x20",
    "precio_total",
    "toUTCString",
    "parentNode",
    "fire",
    "monthlyLimit",
    "innerHTML",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-outline-primary\x20btn-sm\x20copiar-sku-btn\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-sku=\x22",
    "<div\x20class=\x22alert\x20alert-success\x22>✅\x20Endpoint\x20/api/stats\x20funciona\x20correctamente</div>",
    "📊\x20Datos\x20finales\x20para\x20construcción:",
    "promocionesGeneralesModal",
    "Error\x20en\x20actualización:",
    "classList",
    "revokeObjectURL",
    "async",
    "\x20más</span>",
    "\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-body\x20p-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6\x20class=\x22card-title\x20text-truncate\x22\x20title=\x22",
    "<div\x20class=\x22alert\x20alert-danger\x22>🔧\x20Problema\x20de\x20CORS\x20-\x20verifica\x20configuración\x20de\x20headers</div>",
    "🔧\x20Sugerencia:\x20Verificar\x20configuración\x20CORS\x20en\x20el\x20backend\x20para\x20/api/productos-con-codigos",
    "1000",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "fuente",
    "✅\x20Usando\x20cantidad\x20y\x20precio\x20calculado:",
    "canUseAPI",
    "⚠️\x20API\x20nativa\x20no\x20detectó\x20códigos\x20válidos",
    "historial",
    "</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-link\x20btn-sm\x20ms-2\x20p-0\x20copiar-btn\x22\x20title=\x22Copiar\x20descripción\x22\x20data-copiar=\x22",
    "formulario",
    "register",
    "principal",
    "precioTotal",
    "%;\x20transition:\x20width\x200.3s\x20ease;\x22\x20aria-valuenow=\x22",
    "<small\x20class=\x22text-success\x22><strong>Precio\x20unitario:</strong>\x20$",
    "textAlign",
    "💡\x20Verifica\x20que\x20el\x20proyecto\x20#1070150612422\x20tenga\x20facturación\x20activa",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>SKU:\x20",
    "CORS_ERROR:\x20Backend\x20no\x20accesible\x20desde\x20este\x20dominio",
    "\x20diario<br>🌐\x20<strong>Backend:</strong>\x20Verificando...",
    "✅\x20Código\x20detectado\x20(configuración\x20principal):",
    "dailyCount",
    "beforeinstallprompt",
    "Iniciando...",
    "🔄\x20Probando\x20con\x20imagen\x20original...",
    "#ultimaActualizacion",
    "detalles",
    "promociones_ts",
    "has",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>SKU:\x20",
    "location",
    "precio",
    "❌\x20Error\x20en\x20diagnóstico:",
    "userAgent",
    "Formato\x20de\x20respuesta\x20no\x20reconocido",
    "\x20=\x20",
    "querySelectorAll",
    "🔄\x20Consultando\x20endpoint\x20básico...",
    "SKU\x20desconocido",
    "#btnActualizar",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "✅\x20Productos\x20cargados\x20con\x20códigos\x20de\x20barras:",
    "\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22bi\x20bi-search\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</li>",
    "📊\x20Status\x20HTTP:",
    "nombre_promocion",
    "PERMISSION_DENIED",
    "\x0a<button\x20type=\x22button\x22\x20id=\x22btnPromociones\x22\x20class=\x22ant-btn\x20css-1r8qqf1\x20ant-btn-default\x20ant-btn-color-default\x20ant-btn-variant-outlined\x20ant-btn-sm\x20mb-4\x22\x20style=\x22border-radius:6px;\x20border:1px\x20solid\x20#ffc107;\x20background:#fff8dc;\x20color:#856404;\x20font-size:0.9rem;\x20padding:2px\x2012px;\x20margin-left:20px;\x22\x20data-bs-toggle=\x22modal\x22\x20data-bs-target=\x22#promocionesGeneralesModal\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20🏷️\x20Ver\x20Promociones\x0a\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20<div\x20class=\x22d-flex\x20justify-content-between\x20align-items-center\x20w-100\x20mb-2\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22d-flex\x20flex-column\x20flex-md-row\x20align-items-md-end\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20<h5\x20class=\x22ant-typography\x20css-1r8qqf1\x20mb-0\x22>Productos</h5>\x0a\x20\x20\x20\x20\x20\x20<span\x20id=\x22ultimaActualizacion\x22\x20class=\x22ant-typography\x20css-1r8qqf1\x20ms-md-4\x22\x20style=\x22font-size:1rem;\x22>Última\x20actualización:\x20nunca\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22d-flex\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20id=\x22btnActualizar\x22\x20class=\x22ant-btn\x20css-1r8qqf1\x20ant-btn-default\x20ant-btn-color-default\x20ant-btn-variant-outlined\x20ant-btn-sm\x22\x20style=\x22border-radius:6px;\x20border:1px\x20solid\x20#d9d9d9;\x20background:#fff;\x20color:#222;\x20font-size:1rem;\x20padding:2px\x2016px;\x20margin-left:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22btnTexto\x22>Actualizar</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22btnSpinner\x22\x20class=\x22d-none\x20spinner-border\x20spinner-border-sm\x20ms-2\x22\x20role=\x22status\x22></span>\x0a\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a\x20\x20<div\x20id=\x22mensajeActualizacion\x22\x20class=\x22text-center\x22\x20style=\x22min-height:\x201.5rem;\x22></div>\x0a\x0a\x20\x20<!--\x20Modal\x20para\x20promociones\x20generales\x20-->\x0a\x20\x20<div\x20class=\x22modal\x20fade\x22\x20id=\x22promocionesGeneralesModal\x22\x20tabindex=\x22-1\x22\x20aria-labelledby=\x22promocionesGeneralesModalLabel\x22\x20aria-hidden=\x22true\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22modal-dialog\x20modal-xl\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x20bg-warning\x20text-dark\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h5\x20class=\x22modal-title\x22\x20id=\x22promocionesGeneralesModalLabel\x22>🏷️\x20Todas\x20las\x20Promociones\x20Disponibles</h5>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn-close\x22\x20data-bs-dismiss=\x22modal\x22\x20aria-label=\x22Close\x22></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22\x20id=\x22promociones-generales-modal-body\x22\x20style=\x22max-height:\x2070vh;\x20overflow-y:\x20auto;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22spinner-border\x20text-warning\x22\x20role=\x22status\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22visually-hidden\x22>Cargando\x20promociones...</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-2\x22>Cargando\x20promociones...</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x20me-auto\x22>⚠️\x20Las\x20promociones\x20solo\x20aplican\x20pagando\x20de\x20contado</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-secondary\x22\x20data-bs-dismiss=\x22modal\x22>Cerrar</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a",
    "dailyUsed",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "<div\x20class=\x22alert\x20alert-danger\x22>❌\x20Error\x20en\x20diagnóstico:\x20",
    "code_39_vin_reader",
    "code_39_reader",
    "\x20|\x20Promociones:\x20",
    "head",
    "Google\x20Vision\x20API\x20activa\x20y\x20funcional",
    "applyConstraints",
    "</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ms-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-primary\x20btn-sm\x22\x20onclick=\x22consultarProductoDesdeModal(\x27",
    "contains",
    "códigos\x20de\x20barras\x20❌\x20(CORS/Red)",
    "submit",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22badge\x20bg-light\x20text-dark\x20me-1\x20mb-1\x22\x20style=\x22font-size:\x200.7rem;\x22>",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22d-flex\x20justify-content-between\x20align-items-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-primary\x22\x20style=\x22font-size:\x200.65rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SKU:\x20",
    "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-danger\x22\x20role=\x22alert\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h6>❌\x20Error</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Error\x20al\x20consultar\x20el\x20producto:\x20",
    "parse",
    "Actualizando...",
    "Básicos,\x20códigos\x20de\x20barras\x20y\x20promociones",
    "<div\x20class=\x22row\x22>",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-muted\x20small\x20ms-md-2\x22>Escaneado:\x20",
    "keydown",
    "list-group-item\x20list-group-item-action\x20d-flex\x20align-items-center",
    "application/json",
    "resultado",
    "\x22\x20style=\x22width:218px;\x20height:124px;\x20object-fit:contain;\x20background:#fff;\x20border-radius:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "controller",
    "getItem",
    "Formato:",
    "1\x20endpoint\x20completado,\x20finalizando...",
    "enabled",
    "src",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "setAttribute",
    "🔄\x20Sin\x20productos:\x20cargando\x20productos\x20y\x20promociones...",
    "No\x20se\x20puede\x20generar\x20código\x20de\x20barras:\x20canvas\x20o\x20código\x20faltante",
    "upc_e",
    "ean_8",
    "</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-muted\x22\x20style=\x22font-size:0.8rem;\x20margin-top:-2px;\x22>CONTADO</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-muted\x20mx-2\x22\x20style=\x22font-size:1.5rem;\x22>|</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22fw-bold\x20text-primary\x20precio-responsive\x22>$\x20",
    "\x22\x20style=\x22width:40px;\x20height:40px;\x20object-fit:cover;\x20border-radius:4px;\x20margin-right:12px;\x20background:#f8f9fa;\x22>",
    "\x20(redondeado)",
    "updatefound",
    "💾\x20Promociones\x20guardadas\x20en\x20IndexedDB",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-md-6\x20col-lg-4\x20mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card\x20h-100\x20border-warning\x20shadow-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-header\x20bg-warning\x20text-dark\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6\x20class=\x22card-title\x20mb-0\x22>🏷️\x20",
    "</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "📊\x20<strong>Uso\x20local\x20de\x20este\x20dispositivo:</strong><br>",
    "\x20(quedan\x20",
    "alert-warning",
    "min",
    "decodeSingle",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-6\x20col-md-3\x20mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card\x20border-0\x20bg-light\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22",
    "\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20",
    "\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22height:\x2080px;\x20object-fit:\x20contain;\x20padding:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-body\x20p-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x20d-block\x20text-truncate\x22\x20style=\x22font-size:\x200.7rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "✅\x20Endpoint\x20promociones\x20consultado:\x20",
    "other",
    "getImageData",
    "center",
    "\x20unidades\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "⚠️\x20No\x20se\x20pudieron\x20obtener\x20estadísticas\x20de\x20códigos\x20de\x20barras",
    "es_oficial",
    "\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20",
    "\x20más</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "indexeddb_local",
    "</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>Unidades</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20class=\x22text-success\x20d-block\x22\x20style=\x22font-size:\x201.3rem;\x22>$",
    "controllerchange",
    "pr_gtin",
    "\x20->\x20",
    "⚡\x20Actualización\x20completada\x20en\x20",
    "mostrarModalPromocionesGenerales",
    "http",
    "72297TuaqVJ",
    "oncomplete",
    "join",
    "</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20",
    "⚠️\x20Error\x20guardando\x20promociones:",
    "warn",
    "códigos\x20de\x20barras\x20❌\x20(HTTP\x20",
    "getContext",
    "div",
    "</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20",
    "</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>",
    "https://verificadorb9-backend.vercel.app/api/productos",
    "some",
    "reduce",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-success\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6>🎉\x20¡Google\x20Vision\x20API\x20Activa!</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>✅\x20La\x20detección\x20premium\x20está\x20funcionando\x20correctamente</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>Fallback\x20automático:\x20Local\x20→\x20Google\x20Vision</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "includes",
    "<div\x20class=\x22alert\x20alert-danger\x22\x20role=\x22alert\x22>\x0a\x20\x20\x20\x20\x20\x20<strong>⚠️\x20No\x20se\x20detectó\x20código\x20válido</strong><br>\x0a\x20\x20\x20\x20\x20\x20Para\x20códigos\x20largos\x20como\x20este,\x20intenta:<br>\x0a\x20\x20\x20\x20\x20\x20•\x20📏\x20<strong>Recortar\x20muy\x20cerca\x20del\x20código</strong><br>\x0a\x20\x20\x20\x20\x20\x20•\x20💡\x20<strong>Mejor\x20iluminación\x20uniforme</strong><br>\x0a\x20\x20\x20\x20\x20\x20•\x20📱\x20<strong>Evitar\x20superficies\x20reflectivas</strong><br>\x0a\x20\x20\x20\x20\x20\x20•\x20🔍\x20<strong>Imagen\x20más\x20nítida\x20y\x20estable</strong>",
    "length",
    "10388388EjRdyg",
    "100%",
    "history",
    "upc_a",
    "🧪\x20Respuesta\x20completa\x20vision-detect:",
    "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-start\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-check\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20class=\x22form-check-input\x22\x20type=\x22checkbox\x22\x20id=\x22enabledCheck\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "🏦\x20PROBLEMA:\x20Facturación\x20no\x20habilitada\x20en\x20el\x20proyecto\x20correcto",
    "pro_cantidad_base",
    "button",
    "🔄\x20Nueva\x20versión\x20del\x20Service\x20Worker\x20disponible",
    "https://contador-apicloudvision.vercel.app/api/vision-detect",
    "🔥\x20",
    "\x20más\x20con\x20promociones.</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>",
    "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-12\x20col-lg-4\x20d-flex\x20justify-content-center\x20mb-3\x20mb-lg-0\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:16px;\x20box-shadow:0\x204px\x2024px\x20rgba(0,0,0,0.15);\x20padding:16px;\x20display:flex;\x20justify-content:center;\x20align-items:center;\x20width:240px;\x20height:140px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22",
    "<div\x20class=\x22alert\x20alert-danger\x22\x20role=\x22alert\x22>Error\x20al\x20procesar\x20la\x20imagen</div>",
    "./service-worker.js",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22bi\x20bi-info-circle\x22\x20style=\x22font-size:\x203rem;\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6\x20class=\x22mt-3\x22>ℹ️\x20Sin\x20promociones</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>No\x20hay\x20promociones\x20activas\x20en\x20este\x20momento.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "<div\x20class=\x22alert\x20alert-danger\x22>🔑\x20API\x20Key\x20inválida\x20-\x20verifica\x20la\x20configuración\x20en\x20Vercel</div>",
    "\x20x\x20",
    "update",
    "forEach",
    "<div\x20class=\x22text-center\x20text-muted\x20p-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22bi\x20bi-box-seam\x22\x20style=\x22font-size:\x202rem;\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-2\x20mb-0\x22>Productos\x20no\x20disponibles</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>",
    "🎯\x20Umbral\x20calculado:\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22d-flex\x20align-items-center\x20mb-3\x20p-2\x20border\x20rounded\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "pro_mensaje",
    "❌\x20Sin\x20datos,\x20usando\x20genérico",
    "srcObject",
    "⚠️\x20Consulta\x20parcial\x20de\x20endpoints",
    "5MNRELN",
    "querySelector",
    "\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-body\x20p-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20",
    "fulfilled",
    "diagnostico-resultado",
    "</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "\x20horas",
    "display",
    "appendChild",
    "Verifique\x20su\x20conexión\x20a\x20internet",
    "split",
    "⚠️\x20Error\x20con\x20endpoint\x20básico:",
    "DATA_MATRIX",
    "</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "none",
    "aztec",
    "\x0a\x20\x20\x20\x20</div>",
    "<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20•\x20<strong>Con\x20códigos\x20adicionales:</strong>\x20",
    "idPromo",
    "getUsageStatus",
    "toFixed",
    "Actualizar",
    "dailyLimit",
    "\x20usos\x20hoy",
    "),\x20",
    "data",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20pt-2\x20border-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>📅\x20Vigencia:</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "\x20\x20\x20•\x20API\x20Key\x20inválida\x20o\x20límites\x20excedidos",
    "📋\x20Datos\x20de\x20promociones:",
    "❌\x20Error\x20específico\x20del\x20backend:",
    "⚠️\x20Usando\x20nombre\x20completo:",
    "Error\x20al\x20cargar\x20promociones:",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-grow-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22fw-bold\x22\x20style=\x22font-size:\x200.9rem;\x20line-height:\x201.2;\x22>",
    "stop",
    "barcode-",
    "📡\x20Consultando\x20TODOS\x20los\x20endpoints\x20de\x20productos...",
    "<i\x20class=\x22bi\x20bi-clipboard-check\x22></i>",
    "getRegistrations",
    ")<br>",
    "\x22\x20class=\x22card-img-top\x22\x20alt=\x22",
    "Procesando\x20productos",
    "outcome",
    "\x20|\x20Promociones:\x20nunca",
    "pro_precioPromo",
    "\x20productos\x20(",
    "skus",
    "#000000",
    "block",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20class=\x22text-primary\x22>",
    "\x20\x20\x20Posibles\x20causas:",
    "SKIP_WAITING",
    "pro_nombrePromo",
    "keys",
    "limpiarHistorialBtn",
    "toString",
    "match",
    "clear",
    "5297068lwFLca",
    "7010353dijrKe",
    "Productos:\x20nunca\x20|\x20Promociones:\x20",
    "auto",
    "consultarProductoDesdeHistorial",
    "#btnTexto",
    "pro_precio_total",
    "getAll",
    "✅\x20Códigos\x20válidos:\x20",
    "mediaDevices",
    "🔍\x20Buscando\x20promociones\x20para\x20SKU:",
    "nombre",
    "🔧\x20Problema\x20de\x20CORS\x20detectado\x20-\x20necesita\x20configuración\x20en\x20backend",
    "❌\x20Error\x20cargando\x20promociones:",
    "abs",
    "<br><br>🌐\x20<strong>Backend:</strong>\x20Error\x20verificando\x20estado",
    "⚠️\x20Límite\x20local\x20alcanzado.\x20Mensual:\x20",
    "promociones:",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6>🏦\x20Problema\x20de\x20Facturación</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>La\x20facturación\x20no\x20está\x20habilitada\x20en\x20el\x20proyecto\x20correcto\x20(#1070150612422)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small><a\x20href=\x22https://console.cloud.google.com/billing\x22\x20target=\x22_blank\x22>Ve\x20a\x20Google\x20Cloud\x20Billing</a></small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "752fHdJQa",
    "pr_sku",
    "createObjectStore",
    "QR_CODE",
    "open",
    "EAN13",
    "descripcion",
    "\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22d-flex\x20justify-content-between\x20align-items-start\x20mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20class=\x22text-dark\x22\x20style=\x22font-size:\x201rem;\x22>",
    "\x22\x20formato:\x20",
    "<div\x20class=\x22alert\x20alert-info\x22\x20role=\x22alert\x22>Buscando\x20producto...</div>",
    "ultimaActualizacion",
    "CODIGO",
    "reload",
    "warningThreshold",
    "consultarProductoDesdeModal",
    "🏦\x20Error\x20de\x20facturación:\x20Habilita\x20billing\x20en\x20Google\x20Cloud",
    "fallbackTiempo",
    "🔄\x20Consultando\x20endpoint\x20con\x20códigos\x20de\x20barras...",
    "splice",
    "Consultando\x203\x20endpoints...",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>",
    "Error\x20al\x20copiar:",
    "13sAbKwk",
    "estadisticas",
    "resetMonthlyUsage",
    "•\x20Mensual:\x20",
    "</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-muted\x22\x20style=\x22font-size:0.8rem;\x20margin-top:-2px;\x22>MSI</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!--\x20Código\x20de\x20barras\x20funcional\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22barcode-",
    "allSettled",
    ">\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22form-check-label\x22\x20for=\x22enabledCheck\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>Activar\x20detección\x20avanzada\x20(Backend)</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Usa\x20servidor\x20dedicado\x20para\x20mejor\x20detección\x20de\x20códigos\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20",
    "toDateString",
    "<span\x20class=\x22badge\x20bg-warning\x20text-dark\x20me-2\x20mb-1\x22\x20style=\x22font-size:0.85rem;\x22>🔥\x20",
    "🎯\x20Producto\x20encontrado\x20con\x20códigos\x20múltiples:",
    "canvas",
    "<br>",
    "toLocaleString",
    "Hace\x20",
    "pdf417",
    "key",
    "width",
    "lastUsedDate",
    "<div\x20class=\x22alert\x20alert-info\x20mt-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Mostrando\x20los\x20primeros\x2020\x20productos.\x20Hay\x20",
    "top",
    "🔄\x20Primera\x20carga:\x20cargando\x20productos\x20y\x20promociones...",
    "Productos\x20básicos,\x20códigos\x20de\x20barras\x20y\x20promociones",
    "\x0a\x20\x20#reader\x20{\x0a\x20\x20\x20\x20position:\x20relative;\x0a\x20\x20\x20\x20width:\x20320px;\x0a\x20\x20\x20\x20height:\x20120px;\x0a\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20\x20\x20background:\x20#000;\x0a\x20\x20\x20\x20border-radius:\x2012px;\x0a\x20\x20\x20\x20box-shadow:\x200\x202px\x208px\x20rgba(0,0,0,0.15);\x0a\x20\x20}\x0a\x20\x20#reader\x20video\x20{\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20transform:\x20translateX(-50%);\x0a\x20\x20\x20\x20width:\x20320px\x20!important;\x0a\x20\x20\x20\x20height:\x20120px\x20!important;\x0a\x20\x20\x20\x20object-fit:\x20cover;\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20/*\x20Estilos\x20responsivos\x20para\x20nombre\x20del\x20producto\x20*/\x0a\x20\x20.nombre-producto-responsive\x20{\x0a\x20\x20\x20\x20font-size:\x201.4rem;\x0a\x20\x20\x20\x20line-height:\x201.3;\x0a\x20\x20\x20\x20margin-bottom:\x200.5rem;\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20@media\x20(max-width:\x20768px)\x20{\x0a\x20\x20\x20\x20.nombre-producto-responsive\x20{\x0a\x20\x20\x20\x20\x20\x20font-size:\x201.2rem\x20!important;\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20@media\x20(max-width:\x20480px)\x20{\x0a\x20\x20\x20\x20.nombre-producto-responsive\x20{\x0a\x20\x20\x20\x20\x20\x20font-size:\x201.1rem\x20!important;\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x0a\x0a\x20\x20/*\x20Estilos\x20responsivos\x20para\x20precios\x20*/\x0a\x20\x20.precio-responsive\x20{\x0a\x20\x20\x20\x20font-size:\x203.5rem;\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20@media\x20(max-width:\x20768px)\x20{\x0a\x20\x20\x20\x20.precio-responsive\x20{\x0a\x20\x20\x20\x20\x20\x20font-size:\x202.2rem\x20!important;\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20@media\x20(max-width:\x20480px)\x20{\x0a\x20\x20\x20\x20.precio-responsive\x20{\x0a\x20\x20\x20\x20\x20\x20font-size:\x201.8rem\x20!important;\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20/*\x20Estilos\x20para\x20código\x20de\x20barras\x20funcional\x20*/\x0a\x20\x20.barcode-canvas\x20{\x0a\x20\x20\x20\x20max-width:\x20100%;\x0a\x20\x20\x20\x20height:\x20auto;\x0a\x20\x20\x20\x20border:\x201px\x20solid\x20#ddd;\x0a\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20background:\x20#ffffff;\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20.codigo-barras-container\x20{\x0a\x20\x20\x20\x20max-width:\x20300px;\x0a\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20@media\x20(max-width:\x20768px)\x20{\x0a\x20\x20\x20\x20.codigo-barras-container\x20{\x0a\x20\x20\x20\x20\x20\x20padding:\x202rem\x20!important;\x0a\x20\x20\x20\x20\x20\x20max-width:\x20250px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.barcode-canvas\x20{\x0a\x20\x20\x20\x20\x20\x20max-width:\x20200px;\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20@media\x20(max-width:\x20480px)\x20{\x0a\x20\x20\x20\x20.codigo-barras-container\x20{\x0a\x20\x20\x20\x20\x20\x20padding:\x201.5rem\x20!important;\x0a\x20\x20\x20\x20\x20\x20max-width:\x20200px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.barcode-canvas\x20{\x0a\x20\x20\x20\x20\x20\x20max-width:\x20160px;\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x0a",
    "log",
    "\x20\x20\x20💡\x20Ejecuta\x20diagnosticarBackend()\x20para\x20más\x20detalles",
    "month",
    "startsWith",
    "SUCCESS",
    "promociones-container",
    "✅\x20Endpoint\x20básico\x20consultado:",
    "change",
    "🔍\x20Datos\x20de\x20promoción\x20recibidos:",
    "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20p-2\x20text-center\x22\x20style=\x22background-color:#f8f9fa;\x20border-radius:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>ℹ️\x20Sin\x20promociones\x20activas</small>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20",
    "https://verificadorb9-backend.vercel.app/api/promociones-mejoradas",
    "addEventListener",
    "image/jpeg",
    "📋\x20Detalles\x20completos:",
    "❌\x20Error\x20consultando\x20endpoints",
    "cantidad",
    "checked",
    "push",
    "codigos_barras",
    "files",
    "</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>Total\x20Normal</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "productos",
    "</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "className",
    "data-sku",
    "⚠️\x20Error\x20con\x20endpoint\x20de\x20códigos\x20de\x20barras:",
    "details",
    "GET",
    "#mensajeActualizacion",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-body\x20p-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22productos-lista\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-2\x22>",
    "codabar_reader",
    "monthlyUsed",
    "data_matrix",
    "getInstance",
    "backend_mejorado",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-secondary\x20mt-2\x22\x20style=\x22font-size:0.9rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>Códigos\x20disponibles:</strong>\x20",
    "scrollIntoView",
    "Finalizada\x20en\x20",
    "script",
    "Error\x20consultando\x20producto\x20desde\x20historial:",
    "loadUsage",
    "race",
    "code_39",
    "<small\x20class=\x22text-muted\x20mt-1\x20d-block\x22>",
    "Promoción\x20",
    "⚠️\x20Error\x20al\x20procesar\x20producto\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20class=\x22text-success\x22>$",
    "✅\x20Usando\x20promociones\x20desde\x20IndexedDB:",
    "🚀\x20Usando\x20Barcode\x20Detection\x20API\x20nativa",
    "🔄\x20No\x20hay\x20promociones\x20locales,\x20consultando\x20servidor...",
    "filter",
    "format",
    "💡\x20El\x20contador\x20del\x20backend\x20se\x20actualiza\x20automáticamente\x20en\x20el\x20servidor",
    "activo",
    "Error\x20verificando\x20promociones:",
    "❌\x20Error\x20con\x20API\x20nativa,\x20usando\x20fallback:",
    "disabled",
    "❌\x20No\x20se\x20encontraron\x20códigos\x20válidos\x20en\x20el\x20texto",
    "\x20días",
    "❌\x20Error\x20guardando\x20promociones\x20en\x20IndexedDB:",
    "rejected",
    "promociones",
    "right",
    "count",
    "codeResult",
    "#6c757d",
    "price",
    "code_128_reader",
    "find",
    "🔗\x20Ve\x20a:\x20https://console.cloud.google.com/billing",
    "all",
    "\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22font-size:\x200.6rem;\x20padding:\x201px\x204px;\x20border-radius:\x203px;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22Copiar\x20SKU\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20📋\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "drawImage",
    "smooth",
    "UPC",
    "<p\x20class=\x22text-muted\x20mb-0\x22>No\x20hay\x20productos\x20escaneados.</p>",
    "then",
    "\x0a\x20\x20\x20\x20<div\x20class=\x22row\x20align-items-center\x20justify-content-center\x20g-0\x20mb-4\x22\x20style=\x22padding:\x200px\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "pop",
    "qty",
    "🔍\x20Validando:\x20\x22",
    "✅\x20Todos\x20los\x20endpoints\x20consultados",
    "maxHeight",
    "<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20•\x20<strong>Códigos\x20totales:</strong>\x20",
    "🚫\x20PROBLEMA:\x20Permisos\x20denegados\x20-\x20Vision\x20API\x20no\x20habilitada",
    "code_128",
    "warning",
    "<span\x20class=\x22badge\x20bg-success\x20text-white\x20ms-2\x22\x20style=\x22font-size:0.7rem;\x22>🏷️\x20PROMO</span>",
    "i2of5_reader",
    "usarCodigosBarras",
    "sort",
    "transaction",
    "onerror",
    "</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22badge\x20bg-primary\x20ms-2\x22>1\x20unidad</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x20d-block\x22><strong>SKU:</strong>\x20",
    "visionData",
    "insertBefore",
    "<br><br>📊\x20<strong>Uso\x20local:</strong>\x20",
    "Failed\x20to\x20fetch",
    "📸\x20Usando\x20Quagga\x20como\x20fallback",
    "códigos\x20de\x20barras\x20❌\x20(timeout/error)",
    "createElement",
    "objectStore",
    "installBtn",
    "❌\x20Google\x20Vision\x20no\x20detectó\x20texto",
    "pro_grupoProductos_primaria",
    "input",
    "es-CL",
    "preventDefault",
    "installing",
    "✅\x20Datos\x20locales\x20encontrados:\x20productos:",
    "Timeout",
    "Error\x20HTTP:\x20",
    "⚠️\x20Error\x20al\x20detectar\x20promociones\x20para\x20SKU\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20class=\x22text-muted\x22>-</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>Sin\x20datos</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-12\x20text-center\x20mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>...\x20y\x20",
    "</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-link\x20btn-sm\x20ms-2\x20p-0\x20copiar-btn\x22\x20title=\x22Copiar\x20SKU\x22\x20data-copiar=\x22",
    "2\x20endpoints\x20completados,\x20finalizando...",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x20p-2\x22\x20style=\x22background-color:#f8f9fa;\x20border-radius:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20style=\x22color:#495057;\x22>🏷️\x20PROMOCIONES\x20ACTIVAS</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "code_93",
    "unshift",
    "🔑\x20PROBLEMA:\x20API\x20Key\x20inválida",
    "message",
    "Promoción\x20especial",
    "#btnPromociones",
    "\x20promocion(es)\x20encontrada(s)\x20para\x20SKU:\x20",
    "ean_reader",
    "onclick",
    "totalCodigos",
    "\x20mensual,\x20",
    "json",
    "storageKey",
    "Backend\x20no\x20disponible\x20-\x20usando\x20detección\x20local",
    "installed",
    "🎯\x20PROMOCIÓN\x20ENCONTRADA\x20para\x20SKU\x20",
    "💾\x20Promociones\x20guardadas\x20en\x20IndexedDB\x20desde\x20servidor",
    "BILLING_DISABLED",
    "textContent",
    "d-none",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6\x20class=\x22text-muted\x20mb-2\x22>📋\x20Descripción\x20completa\x20de\x20productos:</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22border\x20rounded\x20p-3\x20bg-light\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "replace",
    "✅\x20Extraído\x20formato\x20completo\x20del\x20nombre:",
    "onsuccess",
    "⚠️\x20Solo\x20cantidad\x20extraída:",
    "nearest",
    "#198754",
    "\x0a\x20\x20\x20\x20</div>\x0a\x20\x20",
    "FECHA_ESCANEO",
    "11DmuKuC",
    "bg-danger",
    "writeText",
    "postMessage",
    "CODE128",
    "🎯\x20Consultando\x20promociones\x20generales...",
    "✅\x20Instalación\x20aceptada",
    "focus",
    "\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20object-fit:\x20contain;\x20border-radius:\x208px;\x20background:\x20#f8f9fa;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "Consultando\x20los\x203\x20endpoints...",
    "Fecha\x20desconocida",
    "readonly",
    "\x22\x20alt=\x22",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6>ℹ️\x20Sin\x20promociones</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>No\x20hay\x20promociones\x20activas\x20en\x20este\x20momento.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-warning\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>⚠️\x20Las\x20promociones\x20solo\x20aplican\x20pagando\x20de\x20contado</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "monthlyCount",
    "clipboard",
    "codabar",
    "toLowerCase",
    "readwrite",
    "✅\x20Google\x20Vision\x20API\x20usada\x20exitosamente\x20-\x20contador\x20local\x20actualizado",
    "✅\x20Detección\x20avanzada\x20activada",
    "✅\x20Código\x20detectado\x20(configuración\x20agresiva):",
    "<div\x20class=\x22alert\x20alert-danger\x22>❓\x20Error\x20desconocido\x20en\x20Google\x20Vision\x20API</div>",
    "substring",
    "Backend\x20con\x20error:\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20mb-3\x20p-3\x20bg-light\x20rounded\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20class=\x22text-primary\x20d-block\x22\x20style=\x22font-size:\x201.1rem;\x22>",
    "x-large",
    "height",
    "list-group\x20position-absolute\x20w-100",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-decoration-line-through\x20text-muted\x20d-block\x22\x20style=\x22font-size:\x201.1rem;\x22>$",
    "</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "EAN_8",
    "🔍\x20Iniciando\x20diagnóstico\x20del\x20backend...",
    "muted",
    "result",
    "\x20-\x20",
    "Última\x20actualización:\x20",
    "getUserMedia",
    "%</small>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress\x22\x20style=\x22height:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-bar\x20bg-",
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==",
    "state",
    "PROMO",
    "\x0a\x20\x20\x20\x20<div\x20class=\x22mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22d-flex\x20justify-content-between\x20align-items-center\x20mb-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22fw-medium\x22>",
    "floor",
    "showUsageWarning",
    "</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22d-flex\x20justify-content-center\x20align-items-center\x20gap-3\x20flex-wrap\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22d-flex\x20align-items-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22fw-bold\x20text-danger\x20precio-responsive\x22>$\x20",
    "🏷️\x20Promociones\x20oficiales\x20filtradas:",
    "CORS",
    "\x20para:\x20",
    "💡\x20Ve\x20a:\x20https://console.cloud.google.com/apis/library/vision.googleapis.com",
    "<br>•\x20🔍\x20<strong>Códigos\x20detectados:</strong>\x20",
    "valor_total",
    "📋\x20Probando\x20configuración:\x20",
    "https://verificadorb9-backend.vercel.app/api/productos-con-codigos",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "ean_8_reader",
    "description",
    "toISOString",
    "500",
    "\x0a\x20\x20\x20\x20\x20\x20",
    "Sin\x20conexión\x20a\x20internet",
    "onload",
    "validTo",
    "sugerenciasDiv",
    "🔍\x20Actualizando\x20promociones\x20en\x20vista:",
    "#ffffff",
    "</span>",
    "catch",
    "</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22d-block\x20text-muted\x22>Cantidad</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "usage",
    "googleVisionConfig",
    "\x20promociones\x20(",
    "pr_name",
    "25479460IeDIHR",
    ";\x20expires=",
    "\x0a\x20\x20\x20\x20<div\x20class=\x22mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22d-flex\x20justify-content-between\x20align-items-center\x20mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-warning\x22>🏷️\x20Productos\x20con\x20Promociones</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22badge\x20bg-warning\x20text-dark\x22>",
    "agresiva",
    "total_price",
    "Error\x20verificando\x20datos\x20locales:",
    "12px\x20Arial",
    "click",
    "image/png",
    "large",
    "⚠️\x20Backend\x20responde\x20pero\x20con\x20error:",
    "font",
    "</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-warning\x22\x20onclick=\x22mostrarModalPromocionesGenerales()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20🔄\x20Reintentar\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20",
    "\x20\x20\x20•\x20Variable\x20GOOGLE_VISION_API_KEY\x20no\x20configurada\x20en\x20Vercel",
    "📸\x20Preparando\x20imagen\x20para\x20Google\x20Vision...",
    "<img\x20src=\x22",
    "map",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-12\x20col-md-6\x20col-lg-4\x20mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card\x20h-100\x20border-warning\x22\x20style=\x22cursor:pointer;\x22\x20onclick=\x22mostrarProductoPromocion(\x27",
    "SKU",
    "left",
    "add",
    "</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-success\x20fw-bold\x20mt-1\x22>$",
    "https://media.megaservicio.net",
    "off",
    "⚙️\x20Configuración\x20de\x20detección\x20avanzada",
    "<div\x20class=\x22alert\x20alert-info\x22\x20role=\x22alert\x22>Procesando\x20imagen...</div>",
    "promociones\x20✅",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22me-3\x20d-flex\x20align-items-center\x20justify-content-center\x20bg-light\x20rounded\x22\x20style=\x22min-width:\x2060px;\x20height:\x2060px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22bi\x20bi-image\x20text-muted\x22\x20style=\x22font-size:\x201.5rem;\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>\x20\x20Total\x20SKUs:</strong>\x20",
    "?stats=true",
    "CODE_39",
    "✅\x20Configuración\x20guardada",
    "status",
    "<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x22>Backend:\x20https://contador-apicloudvision.vercel.app/</small><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-info\x20btn-sm\x22\x20onclick=\x22diagnosticarBackend()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20🔍\x20Probar\x20Conexión\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20",
    "\x0a\x20\x20\x20\x20<div\x20class=\x22card\x20shadow-sm\x20mb-3\x20w-100\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-header\x20bg-primary\x20text-white\x20d-flex\x20flex-column\x20flex-md-row\x20justify-content-between\x20align-items-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>Historial\x20de\x20productos\x20escaneados:</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20",
    "Formato\x20de\x20promociones\x20inválido",
    "rawValue",
    "putImageData",
    "<small\x20class=\x22text-muted\x20d-block\x22><strong>Código:</strong>\x20",
    "ITF",
    "Backend\x20error",
    "<li\x20class=\x22list-group-item\x20d-flex\x20flex-column\x20flex-md-row\x20justify-content-between\x20align-items-md-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22d-flex\x20align-items-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>",
    "requestSubmit",
    "📝\x20Texto\x20completo\x20detectado:",
    "🧪\x20Probando\x20vision-detect\x20con\x20imagen\x20de\x20prueba...",
    "bg-success",
    "Producto\x20desconocido",
    "\x20longitud:\x20",
    "data-form-type",
    "\x20usos\x20mensuales",
    "serviceWorker",
    "JsBarcode",
    "trim",
    "remove",
    "pro_tipoPromo",
    "error",
    "<div\x20class=\x22alert\x20alert-danger\x22\x20role=\x22alert\x22>Por\x20favor\x20autoriza\x20el\x20acceso\x20a\x20la\x20cámara</div>",
    "imageSmoothingEnabled",
    "❌\x20Formato\x20de\x20promociones\x20inválido",
    "itf",
    "fill",
    "UPC_A",
    "Nunca",
    "\x20minutos",
    "\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "mostrarProductoPromocion",
    "isArray",
    "Generando\x20código\x20de\x20barras\x20",
    "style",
    "setItem",
    "max",
    "verificadorB9DB",
    "❌\x20Instalación\x20rechazada",
    "objectStoreNames",
    "false",
    "Error\x20generando\x20código\x20de\x20barras:",
    "💾\x20Guardar",
    "test",
    "start",
    "\x0a\x20\x20\x20\x20<div\x20class=\x22d-flex\x20align-items-center\x20justify-content-end\x20h-100\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22limpiarHistorialBtn\x22\x20class=\x22btn\x20btn-danger\x20btn-sm\x22>Limpiar\x20historial</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20",
    "Combo\x20Especial",
    ".alert-danger",
    "Código\x20no\x20válido",
    "\x22\x20style=\x22font-size:1.2rem;\x20color:#616161;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22bi\x20bi-clipboard\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22badge\x20bg-success\x20fs-6\x20mb-1\x20mb-md-0\x20ms-md-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Precio:\x20$",
    "Error\x20cargando\x20promociones:",
    "playsinline",
    "toDataURL",
    "✅\x20Endpoint\x20/api/stats\x20funciona\x20correctamente",
    "pr_precio",
    "detect",
    "\x20al\x20",
    "reader",
    "❌\x20Error\x20al\x20registrar\x20SW:",
    "video",
    "No\x20se\x20pudieron\x20cargar\x20productos\x20de\x20ningún\x20endpoint",
    "getAttribute",
    "#btnSpinner",
    "\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>🌐\x20Google\x20Vision\x20API:</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "PRECIO",
    "productos_ts",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "⚠️\x20<strong>Límite\x20diario\x20cerca:</strong>\x20",
    "🔄\x20Iniciando\x20detección\x20con\x20Quagga...",
    "CODE_93",
    "</div>",
    "tipo",
    "ean_13",
    "i2of5",
    "getMonth",
    "qr_code",
    "\x22\x20(",
    "fillText",
    "bg-warning\x20text-dark",
    "success",
    "textAnnotations",
    "?t=",
    "overflowY",
    "pr_imagen",
    "Nunca\x20actualizado",
    "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-info\x22\x20role=\x22alert\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h5>🏷️\x20No\x20se\x20encontraron\x20productos\x20con\x20promociones</h5>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mb-0\x22>Puede\x20ser\x20que\x20no\x20haya\x20promociones\x20activas\x20en\x20este\x20momento\x20o\x20que\x20el\x20servicio\x20no\x20esté\x20disponible.</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20",
    "upc_e_reader",
    "📋\x20Configuración\x20final\x20para\x20códigos\x20largos...",
    "<span\x20class=\x22badge\x20",
    "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20p-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22spinner-border\x20text-warning\x22\x20role=\x22status\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22visually-hidden\x22>Cargando\x20promociones...</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22mt-2\x22>Cargando\x20promociones\x20y\x20productos...</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20",
    "❌\x20Cancelar",
    "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-warning\x20text-center\x20mt-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>⚠️\x20Las\x20promociones\x20solo\x20aplican\x20pagando\x20de\x20contado</strong>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20",
    "153508mBIOwP",
    "API_KEY_INVALID",
    "hide",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-warning\x22\x20style=\x22font-weight:500;\x22>⚠️\x20Las\x20promociones\x20solo\x20aplican\x20pagando\x20de\x20contado</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20",
    "🔄\x20Tercera\x20tentativa:\x20imagen\x20original\x20sin\x20procesamiento...",
    "<i\x20class=\x22bi\x20bi-clipboard\x22></i>",
    "promoResult",
    "productosConCodigos",
    "target",
    "\x20segundos",
    "code",
    "https://contador-apicloudvision.vercel.app/api/stats",
    "responses",
    "básico\x20❌\x20(error)",
    "EAN_13",
    "position",
    "⚠️\x20Usando\x20solo\x20detección\x20local",
    "now",
    "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22spinner-border\x20spinner-border-sm\x20me-2\x22\x20role=\x22status\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20🔍\x20Diagnosticando\x20backend...\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20",
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-3\x20",
    "stringify",
    "</small>",
    "validFrom",
    "upc_reader",
    "📏\x20Ampliando\x20imagen\x20pequeña:\x20",
    "type",
    "boundingBox",
    "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-12\x20col-lg-8\x20text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22fw-bold\x20nombre-producto-responsive\x22\x20style=\x22color:#616161;\x22>",
    "❌\x20Backend\x20no\x20disponible:",
    "statusText",
    "scope",
    "autocapitalize",
    "\x20con\x20datos\x20disponibles)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "🌐\x20<strong>Backend:</strong>\x20Verificando...",
    "🧮\x20Calculando\x20precio\x20total:\x20",
    "❌\x20Endpoint\x20/api/stats\x20falló:",
    "🔧\x20Error\x20500:\x20Problema\x20interno\x20del\x20servidor",
    "slice",
    "value",
    "findIndex",
    "</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22d-block\x20text-muted\x22>Precio\x20promocional</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20",
    "\x20endpoints\x20consultados",
    "Error\x20",
    "🔍\x20Código\x20candidato\x20encontrado:\x20",
    "disconnect",
    "POST",
    "Error\x20obteniendo\x20promociones:",
    "getElementById",
    "btn-outline-primary",
    "no-store",
    "mensaje",
    "🏷️\x20",
    "Algunos\x20endpoints\x20fallaron\x20(",
    "saveUsage",
    "data-copiar",
    "2278377sRCMEp",
    "round",
    "✅\x20Extraído\x20formato\x20con\x20peso\x20del\x20nombre:",
    "\x20promociones",
    "🔄\x20Probando\x20configuración\x20alternativa...",
  ];
  _0x121e = function () {
    return _0x2a53f6;
  };
  return _0x121e();
}
const form = document["getElementById"](_0x765170(0x2ff)),
  inputCodigo = document[_0x765170(0x2ce)]("codigo"),
  readerDiv = document[_0x765170(0x2ce)](_0x765170(0x27c)),
  ayudaTexto = document[_0x765170(0x2ce)]("ayuda"),
  installBtn = document[_0x765170(0x2ce)](_0x765170(0x47c));
inputCodigo[_0x765170(0x347)]("autocomplete", _0x765170(0x238)),
  inputCodigo["setAttribute"]("spellcheck", _0x765170(0x26b)),
  inputCodigo[_0x765170(0x347)](_0x765170(0x2be), _0x765170(0x238)),
  inputCodigo[_0x765170(0x347)]("autocorrect", "off"),
  inputCodigo[_0x765170(0x347)](_0x765170(0x251), _0x765170(0x35c)),
  form[_0x765170(0x347)]("autocomplete", "off");
let scannerActivo = ![],
  deferredPrompt,
  puedeEscanear = !![],
  ultimoCodigoEscaneado = "",
  datosYaCargados = ![];
if (!window[_0x765170(0x254)]) {
  const script = document[_0x765170(0x47a)](_0x765170(0x43b));
  (script[_0x765170(0x345)] = _0x765170(0x2e2)),
    (script[_0x765170(0x2f2)] = !![]),
    document["head"]["appendChild"](script);
}
const GOOGLE_VISION_CONFIG = {
  apiKey: "",
  enabled: !![],
  monthlyLimit: 0x3b6,
  dailyLimit: 0x20,
  warningThreshold: 0x320,
};
class GoogleVisionUsageTracker {
  constructor() {
    const _0x596dc7 = _0x765170;
    (this[_0x596dc7(0x498)] = "googleVisionUsage"), this["loadUsage"]();
  }
  [_0x765170(0x43d)]() {
    const _0x4d0690 = _0x765170,
      _0x4ff68f = localStorage[_0x4d0690(0x341)](this["storageKey"]);
    _0x4ff68f
      ? (this[_0x4d0690(0x21d)] = JSON[_0x4d0690(0x336)](_0x4ff68f))
      : this["resetMonthlyUsage"]();
    const _0x4cec3e = new Date()[_0x4d0690(0x28d)]();
    this[_0x4d0690(0x21d)][_0x4d0690(0x415)] !== _0x4cec3e &&
      this[_0x4d0690(0x3fe)]();
  }
  [_0x765170(0x3fe)]() {
    const _0x4dce90 = _0x765170;
    (this[_0x4dce90(0x21d)] = {
      month: new Date()[_0x4dce90(0x28d)](),
      year: new Date()["getFullYear"](),
      monthlyCount: 0x0,
      dailyCount: 0x0,
      lastUsedDate: new Date()[_0x4dce90(0x403)](),
      history: [],
    }),
      this[_0x4dce90(0x2d4)]();
  }
  [_0x765170(0x2d4)]() {
    const _0x3dc0ff = _0x765170;
    localStorage[_0x3dc0ff(0x266)](
      this[_0x3dc0ff(0x498)],
      JSON[_0x3dc0ff(0x2b3)](this[_0x3dc0ff(0x21d)])
    );
  }
  [_0x765170(0x2fb)]() {
    const _0x2aae5e = _0x765170,
      _0x234dea = new Date()[_0x2aae5e(0x403)]();
    this[_0x2aae5e(0x21d)]["lastUsedDate"] !== _0x234dea &&
      ((this[_0x2aae5e(0x21d)]["dailyCount"] = 0x0),
      (this[_0x2aae5e(0x21d)][_0x2aae5e(0x40d)] = _0x234dea),
      this[_0x2aae5e(0x2d4)]());
    const _0x3ef89e =
        this[_0x2aae5e(0x21d)][_0x2aae5e(0x4b7)] <
        GOOGLE_VISION_CONFIG[_0x2aae5e(0x2e9)],
      _0x1bde9b =
        this[_0x2aae5e(0x21d)][_0x2aae5e(0x30c)] <
        GOOGLE_VISION_CONFIG[_0x2aae5e(0x3b0)];
    return _0x3ef89e && _0x1bde9b;
  }
  ["recordUsage"]() {
    const _0x2bc520 = _0x765170;
    this["usage"][_0x2bc520(0x4b7)]++,
      this[_0x2bc520(0x21d)][_0x2bc520(0x30c)]++,
      this[_0x2bc520(0x21d)]["history"][_0x2bc520(0x424)]({
        date: new Date()[_0x2bc520(0x211)](),
        count: this[_0x2bc520(0x21d)][_0x2bc520(0x4b7)],
      }),
      this[_0x2bc520(0x21d)]["history"][_0x2bc520(0x37d)] > 0x32 &&
        (this[_0x2bc520(0x21d)]["history"] =
          this[_0x2bc520(0x21d)][_0x2bc520(0x380)][_0x2bc520(0x2c4)](-0x32)),
      this["saveUsage"]();
  }
  [_0x765170(0x3ad)]() {
    const _0x2cf69d = _0x765170;
    return {
      monthlyUsed: this["usage"][_0x2cf69d(0x4b7)],
      monthlyLimit: GOOGLE_VISION_CONFIG[_0x2cf69d(0x2e9)],
      dailyUsed: this[_0x2cf69d(0x21d)][_0x2cf69d(0x30c)],
      dailyLimit: GOOGLE_VISION_CONFIG["dailyLimit"],
      remainingMonthly:
        GOOGLE_VISION_CONFIG[_0x2cf69d(0x2e9)] -
        this[_0x2cf69d(0x21d)]["monthlyCount"],
      remainingDaily:
        GOOGLE_VISION_CONFIG["dailyLimit"] -
        this[_0x2cf69d(0x21d)][_0x2cf69d(0x30c)],
      canUse: this["canUseAPI"](),
    };
  }
  [_0x765170(0x204)]() {
    const _0x50e0c5 = _0x765170,
      _0x4a2981 = this["getUsageStatus"]();
    if (_0x4a2981[_0x50e0c5(0x433)] >= GOOGLE_VISION_CONFIG[_0x50e0c5(0x3f3)])
      return (
        "⚠️\x20<strong>Límite\x20cerca:</strong>\x20" +
        _0x4a2981["monthlyUsed"] +
        "/" +
        _0x4a2981[_0x50e0c5(0x2e9)] +
        _0x50e0c5(0x252)
      );
    if (_0x4a2981["dailyUsed"] >= GOOGLE_VISION_CONFIG[_0x50e0c5(0x3b0)] * 0.8)
      return (
        _0x50e0c5(0x286) +
        _0x4a2981[_0x50e0c5(0x326)] +
        "/" +
        _0x4a2981[_0x50e0c5(0x3b0)] +
        _0x50e0c5(0x3b1)
      );
    return null;
  }
}
const visionUsageTracker = new GoogleVisionUsageTracker();
async function detectarConGoogleVision(_0x36cb75) {
  const _0x473480 = _0x765170;
  console[_0x473480(0x413)](_0x473480(0x22f));
  const _0x8ce8b5 = document["createElement"](_0x473480(0x406)),
    _0x184e77 = _0x8ce8b5["getContext"]("2d");
  let { width: _0x32ca81, height: _0x22d0e0 } = _0x36cb75;
  const _0x6599ff = 0x400;
  if (_0x32ca81 > _0x6599ff || _0x22d0e0 > _0x6599ff) {
    const _0x416961 = Math["min"](_0x6599ff / _0x32ca81, _0x6599ff / _0x22d0e0);
    (_0x32ca81 *= _0x416961), (_0x22d0e0 *= _0x416961);
  }
  (_0x8ce8b5[_0x473480(0x40c)] = _0x32ca81),
    (_0x8ce8b5["height"] = _0x22d0e0),
    _0x184e77["drawImage"](_0x36cb75, 0x0, 0x0, _0x32ca81, _0x22d0e0);
  const _0x2d5492 = _0x8ce8b5["toDataURL"](_0x473480(0x41f), 0.9);
  console[_0x473480(0x413)]("📡\x20Enviando\x20a\x20backend\x20proxy...");
  try {
    const _0x39aaca = await fetch(
      "https://contador-apicloudvision.vercel.app/api/vision-detect",
      {
        method: "POST",
        headers: { "Content-Type": _0x473480(0x33d) },
        body: JSON["stringify"]({
          image: _0x2d5492,
          userAgent: navigator[_0x473480(0x318)][_0x473480(0x1ef)](0x0, 0x32),
          timestamp: new Date()[_0x473480(0x211)](),
        }),
      }
    );
    if (!_0x39aaca["ok"]) {
      const _0x4ed217 = await _0x39aaca["text"]();
      throw new Error(
        "Backend\x20error:\x20" +
          _0x39aaca["status"] +
          _0x473480(0x1fb) +
          _0x4ed217
      );
    }
    const _0x2eeb00 = await _0x39aaca[_0x473480(0x497)]();
    console[_0x473480(0x413)]("📊\x20Respuesta\x20del\x20backend:", _0x2eeb00);
    if (_0x2eeb00[_0x473480(0x292)])
      return (
        visionUsageTracker["recordUsage"](),
        console[_0x473480(0x413)](_0x473480(0x1eb)),
        console[_0x473480(0x413)](_0x473480(0x449)),
        extraerCodigoDeTexto(_0x2eeb00[_0x473480(0x474)])
      );
    else
      throw new Error(
        _0x2eeb00[_0x473480(0x258)] || "Error\x20en\x20detección"
      );
  } catch (_0x131ec9) {
    console[_0x473480(0x413)](_0x473480(0x3b7), _0x131ec9[_0x473480(0x48f)]);
    if (_0x131ec9[_0x473480(0x48f)][_0x473480(0x37b)](_0x473480(0x212)))
      console[_0x473480(0x413)](_0x473480(0x2c3)),
        console["log"](_0x473480(0x3cb)),
        console[_0x473480(0x413)](_0x473480(0x22e)),
        console[_0x473480(0x413)](
          "\x20\x20\x20•\x20Problema\x20en\x20el\x20código\x20de\x20la\x20función\x20serverless"
        ),
        console[_0x473480(0x413)](_0x473480(0x3b5)),
        console[_0x473480(0x413)](_0x473480(0x414));
    else {
      if (
        _0x131ec9[_0x473480(0x48f)][_0x473480(0x37b)](_0x473480(0x207)) ||
        _0x131ec9[_0x473480(0x48f)][_0x473480(0x37b)](_0x473480(0x477)) ||
        _0x131ec9[_0x473480(0x48f)][_0x473480(0x37b)]("NetworkError")
      )
        throw new Error(_0x473480(0x309));
    }
    throw _0x131ec9;
  }
}
function extraerCodigoDeTexto(_0x30f5cc) {
  const _0x21aea5 = _0x765170,
    _0x25d1a2 = _0x30f5cc[_0x21aea5(0x2ab)][0x0]?.[_0x21aea5(0x293)] || [];
  if (_0x25d1a2[_0x21aea5(0x37d)] === 0x0)
    return console[_0x21aea5(0x413)](_0x21aea5(0x47d)), null;
  const _0x334139 = _0x25d1a2[0x0]?.[_0x21aea5(0x210)] || "";
  console[_0x21aea5(0x413)](_0x21aea5(0x24c), _0x334139);
  const _0x4d834b = [
    /\b(\d{13})\b/g,
    /\b(\d{12})\b/g,
    /\b(\d{8})\b/g,
    /\b(\d{6,8})\b/g,
    /\b([A-Z0-9\-]{4,20})\b/g,
  ];
  for (const _0x1ce6b2 of _0x4d834b) {
    const _0x2a4fec = [..._0x334139["matchAll"](_0x1ce6b2)];
    for (const _0x427a52 of _0x2a4fec) {
      const _0x22f027 = _0x427a52[0x1][_0x21aea5(0x255)]();
      console[_0x21aea5(0x413)](_0x21aea5(0x2ca) + _0x22f027);
      if (validarCodigoPorLongitud(_0x22f027))
        return (
          console["log"](
            "✅\x20Código\x20válido\x20seleccionado:\x20" + _0x22f027
          ),
          _0x22f027
        );
    }
  }
  return console[_0x21aea5(0x413)](_0x21aea5(0x44e)), null;
}
function validarCodigoPorLongitud(_0x4d4637) {
  const _0x4b1755 = _0x765170;
  if (/^\d{13}$/[_0x4b1755(0x26e)](_0x4d4637)) return !![];
  if (/^\d{12}$/[_0x4b1755(0x26e)](_0x4d4637)) return !![];
  if (/^\d{8}$/[_0x4b1755(0x26e)](_0x4d4637)) return !![];
  if (/^\d{6,8}$/[_0x4b1755(0x26e)](_0x4d4637)) return !![];
  if (
    /^[A-Z0-9\-]{4,20}$/["test"](_0x4d4637) &&
    _0x4d4637[_0x4b1755(0x37d)] >= 0x4
  )
    return !![];
  return ![];
}
async function diagnosticarBackend() {
  const _0x44ac29 = _0x765170;
  console[_0x44ac29(0x413)](_0x44ac29(0x1f8));
  const _0x159d73 = document[_0x44ac29(0x2ce)](_0x44ac29(0x39e));
  _0x159d73 && (_0x159d73[_0x44ac29(0x2ea)] = _0x44ac29(0x2b1));
  let _0x25cb90 = "";
  try {
    const _0x1b4ac6 = await fetch(_0x44ac29(0x2aa));
    if (_0x1b4ac6["ok"]) {
      console[_0x44ac29(0x413)](_0x44ac29(0x278));
      const _0x37f88a = await _0x1b4ac6[_0x44ac29(0x497)]();
      console[_0x44ac29(0x413)]("📊\x20Estadísticas:", _0x37f88a),
        (_0x25cb90 += _0x44ac29(0x2ec));
    } else
      console[_0x44ac29(0x413)](_0x44ac29(0x2c2), _0x1b4ac6[_0x44ac29(0x241)]),
        (_0x25cb90 +=
          "<div\x20class=\x22alert\x20alert-danger\x22>❌\x20Endpoint\x20/api/stats\x20falló:\x20" +
          _0x1b4ac6[_0x44ac29(0x241)] +
          "</div>");
    console[_0x44ac29(0x413)](_0x44ac29(0x24d));
    const _0x22285d = await fetch(_0x44ac29(0x388), {
        method: _0x44ac29(0x2cc),
        headers: { "Content-Type": _0x44ac29(0x33d) },
        body: JSON[_0x44ac29(0x2b3)]({
          image: _0x44ac29(0x1ff),
          userId: "diagnostic",
        }),
      }),
      _0x3ba9d1 = await _0x22285d[_0x44ac29(0x497)]();
    console[_0x44ac29(0x413)](_0x44ac29(0x382), _0x3ba9d1),
      console[_0x44ac29(0x413)](_0x44ac29(0x322), _0x22285d[_0x44ac29(0x241)]);
    if (_0x22285d["status"] === 0x1f4) {
      console[_0x44ac29(0x413)](
        "🔧\x20Error\x20500\x20detectado\x20-\x20Analizando\x20causa\x20específica:"
      );
      if (_0x3ba9d1[_0x44ac29(0x42d)]) {
        if (_0x3ba9d1["details"][_0x44ac29(0x37b)]("BILLING_DISABLED"))
          console[_0x44ac29(0x413)](_0x44ac29(0x384)),
            console[_0x44ac29(0x413)](_0x44ac29(0x306)),
            console[_0x44ac29(0x413)](_0x44ac29(0x45a)),
            (_0x25cb90 += _0x44ac29(0x3e5));
        else {
          if (_0x3ba9d1[_0x44ac29(0x42d)][_0x44ac29(0x37b)](_0x44ac29(0x2a0)))
            console["log"](_0x44ac29(0x48e)), (_0x25cb90 += _0x44ac29(0x38f));
          else
            _0x3ba9d1["details"][_0x44ac29(0x37b)](_0x44ac29(0x324))
              ? (console[_0x44ac29(0x413)](_0x44ac29(0x46a)),
                console[_0x44ac29(0x413)](_0x44ac29(0x209)),
                (_0x25cb90 +=
                  "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6>🚫\x20Vision\x20API\x20No\x20Habilitada</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>La\x20Vision\x20API\x20no\x20está\x20habilitada\x20en\x20tu\x20proyecto</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small><a\x20href=\x22https://console.cloud.google.com/apis/library/vision.googleapis.com\x22\x20target=\x22_blank\x22>Habilitar\x20Vision\x20API</a></small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20"))
              : (console[_0x44ac29(0x413)](
                  "❓\x20Error\x20desconocido\x20en\x20Google\x20Vision\x20API"
                ),
                console[_0x44ac29(0x413)](
                  _0x44ac29(0x420),
                  _0x3ba9d1[_0x44ac29(0x42d)]
                ),
                (_0x25cb90 += _0x44ac29(0x1ee)));
        }
      }
    } else
      _0x22285d[_0x44ac29(0x241)] === 0xc8 &&
        (console[_0x44ac29(0x413)](
          "🎉\x20¡Google\x20Vision\x20API\x20funcionando\x20correctamente!"
        ),
        (_0x25cb90 += _0x44ac29(0x37a)));
  } catch (_0x178dda) {
    console[_0x44ac29(0x413)](_0x44ac29(0x317), _0x178dda[_0x44ac29(0x48f)]),
      _0x178dda[_0x44ac29(0x48f)][_0x44ac29(0x37b)]("CORS")
        ? (console[_0x44ac29(0x413)](
            "🔧\x20Problema\x20de\x20CORS\x20-\x20verifica\x20configuración\x20de\x20headers"
          ),
          (_0x25cb90 += _0x44ac29(0x2f5)))
        : (_0x25cb90 +=
            _0x44ac29(0x328) + _0x178dda["message"] + _0x44ac29(0x289));
  }
  _0x159d73 && (_0x159d73[_0x44ac29(0x2ea)] = _0x25cb90);
}
async function verificarBackend() {
  const _0x14ab0c = _0x765170;
  try {
    const _0x4c3426 = await fetch(_0x14ab0c(0x2aa), {
      method: _0x14ab0c(0x42e),
      headers: { "Content-Type": _0x14ab0c(0x33d) },
    });
    if (_0x4c3426["ok"]) {
      const _0x3d3d99 = await _0x4c3426[_0x14ab0c(0x497)]();
      return (
        console[_0x14ab0c(0x413)](
          "✅\x20Backend\x20activo.\x20Estadísticas:",
          _0x3d3d99
        ),
        { activo: !![], stats: _0x3d3d99, mensaje: _0x14ab0c(0x32d) }
      );
    } else
      return (
        console[_0x14ab0c(0x413)](
          _0x14ab0c(0x22b),
          _0x4c3426[_0x14ab0c(0x241)]
        ),
        { activo: ![], mensaje: _0x14ab0c(0x1f0) + _0x4c3426["status"] }
      );
  } catch (_0x19bcc7) {
    return (
      console[_0x14ab0c(0x413)](_0x14ab0c(0x2bb), _0x19bcc7["message"]),
      { activo: ![], mensaje: _0x14ab0c(0x499) }
    );
  }
}
async function mostrarEstadisticasUso() {
  const _0x236ec3 = _0x765170,
    _0x17331d = visionUsageTracker[_0x236ec3(0x3ad)](),
    _0xd064b2 = visionUsageTracker["showUsageWarning"]();
  let _0x3d7564 = _0x236ec3(0x353);
  (_0x3d7564 +=
    _0x236ec3(0x3ff) +
    _0x17331d[_0x236ec3(0x433)] +
    "/" +
    _0x17331d["monthlyLimit"] +
    _0x236ec3(0x354) +
    _0x17331d["remainingMonthly"] +
    _0x236ec3(0x3c0)),
    (_0x3d7564 +=
      "•\x20Diario:\x20" +
      _0x17331d[_0x236ec3(0x326)] +
      "/" +
      _0x17331d["dailyLimit"] +
      _0x236ec3(0x354) +
      _0x17331d["remainingDaily"] +
      ")");
  _0xd064b2 && (_0x3d7564 += _0x236ec3(0x407) + _0xd064b2);
  if (GOOGLE_VISION_CONFIG[_0x236ec3(0x344)])
    try {
      const _0x2265d6 = await verificarBackend();
      _0x3d7564 +=
        "<br><br>🌐\x20<strong>Backend:</strong>\x20" +
        _0x2265d6[_0x236ec3(0x2d1)];
    } catch (_0x2364e9) {
      _0x3d7564 += _0x236ec3(0x3e2);
    }
  return _0x3d7564;
}
function setCookie(_0x2ef8a3, _0x1cdf20, _0x497798) {
  const _0x5781a6 = _0x765170,
    _0x4534ad = new Date(
      Date["now"]() + _0x497798 * 0x18 * 0x3c * 0x3c * 0x3e8
    )[_0x5781a6(0x2e6)]();
  document["cookie"] =
    _0x2ef8a3 +
    "=" +
    encodeURIComponent(_0x1cdf20) +
    _0x5781a6(0x222) +
    _0x4534ad +
    ";\x20path=/";
}
function getCookie(_0x2c179f) {
  const _0x29b862 = _0x765170,
    _0x37d43b = ";\x20" + document["cookie"],
    _0x45f59d = _0x37d43b["split"](";\x20" + _0x2c179f + "=");
  if (_0x45f59d[_0x29b862(0x37d)] === 0x2)
    return decodeURIComponent(
      _0x45f59d[_0x29b862(0x464)]()["split"](";")["shift"]()
    );
  return null;
}
const historialDiv = document[_0x765170(0x2ce)]("historial"),
  resultadoDiv = document[_0x765170(0x2ce)](_0x765170(0x33e)),
  DB_NAME = _0x765170(0x268),
  DB_STORE = "productos",
  DB_STORE_PROMOCIONES = _0x765170(0x452);
let db;
function openDB() {
  return new Promise((_0x576d6a, _0xe3c95a) => {
    const _0x3eb72b = _0x3929,
      _0x3ad925 = indexedDB[_0x3eb72b(0x3ea)](DB_NAME, 0x2);
    (_0x3ad925["onupgradeneeded"] = function (_0x535868) {
      const _0x579e94 = _0x3eb72b;
      (db = _0x535868["target"][_0x579e94(0x1fa)]),
        !db["objectStoreNames"][_0x579e94(0x330)](DB_STORE) &&
          db[_0x579e94(0x3e8)](DB_STORE, {
            keyPath: "id",
            autoIncrement: !![],
          }),
        !db[_0x579e94(0x26a)][_0x579e94(0x330)](DB_STORE_PROMOCIONES) &&
          db[_0x579e94(0x3e8)](DB_STORE_PROMOCIONES, {
            keyPath: "id",
            autoIncrement: !![],
          });
    }),
      (_0x3ad925[_0x3eb72b(0x4a3)] = function (_0x50caf0) {
        const _0x3490f5 = _0x3eb72b;
        (db = _0x50caf0[_0x3490f5(0x2a7)]["result"]), _0x576d6a(db);
      }),
      (_0x3ad925[_0x3eb72b(0x472)] = function (_0x45781f) {
        _0xe3c95a(_0x45781f);
      });
  });
}
function clearProductos() {
  return openDB()["then"]((_0x5e1025) => {
    return new Promise((_0x463ffa, _0x26306a) => {
      const _0x54b5a6 = _0x3929,
        _0x2d6e3f = _0x5e1025[_0x54b5a6(0x471)](DB_STORE, _0x54b5a6(0x1ea));
      _0x2d6e3f[_0x54b5a6(0x47b)](DB_STORE)[_0x54b5a6(0x3d2)](),
        (_0x2d6e3f[_0x54b5a6(0x36d)] = _0x463ffa),
        (_0x2d6e3f[_0x54b5a6(0x472)] = _0x26306a);
    });
  });
}
function saveProductos(_0x3cd4a6) {
  const _0x31e31a = _0x765170;
  return openDB()[_0x31e31a(0x461)]((_0x24a290) => {
    return new Promise((_0x3ec5b4, _0x6fa4da) => {
      const _0x24cf1c = _0x3929,
        _0x21e31a = _0x24a290[_0x24cf1c(0x471)](DB_STORE, _0x24cf1c(0x1ea)),
        _0x4aa89e = _0x21e31a[_0x24cf1c(0x47b)](DB_STORE);
      _0x3cd4a6[_0x24cf1c(0x392)]((_0x5f166b) => _0x4aa89e["add"](_0x5f166b)),
        (_0x21e31a[_0x24cf1c(0x36d)] = _0x3ec5b4),
        (_0x21e31a[_0x24cf1c(0x472)] = _0x6fa4da);
    });
  });
}
function getAllProductos() {
  const _0x2f8852 = _0x765170;
  return openDB()[_0x2f8852(0x461)]((_0x542637) => {
    return new Promise((_0x1f4d6b, _0x4fd74e) => {
      const _0x39156b = _0x3929,
        _0x4b6b3d = _0x542637["transaction"](DB_STORE, "readonly"),
        _0x3150b7 = _0x4b6b3d[_0x39156b(0x47b)](DB_STORE),
        _0x3dec00 = _0x3150b7[_0x39156b(0x3da)]();
      (_0x3dec00[_0x39156b(0x4a3)] = () => _0x1f4d6b(_0x3dec00["result"])),
        (_0x3dec00["onerror"] = _0x4fd74e);
    });
  });
}
function clearPromociones() {
  const _0x18038e = _0x765170;
  return openDB()[_0x18038e(0x461)]((_0x1a971a) => {
    return new Promise((_0x50f083, _0x419479) => {
      const _0x4c31cd = _0x3929,
        _0xd789a2 = _0x1a971a["transaction"](
          DB_STORE_PROMOCIONES,
          _0x4c31cd(0x1ea)
        );
      _0xd789a2[_0x4c31cd(0x47b)](DB_STORE_PROMOCIONES)[_0x4c31cd(0x3d2)](),
        (_0xd789a2["oncomplete"] = _0x50f083),
        (_0xd789a2["onerror"] = _0x419479);
    });
  });
}
function savePromociones(_0x45c822) {
  const _0x5f3398 = _0x765170;
  return openDB()[_0x5f3398(0x461)]((_0x46bb04) => {
    return new Promise((_0x2af7ab, _0x185691) => {
      const _0x19872c = _0x3929,
        _0x528cfe = _0x46bb04[_0x19872c(0x471)](
          DB_STORE_PROMOCIONES,
          _0x19872c(0x1ea)
        ),
        _0x451762 = _0x528cfe["objectStore"](DB_STORE_PROMOCIONES);
      _0x45c822[_0x19872c(0x392)]((_0x439eab) =>
        _0x451762[_0x19872c(0x235)](_0x439eab)
      ),
        (_0x528cfe["oncomplete"] = _0x2af7ab),
        (_0x528cfe["onerror"] = _0x185691);
    });
  });
}
function getAllPromociones() {
  return openDB()["then"]((_0xea46cf) => {
    return new Promise((_0x2c33dd, _0x3422b5) => {
      const _0xff148a = _0x3929,
        _0x5511f1 = _0xea46cf[_0xff148a(0x471)](
          DB_STORE_PROMOCIONES,
          _0xff148a(0x4b4)
        ),
        _0x37fff8 = _0x5511f1[_0xff148a(0x47b)](DB_STORE_PROMOCIONES),
        _0x2329d4 = _0x37fff8[_0xff148a(0x3da)]();
      (_0x2329d4["onsuccess"] = () => _0x2c33dd(_0x2329d4[_0xff148a(0x1fa)])),
        (_0x2329d4[_0xff148a(0x472)] = _0x3422b5);
    });
  });
}
const sugerenciasDiv = document[_0x765170(0x47a)](_0x765170(0x374));
(sugerenciasDiv["id"] = _0x765170(0x217)),
  (sugerenciasDiv[_0x765170(0x42a)] = _0x765170(0x1f4)),
  (sugerenciasDiv[_0x765170(0x265)]["zIndex"] = _0x765170(0x2f7)),
  (sugerenciasDiv[_0x765170(0x265)][_0x765170(0x468)] = "200px"),
  (sugerenciasDiv[_0x765170(0x265)][_0x765170(0x295)] = _0x765170(0x3d6)),
  (sugerenciasDiv[_0x765170(0x265)][_0x765170(0x40f)] = _0x765170(0x37f)),
  (sugerenciasDiv["style"][_0x765170(0x234)] = "0"),
  (sugerenciasDiv[_0x765170(0x265)][_0x765170(0x453)] = "0"),
  (inputCodigo[_0x765170(0x2e7)][_0x765170(0x265)][_0x765170(0x2ae)] =
    "relative"),
  inputCodigo[_0x765170(0x2e7)][_0x765170(0x3a2)](sugerenciasDiv);
const actualizarDiv = document[_0x765170(0x47a)](_0x765170(0x374));
(actualizarDiv[_0x765170(0x42a)] =
  "d-flex\x20flex-column\x20align-items-center\x20mb-3"),
  (actualizarDiv[_0x765170(0x2ea)] = _0x765170(0x325)),
  historialDiv[_0x765170(0x2e7)][_0x765170(0x475)](actualizarDiv, historialDiv);
function _0x3929(_0xd00171, _0x48888a) {
  const _0x121ee0 = _0x121e();
  return (
    (_0x3929 = function (_0x3929bf, _0x2c908a) {
      _0x3929bf = _0x3929bf - 0x1e9;
      let _0xec03bf = _0x121ee0[_0x3929bf];
      return _0xec03bf;
    }),
    _0x3929(_0xd00171, _0x48888a)
  );
}
const btnActualizar = actualizarDiv[_0x765170(0x39b)](_0x765170(0x31e)),
  btnPromociones = actualizarDiv[_0x765170(0x39b)](_0x765170(0x491)),
  ultimaActualizacionSpan = actualizarDiv[_0x765170(0x39b)](_0x765170(0x310)),
  btnTexto = actualizarDiv[_0x765170(0x39b)](_0x765170(0x3d8)),
  btnSpinner = actualizarDiv[_0x765170(0x39b)](_0x765170(0x281)),
  mensajeActualizacion = actualizarDiv[_0x765170(0x39b)](_0x765170(0x42f));
async function mostrarProductosConPromociones() {
  const _0x42da78 = _0x765170,
    _0x5d1c7a = await getAllProductos(),
    _0x94294 = [];
  for (const _0x902859 of _0x5d1c7a) {
    try {
      const _0x22bc25 = await detectarPromocionReal(_0x902859);
      _0x22bc25[_0x42da78(0x37d)] > 0x0 &&
        _0x94294[_0x42da78(0x424)](_0x902859);
    } catch (_0x4b5486) {
      console["warn"](
        _0x42da78(0x486) + _0x902859[_0x42da78(0x3e7)] + ":",
        _0x4b5486
      );
    }
  }
  if (_0x94294[_0x42da78(0x37d)] === 0x0) {
    (resultadoDiv[_0x42da78(0x2ea)] = _0x42da78(0x298)), renderHistorial();
    return;
  }
  const _0x3b1535 = [];
  for (const _0x2bedb7 of _0x94294[_0x42da78(0x2c4)](0x0, 0x14)) {
    try {
      const _0x593bb7 = await detectarPromocionReal(_0x2bedb7),
        _0x437372 =
          Number(_0x2bedb7[_0x42da78(0x279)]) || Number(_0x2bedb7["L1"]) || 0x0,
        _0x5d145e = Math["round"](_0x437372 * 1.16 * 0x64) / 0x64,
        _0x11f539 = _0x593bb7[_0x42da78(0x231)]((_0x313024) => {
          const _0x21d51b = _0x42da78;
          let _0xb36c97 = _0x21d51b(0x24e),
            _0x3a7e8a =
              _0x313024["detalle"] ||
              _0x313024["nombre_promocion"] ||
              _0x21d51b(0x201);
          if (_0x313024[_0x21d51b(0x28a)]["includes"]("precio\x20especial"))
            (_0xb36c97 = _0x21d51b(0x4aa)),
              (_0x3a7e8a = _0x21d51b(0x389) + _0x3a7e8a);
          else
            _0x313024[_0x21d51b(0x361)] &&
              ((_0xb36c97 = _0x21d51b(0x291)),
              (_0x3a7e8a = _0x21d51b(0x2d2) + _0x3a7e8a));
          return (
            _0x21d51b(0x29b) +
            _0xb36c97 +
            "\x20me-1\x20mb-1\x22\x20style=\x22font-size:0.75rem;\x22>" +
            _0x3a7e8a +
            "</span>"
          );
        })[_0x42da78(0x36e)]("");
      _0x3b1535[_0x42da78(0x424)](
        _0x42da78(0x232) +
          _0x2bedb7[_0x42da78(0x3e7)] +
          _0x42da78(0x2f4) +
          _0x2bedb7[_0x42da78(0x220)] +
          "\x22>" +
          _0x2bedb7[_0x42da78(0x220)] +
          _0x42da78(0x431) +
          _0x11f539 +
          "</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22d-flex\x20justify-content-between\x20align-items-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-success\x20fw-bold\x22>$" +
          _0x5d145e[_0x42da78(0x3ae)](0x2) +
          _0x42da78(0x308) +
          _0x2bedb7[_0x42da78(0x3e7)] +
          "</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20"
      );
    } catch (_0x34d938) {
      console[_0x42da78(0x371)](
        _0x42da78(0x442) + _0x2bedb7[_0x42da78(0x3e7)] + ":",
        _0x34d938
      );
    }
  }
  (resultadoDiv["innerHTML"] =
    _0x42da78(0x223) +
    _0x94294["length"] +
    "\x20encontrados</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-warning\x20text-center\x20mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<small><strong>⚠️\x20Las\x20promociones\x20solo\x20aplican\x20pagando\x20de\x20contado</strong></small>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20" +
    _0x3b1535["join"]("") +
    _0x42da78(0x261) +
    (_0x94294[_0x42da78(0x37d)] > 0x14
      ? _0x42da78(0x40e) +
        (_0x94294[_0x42da78(0x37d)] - 0x14) +
        _0x42da78(0x38a)
      : "") +
    _0x42da78(0x4a7)),
    renderHistorial();
}
window[_0x765170(0x262)] = async function (_0x11088b) {
  const _0x4ce3a7 = _0x765170,
    _0x44e53c = await getAllProductos(),
    _0x425f26 = _0x44e53c[_0x4ce3a7(0x459)](
      (_0x3ec434) =>
        _0x3ec434["pr_sku"] === _0x11088b || _0x3ec434["pr_gtin"] === _0x11088b
    );
  if (_0x425f26) {
    mostrarDetalleProducto(_0x425f26);
    const _0x2faf3c = {
      ..._0x425f26,
      FECHA_ESCANEO: new Date()[_0x4ce3a7(0x211)](),
    };
    historial[_0x4ce3a7(0x48d)](_0x2faf3c),
      setCookie(_0x4ce3a7(0x2fd), JSON[_0x4ce3a7(0x2b3)](historial), 0x1e),
      renderHistorial();
  }
};
const urlBase = _0x765170(0x377),
  urlBaseConCodigos = _0x765170(0x20d),
  urlPromociones = "https://verificadorb9-backend.vercel.app/api/promociones",
  CONFIG_ENDPOINTS = {
    productosBasicos: urlBase,
    productosConCodigos: urlBaseConCodigos,
    promociones: urlPromociones,
    usarCodigosBarras: !![],
    fallbackTiempo: 0x1388,
  };
function tiempoRelativo(_0x3de206) {
  const _0x1666a7 = _0x765170;
  if (!_0x3de206) return _0x1666a7(0x25f);
  const _0x2139d1 = Date[_0x1666a7(0x2b0)](),
    _0x8185a3 = Math["floor"]((_0x2139d1 - _0x3de206) / 0x3e8);
  if (_0x8185a3 < 0x3c) return "Hace\x20" + _0x8185a3 + _0x1666a7(0x2a8);
  if (_0x8185a3 < 0xe10)
    return "Hace\x20" + Math["floor"](_0x8185a3 / 0x3c) + _0x1666a7(0x260);
  if (_0x8185a3 < 0x15180)
    return (
      _0x1666a7(0x409) + Math["floor"](_0x8185a3 / 0xe10) + _0x1666a7(0x3a0)
    );
  return (
    _0x1666a7(0x409) +
    Math[_0x1666a7(0x203)](_0x8185a3 / 0x15180) +
    _0x1666a7(0x44f)
  );
}
function renderUltimaActualizacion() {
  const _0x3abd05 = _0x765170,
    _0x55fdef = localStorage[_0x3abd05(0x341)]("productos_ts"),
    _0x1e83a8 = localStorage[_0x3abd05(0x341)]("promociones_ts");
  let _0x36d229 = _0x3abd05(0x297);
  if (_0x55fdef && _0x1e83a8) {
    const _0x395e56 = tiempoRelativo(Number(_0x55fdef)),
      _0x586710 = tiempoRelativo(Number(_0x1e83a8)),
      _0x11a2c3 = Math["abs"](Number(_0x55fdef) - Number(_0x1e83a8));
    _0x11a2c3 < 0xea60
      ? (_0x36d229 = _0x3abd05(0x1fc) + _0x395e56)
      : (_0x36d229 =
          "Productos:\x20" + _0x395e56 + _0x3abd05(0x32b) + _0x586710);
  } else {
    if (_0x55fdef)
      _0x36d229 =
        "Productos:\x20" + tiempoRelativo(Number(_0x55fdef)) + _0x3abd05(0x3c4);
    else
      _0x1e83a8 &&
        (_0x36d229 = _0x3abd05(0x3d5) + tiempoRelativo(Number(_0x1e83a8)));
  }
  ultimaActualizacionSpan[_0x3abd05(0x49e)] = _0x36d229;
}
function actualizarProgreso(_0x4e5323, _0x4234c4, _0x248e86 = "") {
  const _0x2866a6 = _0x765170,
    _0x3ac43a = Math[_0x2866a6(0x356)](
      0x64,
      Math[_0x2866a6(0x267)](0x0, _0x4e5323)
    ),
    _0x149620 =
      _0x4e5323 >= 0x64
        ? _0x2866a6(0x292)
        : _0x4e5323 >= 0x32
        ? _0x2866a6(0x46c)
        : "primary";
  mensajeActualizacion[_0x2866a6(0x2ea)] =
    _0x2866a6(0x202) +
    _0x4234c4 +
    _0x2866a6(0x376) +
    _0x4e5323 +
    _0x2866a6(0x1fe) +
    _0x149620 +
    "\x22\x20role=\x22progressbar\x22\x20style=\x22width:\x20" +
    _0x3ac43a +
    _0x2866a6(0x303) +
    _0x4e5323 +
    "\x22\x20aria-valuemin=\x220\x22\x20aria-valuemax=\x22100\x22></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20" +
    (_0x248e86 ? _0x2866a6(0x440) + _0x248e86 + _0x2866a6(0x2b4) : "") +
    _0x2866a6(0x4a7);
}
async function actualizarTodosLosDatos() {
  const _0x47eb69 = _0x765170;
  console["log"]("🚀\x20Iniciando\x20actualización\x20con\x20progreso..."),
    (btnActualizar[_0x47eb69(0x44d)] = !![]),
    (btnTexto["textContent"] = _0x47eb69(0x337)),
    btnSpinner["classList"][_0x47eb69(0x256)]("d-none");
  const _0x1d1917 = Date[_0x47eb69(0x2b0)]();
  let _0x133093 = ![],
    _0x230605 = ![];
  const _0xd7fd1 = () => {
    const _0x508804 = _0x47eb69;
    let _0x308790 = 0x0,
      _0x350f5f = _0x508804(0x30e),
      _0x3f5a83 = "";
    if (!_0x133093 && !_0x230605)
      (_0x308790 = 0xa),
        (_0x350f5f = _0x508804(0x3f9)),
        (_0x3f5a83 = _0x508804(0x411));
    else {
      if (_0x133093 && !_0x230605)
        (_0x308790 = 0x46),
          (_0x350f5f = _0x508804(0x48a)),
          (_0x3f5a83 = "Cargando\x20promociones");
      else {
        if (!_0x133093 && _0x230605)
          (_0x308790 = 0x46),
            (_0x350f5f = _0x508804(0x343)),
            (_0x3f5a83 = _0x508804(0x3c2));
        else {
          _0x308790 = 0x64;
          const _0x5d6d8b = ((Date[_0x508804(0x2b0)]() - _0x1d1917) / 0x3e8)[
            _0x508804(0x3ae)
          ](0x1);
          (_0x350f5f = "✅\x20Los\x203\x20endpoints\x20consultados"),
            (_0x3f5a83 = _0x508804(0x43a) + _0x5d6d8b + _0x508804(0x2a8));
        }
      }
    }
    actualizarProgreso(_0x308790, _0x350f5f, _0x3f5a83);
  };
  _0xd7fd1();
  try {
    await new Promise((_0x5add68) => setTimeout(_0x5add68, 0xc8)),
      actualizarProgreso(
        0x19,
        _0x47eb69(0x4b2),
        "Conectando\x20con\x20todos\x20los\x20servidores"
      );
    const _0x7a4b63 = cargarProductosRapido()["then"]((_0x1df46a) => {
        return (_0x133093 = !![]), _0xd7fd1(), _0x1df46a;
      }),
      _0x2bd2e8 = cargarPromocionesRapido()[_0x47eb69(0x461)]((_0xe81f8d) => {
        return (_0x230605 = !![]), _0xd7fd1(), _0xe81f8d;
      });
    setTimeout(() => {
      const _0x21b514 = _0x47eb69;
      (!_0x133093 || !_0x230605) &&
        actualizarProgreso(
          0x32,
          "Descargando\x20desde\x20múltiples\x20endpoints...",
          _0x21b514(0x338)
        );
    }, 0x3e8);
    const [_0x3e1b0b, _0x2170ae] = await Promise[_0x47eb69(0x401)]([
        _0x7a4b63,
        _0x2bd2e8,
      ]),
      _0x13337c = ((Date["now"]() - _0x1d1917) / 0x3e8)["toFixed"](0x1);
    console["log"](_0x47eb69(0x369) + _0x13337c + "s");
    const _0x5a340c = _0x3e1b0b[_0x47eb69(0x241)] === _0x47eb69(0x39d),
      _0x2aa895 = _0x2170ae[_0x47eb69(0x241)] === _0x47eb69(0x39d);
    if (_0x5a340c && _0x2aa895) {
      const _0x4fd45b = _0x3e1b0b["value"]?.[_0x47eb69(0x428)] || 0x0,
        _0x14e538 = _0x2170ae[_0x47eb69(0x2c5)]?.[_0x47eb69(0x452)] || 0x0,
        _0x3a4e71 = _0x3e1b0b["value"]?.["detalles"] || "",
        _0x2bb3ed = _0x2170ae[_0x47eb69(0x2c5)]?.[_0x47eb69(0x311)] || "";
      actualizarProgreso(
        0x64,
        _0x47eb69(0x467),
        _0x4fd45b +
          _0x47eb69(0x3c6) +
          _0x3a4e71 +
          _0x47eb69(0x3b2) +
          _0x14e538 +
          _0x47eb69(0x21f) +
          _0x2bb3ed +
          ")\x20-\x20" +
          _0x13337c +
          "s"
      );
    } else
      _0x5a340c || _0x2aa895
        ? actualizarProgreso(
            0x4b,
            _0x47eb69(0x399),
            _0x47eb69(0x2d3) + _0x13337c + "s)"
          )
        : actualizarProgreso(
            0x19,
            _0x47eb69(0x421),
            "Todos\x20los\x20endpoints\x20fallaron\x20(" + _0x13337c + "s)"
          );
    _0x3e1b0b[_0x47eb69(0x241)] === _0x47eb69(0x451) &&
      console[_0x47eb69(0x258)](
        "Error\x20al\x20cargar\x20productos:",
        _0x3e1b0b["reason"]
      ),
      _0x2170ae[_0x47eb69(0x241)] === _0x47eb69(0x451) &&
        console[_0x47eb69(0x258)](_0x47eb69(0x3b9), _0x2170ae["reason"]);
  } catch (_0x2d1a63) {
    console[_0x47eb69(0x258)](_0x47eb69(0x2ef), _0x2d1a63),
      actualizarProgreso(
        0x0,
        "❌\x20Error\x20de\x20conexión",
        _0x47eb69(0x3a3)
      );
  } finally {
    (btnActualizar[_0x47eb69(0x44d)] = ![]),
      (btnTexto[_0x47eb69(0x49e)] = _0x47eb69(0x3af)),
      btnSpinner[_0x47eb69(0x2f0)][_0x47eb69(0x235)](_0x47eb69(0x49f)),
      setTimeout(() => {
        (mensajeActualizacion["textContent"] = ""), renderUltimaActualizacion();
      }, 0xfa0);
  }
}
async function cargarProductosRapido() {
  const _0x4a132d = _0x765170,
    _0x203b47 = Date["now"]();
  if (!navigator["onLine"]) throw new Error(_0x4a132d(0x214));
  let _0x59b5c4 = [],
    _0x33e2c9 = [];
  console["log"](_0x4a132d(0x3bd));
  if (CONFIG_ENDPOINTS["usarCodigosBarras"])
    try {
      const _0x583b21 = CONFIG_ENDPOINTS[_0x4a132d(0x2a6)] + "?t=" + _0x203b47;
      console["log"](_0x4a132d(0x3f7));
      const _0x47d16e = await Promise[_0x4a132d(0x43e)]([
        fetch(_0x583b21, {
          cache: "no-store",
          mode: "cors",
          headers: {
            Accept: _0x4a132d(0x33d),
            "Content-Type": _0x4a132d(0x33d),
          },
        }),
        new Promise((_0x3885f4, _0x29dcfa) =>
          setTimeout(
            () => _0x29dcfa(new Error(_0x4a132d(0x484))),
            CONFIG_ENDPOINTS[_0x4a132d(0x3f6)]
          )
        ),
      ]);
      if (_0x47d16e["ok"]) {
        const _0x2f0cd4 = await _0x47d16e[_0x4a132d(0x497)]();
        _0x2f0cd4[_0x4a132d(0x292)] && _0x2f0cd4[_0x4a132d(0x428)]
          ? ((_0x59b5c4 = _0x2f0cd4[_0x4a132d(0x428)]),
            _0x33e2c9[_0x4a132d(0x424)]("códigos\x20de\x20barras\x20✅"),
            console[_0x4a132d(0x413)](
              _0x4a132d(0x320),
              _0x2f0cd4[_0x4a132d(0x428)]["length"]
            ))
          : _0x33e2c9["push"](
              "códigos\x20de\x20barras\x20⚠️\x20(sin\x20datos)"
            );
      } else
        _0x33e2c9[_0x4a132d(0x424)](
          _0x4a132d(0x372) + _0x47d16e[_0x4a132d(0x241)] + ")"
        );
    } catch (_0x203d77) {
      console[_0x4a132d(0x371)](_0x4a132d(0x42c), _0x203d77[_0x4a132d(0x48f)]),
        _0x203d77["message"]["includes"](_0x4a132d(0x207)) ||
        _0x203d77[_0x4a132d(0x48f)][_0x4a132d(0x37b)](_0x4a132d(0x477))
          ? (_0x33e2c9[_0x4a132d(0x424)](_0x4a132d(0x331)),
            console[_0x4a132d(0x413)](_0x4a132d(0x2f6)))
          : _0x33e2c9[_0x4a132d(0x424)](_0x4a132d(0x479));
    }
  try {
    const _0xdb085a =
      CONFIG_ENDPOINTS["productosBasicos"] + _0x4a132d(0x294) + _0x203b47;
    console[_0x4a132d(0x413)](_0x4a132d(0x31c));
    const _0x17050a = await fetch(_0xdb085a, { cache: _0x4a132d(0x2d0) });
    if (_0x17050a["ok"]) {
      const _0x2f1bfb = await _0x17050a["json"](),
        _0x4afb6b = Array[_0x4a132d(0x263)](_0x2f1bfb) ? _0x2f1bfb : [];
      _0x59b5c4[_0x4a132d(0x37d)] === 0x0 &&
        _0x4afb6b["length"] > 0x0 &&
        (_0x59b5c4 = _0x4afb6b),
        _0x33e2c9[_0x4a132d(0x424)]("básico\x20✅"),
        console[_0x4a132d(0x413)](
          _0x4a132d(0x419),
          _0x4afb6b["length"],
          "productos"
        );
    } else _0x33e2c9[_0x4a132d(0x424)]("básico\x20❌\x20(error\x20HTTP)");
  } catch (_0x5714ef) {
    console["warn"](_0x4a132d(0x3a5), _0x5714ef[_0x4a132d(0x48f)]),
      _0x33e2c9["push"](_0x4a132d(0x2ac));
  }
  if (_0x59b5c4["length"] === 0x0) throw new Error(_0x4a132d(0x27f));
  return (
    await clearProductos(),
    await saveProductos(_0x59b5c4),
    localStorage[_0x4a132d(0x266)](_0x4a132d(0x284), String(_0x203b47)),
    console[_0x4a132d(0x413)](
      "📊\x20Resumen\x20endpoints\x20productos:",
      _0x33e2c9[_0x4a132d(0x36e)](",\x20")
    ),
    {
      productos: _0x59b5c4[_0x4a132d(0x37d)],
      endpoints: _0x33e2c9,
      detalles: _0x33e2c9["length"] + _0x4a132d(0x2c8),
    }
  );
}
async function cargarPromocionesRapido() {
  const _0x306e77 = _0x765170;
  console[_0x306e77(0x413)](
    "🔄\x20Consultando\x20endpoint\x20de\x20promociones..."
  );
  const _0x19746d = await fetch(CONFIG_ENDPOINTS[_0x306e77(0x452)], {
    cache: _0x306e77(0x2d0),
    headers: { Accept: _0x306e77(0x33d), "Content-Type": _0x306e77(0x33d) },
  });
  if (!_0x19746d["ok"])
    throw new Error(_0x306e77(0x485) + _0x19746d[_0x306e77(0x241)]);
  const _0x21eb1a = await _0x19746d[_0x306e77(0x497)]();
  if (
    _0x21eb1a["success"] &&
    _0x21eb1a["data"] &&
    _0x21eb1a[_0x306e77(0x3b3)]["promociones"]
  ) {
    const _0xe5f161 = _0x21eb1a[_0x306e77(0x3b3)]["promociones"];
    console["log"](
      _0x306e77(0x35b) + _0xe5f161[_0x306e77(0x37d)] + _0x306e77(0x2d9)
    );
    try {
      await clearPromociones(), await savePromociones(_0xe5f161);
      const _0x48977e = Date[_0x306e77(0x2b0)]();
      localStorage[_0x306e77(0x266)](_0x306e77(0x312), String(_0x48977e)),
        console[_0x306e77(0x413)](_0x306e77(0x350));
    } catch (_0x17a5fd) {
      console["error"](_0x306e77(0x450), _0x17a5fd);
    }
    return {
      promociones: _0xe5f161[_0x306e77(0x37d)],
      detalles: _0x306e77(0x23b),
    };
  } else throw new Error(_0x306e77(0x244));
}
btnActualizar[_0x765170(0x41e)](_0x765170(0x228), actualizarTodosLosDatos),
  btnPromociones[_0x765170(0x41e)]("click", mostrarModalPromocionesGenerales),
  renderUltimaActualizacion(),
  setInterval(renderUltimaActualizacion, 0xea60),
  openDB()[_0x765170(0x461)](async (_0x3df03b) => {
    const _0x2cc6c3 = _0x765170,
      _0x272821 = _0x3df03b[_0x2cc6c3(0x471)](DB_STORE, "readonly"),
      _0x2509e2 = _0x272821[_0x2cc6c3(0x47b)](DB_STORE),
      _0x4fabfa = _0x2509e2[_0x2cc6c3(0x454)](),
      _0x2dd7d5 = _0x3df03b[_0x2cc6c3(0x471)](
        DB_STORE_PROMOCIONES,
        _0x2cc6c3(0x4b4)
      ),
      _0x4cec2a = _0x2dd7d5[_0x2cc6c3(0x47b)](DB_STORE_PROMOCIONES),
      _0x4b11df = _0x4cec2a[_0x2cc6c3(0x454)]();
    Promise[_0x2cc6c3(0x45b)]([
      new Promise((_0x3c417f) => {
        const _0x2915ec = _0x2cc6c3;
        _0x4fabfa[_0x2915ec(0x4a3)] = () =>
          _0x3c417f(_0x4fabfa[_0x2915ec(0x1fa)]);
      }),
      new Promise((_0x5dcc9b) => {
        const _0x53dcaf = _0x2cc6c3;
        _0x4b11df[_0x53dcaf(0x4a3)] = () =>
          _0x5dcc9b(_0x4b11df[_0x53dcaf(0x1fa)]);
      }),
    ])
      [_0x2cc6c3(0x461)](([_0x5a13d9, _0x18712c]) => {
        const _0x3a3088 = _0x2cc6c3,
          _0x88dc8a = _0x5a13d9 > 0x0,
          _0x455bf5 = _0x18712c > 0x0;
        if (!_0x88dc8a && !_0x455bf5)
          console[_0x3a3088(0x413)](_0x3a3088(0x410)),
            actualizarTodosLosDatos();
        else {
          if (!_0x88dc8a)
            console["log"](_0x3a3088(0x348)), actualizarTodosLosDatos();
          else
            !_0x455bf5 && !datosYaCargados
              ? (console[_0x3a3088(0x413)](
                  "🔄\x20Productos\x20existentes:\x20cargando\x20solo\x20promociones..."
                ),
                cargarPromocionesRapido())
              : console[_0x3a3088(0x413)](
                  _0x3a3088(0x483),
                  _0x5a13d9,
                  _0x3a3088(0x3e4),
                  _0x18712c
                );
        }
        datosYaCargados = !![];
      })
      [_0x2cc6c3(0x21b)]((_0x24fc78) => {
        const _0x4a030a = _0x2cc6c3;
        console[_0x4a030a(0x258)](_0x4a030a(0x226), _0x24fc78),
          actualizarTodosLosDatos(),
          (datosYaCargados = !![]);
      });
  });
let historial = [];
const historialCookie = getCookie("historial");
if (historialCookie)
  try {
    historial = JSON[_0x765170(0x336)](historialCookie);
  } catch (_0x4c18b2) {
    historial = [];
  }
function renderClearButton() {
  const _0x8d27f0 = _0x765170;
  return _0x8d27f0(0x270);
}
function renderHistorial() {
  const _0x9e9f31 = _0x765170;
  (historialDiv[_0x9e9f31(0x2ea)] =
    _0x9e9f31(0x243) +
    (historial[_0x9e9f31(0x37d)] > 0x0 ? renderClearButton() : "") +
    _0x9e9f31(0x39c) +
    (historial["length"] === 0x0
      ? _0x9e9f31(0x460)
      : "<ul\x20class=\x22list-group\x20list-group-flush\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20" +
        historial[_0x9e9f31(0x231)]((_0x18c475) => {
          const _0x33d149 = _0x9e9f31,
            _0x2b2e72 =
              _0x18c475[_0x33d149(0x220)] ||
              _0x18c475["NOMBRE"] ||
              _0x33d149(0x24f),
            _0x1487f4 =
              _0x18c475[_0x33d149(0x3e7)] ||
              _0x18c475[_0x33d149(0x367)] ||
              _0x18c475[_0x33d149(0x3f1)] ||
              _0x18c475[_0x33d149(0x233)] ||
              _0x33d149(0x31d),
            _0x4b13d2 =
              _0x18c475[_0x33d149(0x279)] ||
              _0x18c475["L1"] ||
              _0x18c475[_0x33d149(0x283)] ||
              0x0,
            _0x13f20a = Math[_0x33d149(0x2d7)](_0x4b13d2 * 1.16 * 0x64) / 0x64,
            _0x54ecf9 = _0x18c475["FECHA_ESCANEO"]
              ? new Date(_0x18c475[_0x33d149(0x4a8)])[_0x33d149(0x408)]()
              : _0x33d149(0x4b3);
          return (
            _0x33d149(0x24a) +
            _0x2b2e72 +
            _0x33d149(0x2fe) +
            _0x2b2e72 +
            "\x22\x20style=\x22font-size:1.2rem;\x20color:#616161;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22bi\x20bi-clipboard\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22small\x20text-secondary\x20ms-md-2\x20d-flex\x20align-items-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SKU:\x20<strong\x20class=\x22ms-1\x22>" +
            _0x1487f4 +
            _0x33d149(0x489) +
            _0x1487f4 +
            _0x33d149(0x274) +
            _0x13f20a["toFixed"](0x2) +
            _0x33d149(0x33a) +
            _0x54ecf9 +
            "</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22ms-md-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-primary\x20btn-sm\x20consultar-historial-btn\x22\x20title=\x22Ver\x20detalles\x20completos\x22\x20data-sku=\x22" +
            _0x1487f4 +
            _0x33d149(0x321)
          );
        })[_0x9e9f31(0x36e)]("") +
        _0x9e9f31(0x3fa)) +
    _0x9e9f31(0x359)),
    setCookie(_0x9e9f31(0x2fd), JSON[_0x9e9f31(0x2b3)](historial), 0x1e);
  const _0x6e6800 = document[_0x9e9f31(0x2ce)](_0x9e9f31(0x3cf));
  _0x6e6800 &&
    _0x6e6800[_0x9e9f31(0x41e)](_0x9e9f31(0x228), () => {
      const _0x3341fd = _0x9e9f31;
      (historial = []),
        setCookie(_0x3341fd(0x2fd), JSON[_0x3341fd(0x2b3)](historial), 0x1e),
        renderHistorial();
    });
  const _0x3bc93d = historialDiv["querySelectorAll"](".copiar-btn");
  _0x3bc93d["forEach"]((_0x13b8b9) => {
    const _0x282eb1 = _0x9e9f31;
    _0x13b8b9[_0x282eb1(0x41e)]("click", function (_0x3d324d) {
      const _0x48dc8f = _0x282eb1,
        _0x4baf34 = _0x13b8b9[_0x48dc8f(0x280)](_0x48dc8f(0x2d5));
      navigator["clipboard"] &&
        navigator[_0x48dc8f(0x4b8)]["writeText"](_0x4baf34)["then"](() => {
          const _0x3a0274 = _0x48dc8f;
          (_0x13b8b9[_0x3a0274(0x2ea)] = _0x3a0274(0x3be)),
            setTimeout(() => {
              const _0x123c93 = _0x3a0274;
              _0x13b8b9["innerHTML"] = _0x123c93(0x2a4);
            }, 0x4b0);
        });
    });
  });
  const _0x49623d = historialDiv[_0x9e9f31(0x31b)](".consultar-historial-btn");
  _0x49623d[_0x9e9f31(0x392)]((_0x18f341) => {
    const _0x12d093 = _0x9e9f31;
    _0x18f341[_0x12d093(0x41e)](_0x12d093(0x228), function (_0x52ee15) {
      const _0x144cf2 = _0x12d093,
        _0x3af6c1 = _0x18f341[_0x144cf2(0x280)]("data-sku");
      consultarProductoDesdeHistorial(_0x3af6c1);
    });
  });
}
inputCodigo[_0x765170(0x41e)](_0x765170(0x33b), function (_0x5a5aee) {
  const _0x2d18ce = _0x765170;
  _0x5a5aee[_0x2d18ce(0x40b)] === "Enter" &&
    (_0x5a5aee[_0x2d18ce(0x481)](),
    form[_0x2d18ce(0x24b)](),
    setTimeout(() => {
      const _0x1f3bc3 = _0x2d18ce,
        _0x48228c = document[_0x1f3bc3(0x2ce)](_0x1f3bc3(0x33e));
      _0x48228c &&
        _0x48228c[_0x1f3bc3(0x439)]({
          behavior: _0x1f3bc3(0x45e),
          block: _0x1f3bc3(0x26f),
          inline: _0x1f3bc3(0x4a5),
        });
    }, 0x12c));
}),
  form[_0x765170(0x41e)](_0x765170(0x332), async (_0x457ceb) => {
    const _0x5692ee = _0x765170;
    _0x457ceb[_0x5692ee(0x481)]();
    let _0xeaa8a3 = inputCodigo["value"]
      [_0x5692ee(0x255)]()
      ["replace"](/\s+$/, "");
    (inputCodigo[_0x5692ee(0x2c5)] = _0xeaa8a3),
      (resultadoDiv[_0x5692ee(0x2ea)] = ""),
      setTimeout(() => {
        const _0x39bd12 = _0x5692ee,
          _0x138437 = document[_0x39bd12(0x2ce)]("resultado");
        _0x138437 &&
          _0x138437[_0x39bd12(0x439)]({
            behavior: "smooth",
            block: "start",
            inline: _0x39bd12(0x4a5),
          });
      }, 0x64),
      (sugerenciasDiv["innerHTML"] = ""),
      (sugerenciasDiv[_0x5692ee(0x265)][_0x5692ee(0x3a1)] = "none");
    if (!_0xeaa8a3) {
      (resultadoDiv[_0x5692ee(0x2ea)] =
        "<div\x20class=\x22alert\x20alert-danger\x22\x20role=\x22alert\x22>Por\x20favor\x20ingresa\x20un\x20código</div>"),
        renderHistorial(),
        inputCodigo[_0x5692ee(0x4b0)]();
      return;
    }
    (inputCodigo["placeholder"] = ""),
      (resultadoDiv["innerHTML"] = _0x5692ee(0x3ef));
    let _0x544e9b = await getAllProductos(),
      _0x3782ee = _0x544e9b[_0x5692ee(0x459)]((_0x31964e) => {
        const _0x59ced2 = _0x5692ee;
        if (
          String(_0x31964e[_0x59ced2(0x3e7)]) === _0xeaa8a3 ||
          String(_0x31964e[_0x59ced2(0x367)]) === _0xeaa8a3
        )
          return !![];
        if (
          _0x31964e[_0x59ced2(0x425)] &&
          Array[_0x59ced2(0x263)](_0x31964e[_0x59ced2(0x425)])
        )
          return _0x31964e[_0x59ced2(0x425)][_0x59ced2(0x378)](
            (_0x5b1fa7) => String(_0x5b1fa7) === _0xeaa8a3
          );
        return ![];
      });
    if (_0x3782ee) {
      mostrarDetalleProducto(_0x3782ee);
      const _0xddbeed = {
        ..._0x3782ee,
        FECHA_ESCANEO: new Date()["toISOString"](),
      };
      historial[_0x5692ee(0x48d)](_0xddbeed),
        setCookie(_0x5692ee(0x2fd), JSON[_0x5692ee(0x2b3)](historial), 0x1e),
        (inputCodigo["value"] = ""),
        inputCodigo[_0x5692ee(0x4b0)](),
        _0x3782ee[_0x5692ee(0x425)] &&
          _0x3782ee[_0x5692ee(0x425)][_0x5692ee(0x37d)] > 0x1 &&
          console[_0x5692ee(0x413)](_0x5692ee(0x405), {
            sku: _0x3782ee[_0x5692ee(0x3e7)],
            gtin_principal: _0x3782ee[_0x5692ee(0x367)],
            codigo_buscado: _0xeaa8a3,
            todos_los_codigos: _0x3782ee[_0x5692ee(0x425)],
          });
    } else
      (resultadoDiv[_0x5692ee(0x2ea)] =
        "<div\x20class=\x22alert\x20alert-danger\x22\x20role=\x22alert\x22>No\x20se\x20encontró\x20el\x20código\x20ingresado</div>"),
        (inputCodigo[_0x5692ee(0x2c5)] = ""),
        inputCodigo[_0x5692ee(0x4b0)](),
        setTimeout(() => {
          const _0x20270f = _0x5692ee;
          resultadoDiv[_0x20270f(0x2ea)] = "";
        }, 0x1388),
        console[_0x5692ee(0x413)](
          "❌\x20Código\x20no\x20encontrado:\x20\x22" + _0xeaa8a3 + "\x22"
        );
    renderHistorial();
  });
async function detectarPromocionReal(_0x56dab7) {
  const _0x330b6f = _0x765170,
    _0x53aed9 = (_0x56dab7["pr_sku"] || "")[_0x330b6f(0x3d0)]();
  try {
    let _0x4cfbb5 = await getAllPromociones();
    if (_0x4cfbb5[_0x330b6f(0x37d)] === 0x0) {
      console[_0x330b6f(0x413)](_0x330b6f(0x446));
      const _0x3dd487 = await fetch(_0x330b6f(0x41d));
      if (!_0x3dd487["ok"])
        return (
          console[_0x330b6f(0x413)](
            "Error\x20al\x20obtener\x20promociones\x20mejoradas:",
            _0x3dd487["status"]
          ),
          []
        );
      const _0x3f0786 = await _0x3dd487[_0x330b6f(0x497)]();
      if (
        _0x3f0786[_0x330b6f(0x241)] === _0x330b6f(0x417) &&
        _0x3f0786[_0x330b6f(0x2a5)]
      )
        _0x4cfbb5 = _0x3f0786["promoResult"];
      else {
        if (Array["isArray"](_0x3f0786)) _0x4cfbb5 = _0x3f0786;
        else return console[_0x330b6f(0x413)](_0x330b6f(0x25b)), [];
      }
      try {
        await clearPromociones(),
          await savePromociones(_0x4cfbb5),
          localStorage["setItem"](
            "promociones_ts",
            String(Date[_0x330b6f(0x2b0)]())
          ),
          console[_0x330b6f(0x413)](_0x330b6f(0x49c));
      } catch (_0x10d684) {
        console[_0x330b6f(0x371)](_0x330b6f(0x370), _0x10d684);
      }
    } else console["log"](_0x330b6f(0x444), _0x4cfbb5[_0x330b6f(0x37d)]);
    console[_0x330b6f(0x413)](_0x330b6f(0x3dd), _0x53aed9);
    const _0xbacbaf = [];
    for (const _0x2689a4 of _0x4cfbb5) {
      let _0x3ff82c = [];
      if (
        _0x2689a4[_0x330b6f(0x3c7)] &&
        Array[_0x330b6f(0x263)](_0x2689a4[_0x330b6f(0x3c7)])
      )
        _0x3ff82c = _0x2689a4["skus"];
      else
        _0x2689a4[_0x330b6f(0x47e)] &&
          _0x2689a4["pro_grupoProductos_primaria"][_0x330b6f(0x3e7)] &&
          (Array[_0x330b6f(0x263)](_0x2689a4[_0x330b6f(0x47e)]["pr_sku"])
            ? (_0x3ff82c = _0x2689a4[_0x330b6f(0x47e)]["pr_sku"])
            : (_0x3ff82c = _0x2689a4[_0x330b6f(0x47e)][_0x330b6f(0x3e7)]
                [_0x330b6f(0x3a4)]("\x20")
                [_0x330b6f(0x447)]((_0xf15d0) => _0xf15d0["trim"]())));
      if (_0x3ff82c[_0x330b6f(0x37b)](_0x53aed9)) {
        const _0x31f7cc =
            _0x2689a4["pro_nombrePromo"] ||
            _0x2689a4[_0x330b6f(0x3ec)] ||
            _0x2689a4[_0x330b6f(0x3de)] ||
            _0x330b6f(0x490),
          _0x2291ff =
            _0x2689a4[_0x330b6f(0x385)] ||
            _0x2689a4["cantidad"] ||
            _0x2689a4[_0x330b6f(0x465)] ||
            "",
          _0x3f24f5 =
            _0x2689a4[_0x330b6f(0x3c5)] ||
            _0x2689a4[_0x330b6f(0x316)] ||
            _0x2689a4[_0x330b6f(0x457)] ||
            _0x2689a4[_0x330b6f(0x302)] ||
            _0x2689a4["precio_total"] ||
            _0x2689a4[_0x330b6f(0x3d9)] ||
            _0x2689a4[_0x330b6f(0x225)] ||
            _0x2689a4[_0x330b6f(0x20b)] ||
            "";
        console[_0x330b6f(0x413)](_0x330b6f(0x49b) + _0x53aed9 + ":", {
          nombre: _0x31f7cc,
          cantidad: _0x2291ff,
          precio: _0x3f24f5,
          campos_precio_disponibles: {
            pro_precioPromo: _0x2689a4[_0x330b6f(0x3c5)],
            precio: _0x2689a4["precio"],
            price: _0x2689a4[_0x330b6f(0x457)],
            precioTotal: _0x2689a4["precioTotal"],
            precio_total: _0x2689a4[_0x330b6f(0x2e5)],
            pro_precio_total: _0x2689a4[_0x330b6f(0x3d9)],
            total_price: _0x2689a4["total_price"],
            valor_total: _0x2689a4[_0x330b6f(0x20b)],
          },
          campos_disponibles: Object[_0x330b6f(0x3ce)](_0x2689a4),
          promo_completa: _0x2689a4,
        }),
          _0xbacbaf[_0x330b6f(0x424)]({
            tipo: "promoción\x20oficial",
            detalle: _0x330b6f(0x389) + _0x31f7cc,
            nombre_promocion: _0x31f7cc,
            es_oficial: !![],
            fuente: _0x330b6f(0x364),
            id_promocion: _0x2689a4[_0x330b6f(0x3ac)] || _0x2689a4["id"],
            cantidad: _0x2291ff,
            precio: _0x3f24f5,
            mensaje:
              _0x2689a4[_0x330b6f(0x396)] || _0x2689a4[_0x330b6f(0x2d1)] || "",
            tipo_promo:
              _0x2689a4[_0x330b6f(0x257)] || _0x2689a4[_0x330b6f(0x28a)] || "",
            vigencia:
              _0x2689a4[_0x330b6f(0x2b5)] && _0x2689a4["validTo"]
                ? _0x2689a4[_0x330b6f(0x2b5)] +
                  _0x330b6f(0x27b) +
                  _0x2689a4["validTo"]
                : "",
            raw_data: {
              pro_cantidad_base: _0x2689a4[_0x330b6f(0x385)],
              pro_precioPromo: _0x2689a4[_0x330b6f(0x3c5)],
              pro_nombrePromo: _0x2689a4[_0x330b6f(0x3cd)],
              todos_campos_precio: {
                pro_precioPromo: _0x2689a4["pro_precioPromo"],
                precio: _0x2689a4[_0x330b6f(0x316)],
                price: _0x2689a4[_0x330b6f(0x457)],
                precioTotal: _0x2689a4[_0x330b6f(0x302)],
                precio_total: _0x2689a4[_0x330b6f(0x2e5)],
                pro_precio_total: _0x2689a4[_0x330b6f(0x3d9)],
                total_price: _0x2689a4[_0x330b6f(0x225)],
                valor_total: _0x2689a4[_0x330b6f(0x20b)],
              },
            },
          });
      }
    }
    return (
      _0xbacbaf[_0x330b6f(0x37d)] === 0x0
        ? console[_0x330b6f(0x413)](
            "❌\x20No\x20hay\x20promociones\x20para\x20SKU:\x20" + _0x53aed9
          )
        : console["log"](
            "✅\x20" +
              _0xbacbaf[_0x330b6f(0x37d)] +
              _0x330b6f(0x492) +
              _0x53aed9
          ),
      _0xbacbaf
    );
  } catch (_0x21c173) {
    return console[_0x330b6f(0x258)](_0x330b6f(0x2cd), _0x21c173), [];
  }
}
function mostrarDetalleProducto(_0x2160e5) {
  const _0x486635 = _0x765170;
  let _0x38dbc8 = "";
  if (
    _0x2160e5[_0x486635(0x296)] &&
    _0x2160e5[_0x486635(0x296)][_0x486635(0x255)]() !== ""
  ) {
    if (_0x2160e5[_0x486635(0x296)][_0x486635(0x416)](_0x486635(0x36b)))
      _0x38dbc8 = _0x2160e5[_0x486635(0x296)];
    else {
      let _0x1c7c51 = _0x2160e5[_0x486635(0x296)]["startsWith"]("/")
        ? _0x2160e5["pr_imagen"]
        : "/" + _0x2160e5[_0x486635(0x296)];
      _0x38dbc8 = _0x486635(0x237) + _0x1c7c51;
    }
  }
  let _0x3ad01e =
      Number(_0x2160e5["pr_precio"]) || Number(_0x2160e5["L1"]) || 0x0,
    _0x302953 = Math[_0x486635(0x2d7)](_0x3ad01e * 1.16 * 0x64) / 0x64,
    _0x481d00 = 0xc,
    _0xc41cd2 = 0.1,
    _0x3171fb = Math["round"](_0x302953 * (0x1 + _0xc41cd2) * 0x64) / 0x64,
    _0x111086 = "";
  if (
    _0x2160e5[_0x486635(0x425)] &&
    _0x2160e5[_0x486635(0x425)]["length"] > 0x1
  ) {
    const _0x16de76 = [...new Set(_0x2160e5["codigos_barras"])]["filter"](
      (_0x5e29fe) => _0x5e29fe && _0x5e29fe[_0x486635(0x255)]()
    );
    _0x16de76[_0x486635(0x37d)] > 0x1 &&
      (_0x111086 =
        _0x486635(0x438) +
        _0x16de76[_0x486635(0x36e)](",\x20") +
        _0x486635(0x20e));
  }
  renderProductoConPromociones(
    _0x2160e5,
    _0x38dbc8,
    _0x302953,
    _0x3171fb,
    _0x111086
  ),
    setTimeout(() => {
      generarCodigoBarras(_0x2160e5);
    }, 0x64),
    detectarPromocionReal(_0x2160e5)
      [_0x486635(0x461)]((_0x54ec1a) => {
        actualizarPromocionesEnVista(
          _0x2160e5,
          _0x38dbc8,
          _0x302953,
          _0x3171fb,
          _0x111086,
          _0x54ec1a
        );
      })
      [_0x486635(0x21b)]((_0x4c1896) => {
        const _0x466c0c = _0x486635;
        console[_0x466c0c(0x258)](_0x466c0c(0x275), _0x4c1896),
          actualizarPromocionesEnVista(
            _0x2160e5,
            _0x38dbc8,
            _0x302953,
            _0x3171fb,
            _0x111086,
            []
          );
      });
}
function generarCodigoBarras(_0x475656) {
  const _0x4a858b = _0x765170,
    _0x3efe44 =
      _0x475656[_0x4a858b(0x3e7)] || _0x475656[_0x4a858b(0x367)] || "",
    _0x1d4eef = _0x4a858b(0x3bc) + _0x475656[_0x4a858b(0x3e7)],
    _0x11d852 = document[_0x4a858b(0x2ce)](_0x1d4eef);
  if (!_0x11d852 || !_0x3efe44) {
    console[_0x4a858b(0x371)](_0x4a858b(0x349));
    return;
  }
  const _0x23308d = () => {
    const _0x3eb586 = _0x4a858b;
    if (window[_0x3eb586(0x254)])
      try {
        let _0x46516c = _0x3eb586(0x4ad);
        const _0x4c4d3e = String(_0x3efe44);
        if (_0x4c4d3e["length"] === 0xd && /^\d+$/[_0x3eb586(0x26e)](_0x4c4d3e))
          _0x46516c = _0x3eb586(0x3eb);
        else {
          if (
            _0x4c4d3e[_0x3eb586(0x37d)] === 0x8 &&
            /^\d+$/[_0x3eb586(0x26e)](_0x4c4d3e)
          )
            _0x46516c = "EAN8";
          else
            _0x4c4d3e[_0x3eb586(0x37d)] === 0xc &&
              /^\d+$/[_0x3eb586(0x26e)](_0x4c4d3e) &&
              (_0x46516c = _0x3eb586(0x45f));
        }
        console[_0x3eb586(0x413)](
          _0x3eb586(0x264) + _0x46516c + _0x3eb586(0x208) + _0x4c4d3e
        ),
          JsBarcode(_0x11d852, _0x4c4d3e, {
            format: _0x46516c,
            width: 0x2,
            height: 0x32,
            displayValue: ![],
            margin: 0x0,
            background: "#ffffff",
            lineColor: _0x3eb586(0x3c8),
          }),
          window["innerWidth"] <= 0x300 &&
            JsBarcode(_0x11d852, _0x4c4d3e, {
              format: _0x46516c,
              width: 1.5,
              height: 0x28,
              displayValue: ![],
              margin: 0x0,
              background: _0x3eb586(0x219),
              lineColor: "#000000",
            });
      } catch (_0x33e817) {
        console[_0x3eb586(0x258)](_0x3eb586(0x26c), _0x33e817);
        const _0x1e8cf5 = _0x11d852["getContext"]("2d");
        (_0x1e8cf5["fillStyle"] = "#f8f9fa"),
          _0x1e8cf5["fillRect"](
            0x0,
            0x0,
            _0x11d852[_0x3eb586(0x40c)],
            _0x11d852[_0x3eb586(0x1f3)]
          ),
          (_0x1e8cf5["fillStyle"] = _0x3eb586(0x456)),
          (_0x1e8cf5[_0x3eb586(0x22c)] = _0x3eb586(0x227)),
          (_0x1e8cf5[_0x3eb586(0x305)] = _0x3eb586(0x35e)),
          _0x1e8cf5[_0x3eb586(0x290)](
            _0x3eb586(0x273),
            _0x11d852[_0x3eb586(0x40c)] / 0x2,
            _0x11d852[_0x3eb586(0x1f3)] / 0x2
          );
      }
    else setTimeout(_0x23308d, 0x64);
  };
  _0x23308d();
}
function renderProductoConPromociones(
  _0x4fb4d6,
  _0x6e8014,
  _0x413cf8,
  _0x2db20c,
  _0xfc76fa
) {
  const _0x1c31b = _0x765170;
  resultadoDiv[_0x1c31b(0x2ea)] =
    _0x1c31b(0x462) +
    (_0x6e8014
      ? _0x1c31b(0x38b) +
        _0x6e8014 +
        _0x1c31b(0x4b5) +
        _0x4fb4d6["pr_name"] +
        _0x1c31b(0x33f)
      : "") +
    _0x1c31b(0x2ba) +
    _0x4fb4d6[_0x1c31b(0x220)] +
    _0x1c31b(0x205) +
    _0x413cf8[_0x1c31b(0x3ae)](0x2) +
    _0x1c31b(0x34c) +
    _0x2db20c["toFixed"](0x2) +
    _0x1c31b(0x400) +
    _0x4fb4d6["pr_sku"] +
    "\x22\x20class=\x22barcode-canvas\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22fw-bold\x20text-dark\x22>" +
    (_0x4fb4d6["pr_sku"] || _0x4fb4d6["pr_gtin"] || "N/A") +
    _0x1c31b(0x375) +
    _0xfc76fa +
    "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22promociones-container\x22\x20class=\x22mt-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20text-muted\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>🔍\x20Verificando\x20promociones...</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20";
}
function actualizarPromocionesEnVista(
  _0x3d150b,
  _0x3f44e1,
  _0x2ba7d4,
  _0x46c4fc,
  _0x53d380,
  _0x2d6dd2
) {
  const _0x72beb9 = _0x765170;
  console[_0x72beb9(0x413)](_0x72beb9(0x218), _0x2d6dd2);
  let _0x3cf2fa = "";
  if (_0x2d6dd2[_0x72beb9(0x37d)] > 0x0) {
    const _0x3f14f9 = _0x2d6dd2[_0x72beb9(0x447)](
      (_0xf67a96) =>
        _0xf67a96[_0x72beb9(0x361)] &&
        (_0xf67a96[_0x72beb9(0x2f9)] === _0x72beb9(0x436) ||
          _0xf67a96[_0x72beb9(0x2f9)] === _0x72beb9(0x364))
    );
    console[_0x72beb9(0x413)](_0x72beb9(0x206), _0x3f14f9);
    if (_0x3f14f9[_0x72beb9(0x37d)] > 0x0) {
      const _0x32c2fc = _0x3f14f9[_0x72beb9(0x231)]((_0x28606d) => {
        const _0x488e47 = _0x72beb9;
        console[_0x488e47(0x413)](_0x488e47(0x41b), _0x28606d);
        const _0x21033e =
          _0x28606d[_0x488e47(0x422)] || _0x28606d[_0x488e47(0x385)] || "";
        let _0x16b376 =
          _0x28606d[_0x488e47(0x316)] || _0x28606d[_0x488e47(0x3c5)] || "";
        const _0x113357 =
          _0x28606d[_0x488e47(0x323)] || _0x28606d[_0x488e47(0x3cd)] || "";
        console[_0x488e47(0x413)](
          "📊\x20Datos\x20extraídos\x20antes\x20de\x20procesamiento:",
          { cantidad: _0x21033e, precio: _0x16b376, nombrePromo: _0x113357 }
        );
        if (_0x21033e && _0x16b376) {
          const _0x1c2c65 = parseInt(_0x21033e),
            _0x1426cc = parseFloat(_0x16b376);
          if (!isNaN(_0x1c2c65) && !isNaN(_0x1426cc)) {
            const _0x41675c = _0x1c2c65 * _0x1426cc,
              _0x529119 = Math["round"](_0x41675c);
            console[_0x488e47(0x413)](
              _0x488e47(0x2c1) +
                _0x1c2c65 +
                _0x488e47(0x390) +
                _0x1426cc +
                _0x488e47(0x31a) +
                _0x41675c +
                "\x20→\x20" +
                _0x529119 +
                _0x488e47(0x34e)
            ),
              (_0x16b376 = _0x529119[_0x488e47(0x3d0)]());
          }
        }
        console[_0x488e47(0x413)](_0x488e47(0x2ed), {
          cantidad: _0x21033e,
          precio: _0x16b376,
          nombrePromo: _0x113357,
        });
        let _0x918295 = "";
        if (_0x21033e && _0x16b376)
          (_0x918295 = _0x21033e + "x" + _0x16b376),
            console[_0x488e47(0x413)](_0x488e47(0x2fa), _0x918295);
        else {
          if (_0x113357) {
            const _0x4b561d = _0x113357[_0x488e47(0x3d1)](
                /(\d+)\s*[xX×]\s*(\d+)/i
              ),
              _0x1c7ef7 = _0x113357[_0x488e47(0x3d1)](
                /(\d+)\s*[xX×]\s*\$?\s*(\d+)/i
              ),
              _0x42a345 = _0x113357[_0x488e47(0x3d1)](/(\d+)\s*[xX×]/i);
            if (_0x4b561d)
              (_0x918295 = _0x4b561d[0x1] + "x" + _0x4b561d[0x2]),
                console[_0x488e47(0x413)](_0x488e47(0x4a2), _0x918295);
            else {
              if (_0x1c7ef7)
                (_0x918295 = _0x1c7ef7[0x1] + "x" + _0x1c7ef7[0x2]),
                  console[_0x488e47(0x413)](_0x488e47(0x2d8), _0x918295);
              else
                _0x42a345
                  ? ((_0x918295 = _0x42a345[0x1] + "x"),
                    console[_0x488e47(0x413)](_0x488e47(0x4a4), _0x918295))
                  : ((_0x918295 = _0x113357),
                    console[_0x488e47(0x413)](_0x488e47(0x3b8), _0x918295));
            }
          } else
            (_0x918295 = "PROMO"), console[_0x488e47(0x413)](_0x488e47(0x397));
        }
        return _0x488e47(0x404) + _0x918295 + _0x488e47(0x21a);
      })[_0x72beb9(0x36e)]("");
      _0x3cf2fa = _0x72beb9(0x48b) + _0x32c2fc + _0x72beb9(0x2a2);
    } else _0x3cf2fa = _0x72beb9(0x2df);
  } else _0x3cf2fa = _0x72beb9(0x41c);
  const _0x55f37c = document[_0x72beb9(0x2ce)](_0x72beb9(0x418));
  _0x55f37c && (_0x55f37c[_0x72beb9(0x2ea)] = _0x3cf2fa);
}
async function mostrarModalPromocionesGenerales() {
  const _0x466372 = _0x765170,
    _0x47282d = document[_0x466372(0x2ce)](_0x466372(0x2e3));
  if (!_0x47282d) return;
  try {
    console[_0x466372(0x413)](_0x466372(0x4ae)),
      (_0x47282d["innerHTML"] = _0x466372(0x29c));
    const [_0x167c9a, _0x2f6be6] = await Promise[_0x466372(0x45b)]([
      fetch(_0x466372(0x41d)),
      getAllProductos(),
    ]);
    if (!_0x167c9a["ok"])
      throw new Error(
        _0x466372(0x2c9) +
          _0x167c9a[_0x466372(0x241)] +
          ":\x20" +
          _0x167c9a[_0x466372(0x2bc)]
      );
    const _0x3fd7ac = await _0x167c9a["json"]();
    console[_0x466372(0x413)](_0x466372(0x3b6), _0x3fd7ac);
    let _0x1e963f = [];
    if (
      _0x3fd7ac[_0x466372(0x241)] === _0x466372(0x417) &&
      _0x3fd7ac[_0x466372(0x2a5)]
    )
      _0x1e963f = _0x3fd7ac[_0x466372(0x2a5)];
    else {
      if (Array[_0x466372(0x263)](_0x3fd7ac)) _0x1e963f = _0x3fd7ac;
      else throw new Error(_0x466372(0x319));
    }
    if (_0x1e963f["length"] === 0x0) {
      _0x47282d[_0x466372(0x2ea)] = _0x466372(0x38e);
      return;
    }
    let _0x50f0cf = _0x466372(0x339);
    _0x1e963f["forEach"]((_0x1fc4a4, _0x5a90a6) => {
      const _0x418954 = _0x466372;
      let _0x3bcdf8 = [];
      if (
        _0x1fc4a4[_0x418954(0x3c7)] &&
        Array[_0x418954(0x263)](_0x1fc4a4[_0x418954(0x3c7)])
      )
        _0x3bcdf8 = _0x1fc4a4[_0x418954(0x3c7)];
      else
        _0x1fc4a4[_0x418954(0x47e)] &&
          _0x1fc4a4[_0x418954(0x47e)][_0x418954(0x3e7)] &&
          (Array["isArray"](_0x1fc4a4[_0x418954(0x47e)]["pr_sku"])
            ? (_0x3bcdf8 = _0x1fc4a4[_0x418954(0x47e)][_0x418954(0x3e7)])
            : (_0x3bcdf8 = _0x1fc4a4["pro_grupoProductos_primaria"][
                _0x418954(0x3e7)
              ]
                ["split"]("\x20")
                [_0x418954(0x447)]((_0x590ca8) =>
                  _0x590ca8[_0x418954(0x255)]()
                )));
      const _0x10a788 = _0x3bcdf8["map"]((_0x2a55e9) => {
          const _0x3aa348 = _0x418954;
          return _0x2f6be6[_0x3aa348(0x459)](
            (_0x3f678b) => _0x3f678b[_0x3aa348(0x3e7)] === _0x2a55e9
          );
        })[_0x418954(0x447)]((_0x318e5a) => _0x318e5a !== undefined),
        _0x35bc5e =
          _0x1fc4a4[_0x418954(0x3cd)] ||
          _0x1fc4a4[_0x418954(0x3ec)] ||
          _0x418954(0x441) + (_0x5a90a6 + 0x1),
        _0x48ea16 =
          _0x1fc4a4[_0x418954(0x257)] ||
          _0x1fc4a4["tipo"] ||
          "No\x20especificado",
        _0x300294 =
          _0x1fc4a4[_0x418954(0x396)] || _0x1fc4a4[_0x418954(0x2d1)] || "",
        _0x56bad5 = _0x1fc4a4[_0x418954(0x385)] || "",
        _0x352b93 = Number(_0x56bad5) || 0x1;
      let _0x537ad8 = 0x0;
      const _0x5e8737 = (_0x300294 + "\x20" + _0x35bc5e)[_0x418954(0x1e9)](),
        _0x49dbe4 = _0x5e8737["match"](/(\d+)\s*x\s*(\d+)/);
      if (_0x49dbe4) _0x537ad8 = Math["round"](Number(_0x49dbe4[0x2]));
      else {
        const _0x13028d = Number(_0x1fc4a4[_0x418954(0x3c5)]) || 0x0;
        _0x537ad8 = Math[_0x418954(0x2d7)](_0x13028d * _0x352b93);
      }
      _0x50f0cf +=
        _0x418954(0x351) +
        _0x35bc5e +
        "</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22badge\x20bg-danger\x20text-white\x22\x20style=\x22font-size:\x201.2rem;\x20padding:\x2010px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20" +
        _0x352b93 +
        "x" +
        (_0x537ad8 > 0x0 ? _0x537ad8 : _0x418954(0x201)) +
        _0x418954(0x430) +
        (_0x10a788["length"] > 0x0
          ? _0x10a788[_0x418954(0x231)]((_0x5b1bea) => {
              const _0x5ad10b = _0x418954;
              let _0x332899 = "";
              if (
                _0x5b1bea[_0x5ad10b(0x296)] &&
                _0x5b1bea[_0x5ad10b(0x296)][_0x5ad10b(0x255)]() !== ""
              ) {
                if (
                  _0x5b1bea[_0x5ad10b(0x296)][_0x5ad10b(0x416)](
                    _0x5ad10b(0x36b)
                  )
                )
                  _0x332899 = _0x5b1bea["pr_imagen"];
                else {
                  let _0x16d7c4 = _0x5b1bea["pr_imagen"][_0x5ad10b(0x416)]("/")
                    ? _0x5b1bea[_0x5ad10b(0x296)]
                    : "/" + _0x5b1bea["pr_imagen"];
                  _0x332899 = _0x5ad10b(0x237) + _0x16d7c4;
                }
              }
              const _0x270e2f =
                  Number(_0x5b1bea["pr_precio"]) ||
                  Number(_0x5b1bea["L1"]) ||
                  0x0,
                _0x480de2 =
                  Math[_0x5ad10b(0x2d7)](_0x270e2f * 1.16 * 0x64) / 0x64;
              return (
                _0x5ad10b(0x395) +
                (_0x332899
                  ? "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22me-3\x22\x20style=\x22min-width:\x2060px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22" +
                    _0x332899 +
                    _0x5ad10b(0x4b5) +
                    _0x5b1bea[_0x5ad10b(0x220)] +
                    _0x5ad10b(0x4b1)
                  : _0x5ad10b(0x23c)) +
                _0x5ad10b(0x3ba) +
                _0x5b1bea[_0x5ad10b(0x220)] +
                _0x5ad10b(0x236) +
                _0x480de2[_0x5ad10b(0x3ae)](0x2) +
                _0x5ad10b(0x32f) +
                _0x5b1bea["pr_sku"] +
                "\x27)\x22\x20title=\x22Ver\x20detalles\x20completos\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22bi\x20bi-search\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20"
              );
            })["join"]("")
          : _0x418954(0x393)) +
        _0x418954(0x31f);
    }),
      (_0x50f0cf += _0x466372(0x289)),
      (_0x47282d[_0x466372(0x2ea)] = _0x50f0cf);
  } catch (_0x179a4f) {
    console["error"](_0x466372(0x275), _0x179a4f),
      (_0x47282d["innerHTML"] =
        "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-danger\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22bi\x20bi-exclamation-triangle\x22\x20style=\x22font-size:\x203rem;\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6\x20class=\x22mt-3\x22>❌\x20Error\x20al\x20cargar\x20promociones</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>" +
        _0x179a4f[_0x466372(0x48f)] +
        _0x466372(0x22d));
  }
}
async function consultarProductoDesdeModal(_0x321868) {
  const _0x5949d1 = _0x765170;
  try {
    const _0x4ce023 = bootstrap["Modal"][_0x5949d1(0x435)](
      document[_0x5949d1(0x2ce)](_0x5949d1(0x2ee))
    );
    _0x4ce023 && _0x4ce023[_0x5949d1(0x2a1)]();
    const _0x53f463 = await getAllProductos(),
      _0x2b7885 = _0x53f463["find"](
        (_0x33459f) =>
          String(_0x33459f["pr_sku"]) === String(_0x321868) ||
          String(_0x33459f[_0x5949d1(0x367)]) === String(_0x321868)
      );
    if (_0x2b7885) {
      (inputCodigo["value"] = ""), mostrarDetalleProducto(_0x2b7885);
      const _0x2db35d = {
        ..._0x2b7885,
        FECHA_ESCANEO: new Date()["toISOString"](),
      };
      historial[_0x5949d1(0x48d)](_0x2db35d),
        setCookie(_0x5949d1(0x2fd), JSON["stringify"](historial), 0x1e),
        renderHistorial(),
        setTimeout(() => {
          const _0x196dbe = _0x5949d1,
            _0x5722f9 = document[_0x196dbe(0x2ce)](_0x196dbe(0x33e));
          _0x5722f9 &&
            _0x5722f9[_0x196dbe(0x439)]({
              behavior: "smooth",
              block: _0x196dbe(0x26f),
              inline: _0x196dbe(0x4a5),
            });
        }, 0x12c);
    } else
      (resultadoDiv[_0x5949d1(0x2ea)] =
        _0x5949d1(0x2e0) + _0x321868 + _0x5949d1(0x429)),
        setTimeout(() => {
          resultadoDiv["innerHTML"] = "";
        }, 0x1388);
  } catch (_0x3e6973) {
    console[_0x5949d1(0x258)](
      "Error\x20consultando\x20producto\x20desde\x20modal:",
      _0x3e6973
    ),
      (resultadoDiv[_0x5949d1(0x2ea)] =
        _0x5949d1(0x335) + _0x3e6973[_0x5949d1(0x48f)] + _0x5949d1(0x36f)),
      setTimeout(() => {
        const _0x4cd13f = _0x5949d1;
        resultadoDiv[_0x4cd13f(0x2ea)] = "";
      }, 0x1388);
  }
}
async function consultarProductoDesdeHistorial(_0x5e4bfc) {
  const _0x4996aa = _0x765170;
  try {
    const _0x17441d = await getAllProductos(),
      _0x160484 = _0x17441d[_0x4996aa(0x459)](
        (_0x11f02f) =>
          String(_0x11f02f["pr_sku"]) === String(_0x5e4bfc) ||
          String(_0x11f02f[_0x4996aa(0x367)]) === String(_0x5e4bfc)
      );
    if (_0x160484) {
      (inputCodigo[_0x4996aa(0x2c5)] = ""), mostrarDetalleProducto(_0x160484);
      const _0x5a904a = historial[_0x4996aa(0x2c6)](
        (_0x5ccd57) =>
          (_0x5ccd57[_0x4996aa(0x3e7)] &&
            String(_0x5ccd57[_0x4996aa(0x3e7)]) === String(_0x5e4bfc)) ||
          (_0x5ccd57["pr_gtin"] &&
            String(_0x5ccd57[_0x4996aa(0x367)]) === String(_0x5e4bfc))
      );
      if (_0x5a904a !== -0x1) {
        const _0x4bb130 = historial[_0x4996aa(0x3f8)](_0x5a904a, 0x1)[0x0];
        (_0x4bb130[_0x4996aa(0x4a8)] = new Date()[_0x4996aa(0x211)]()),
          historial[_0x4996aa(0x48d)](_0x4bb130),
          setCookie(_0x4996aa(0x2fd), JSON["stringify"](historial), 0x1e),
          renderHistorial();
      }
      setTimeout(() => {
        const _0x4bc9c6 = _0x4996aa,
          _0x1da599 = document[_0x4bc9c6(0x2ce)](_0x4bc9c6(0x33e));
        _0x1da599 &&
          _0x1da599["scrollIntoView"]({
            behavior: _0x4bc9c6(0x45e),
            block: "start",
            inline: _0x4bc9c6(0x4a5),
          });
      }, 0x12c);
    } else
      (resultadoDiv[_0x4996aa(0x2ea)] =
        "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-danger\x22\x20role=\x22alert\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6>❌\x20Producto\x20no\x20encontrado</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>No\x20se\x20pudo\x20encontrar\x20el\x20producto\x20con\x20SKU:\x20" +
        _0x5e4bfc +
        "</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20"),
        setTimeout(() => {
          const _0x3d3881 = _0x4996aa;
          resultadoDiv[_0x3d3881(0x2ea)] = "";
        }, 0x1388);
  } catch (_0x4ee415) {
    console[_0x4996aa(0x258)](_0x4996aa(0x43c), _0x4ee415),
      (resultadoDiv[_0x4996aa(0x2ea)] =
        _0x4996aa(0x335) + _0x4ee415[_0x4996aa(0x48f)] + _0x4996aa(0x36f)),
      setTimeout(() => {
        const _0x59f497 = _0x4996aa;
        resultadoDiv[_0x59f497(0x2ea)] = "";
      }, 0x1388);
  }
}
(window[_0x765170(0x36a)] = mostrarModalPromocionesGenerales),
  (window[_0x765170(0x3f4)] = consultarProductoDesdeModal),
  (window[_0x765170(0x3d7)] = consultarProductoDesdeHistorial);
async function tienePromociones(_0x67de7f) {
  const _0x1887ad = _0x765170;
  try {
    const _0x4174fb = (_0x67de7f[_0x1887ad(0x3e7)] || "")[_0x1887ad(0x3d0)]();
    if (!_0x4174fb) return ![];
    const _0x1cd17a = await getAllPromociones();
    if (_0x1cd17a[_0x1887ad(0x37d)] === 0x0) return ![];
    for (const _0x1f2a18 of _0x1cd17a) {
      let _0x3eb787 = [];
      if (
        _0x1f2a18[_0x1887ad(0x3c7)] &&
        Array[_0x1887ad(0x263)](_0x1f2a18[_0x1887ad(0x3c7)])
      )
        _0x3eb787 = _0x1f2a18["skus"];
      else
        _0x1f2a18[_0x1887ad(0x47e)] &&
          _0x1f2a18[_0x1887ad(0x47e)][_0x1887ad(0x3e7)] &&
          (Array[_0x1887ad(0x263)](_0x1f2a18[_0x1887ad(0x47e)]["pr_sku"])
            ? (_0x3eb787 = _0x1f2a18[_0x1887ad(0x47e)][_0x1887ad(0x3e7)])
            : (_0x3eb787 = _0x1f2a18[_0x1887ad(0x47e)]["pr_sku"]
                [_0x1887ad(0x3a4)]("\x20")
                ["filter"]((_0x2fd08f) => _0x2fd08f[_0x1887ad(0x255)]())));
      if (_0x3eb787[_0x1887ad(0x37b)](_0x4174fb)) return !![];
    }
    return ![];
  } catch (_0x36f8f0) {
    return console["warn"](_0x1887ad(0x44b), _0x36f8f0), ![];
  }
}
let searchTimeout;
inputCodigo[_0x765170(0x41e)](_0x765170(0x47f), async function (_0x47b25d) {
  const _0x1e6baa = _0x765170,
    _0x55a113 = inputCodigo[_0x1e6baa(0x2c5)]
      [_0x1e6baa(0x255)]()
      [_0x1e6baa(0x1e9)]();
  clearTimeout(searchTimeout), (sugerenciasDiv[_0x1e6baa(0x2ea)] = "");
  if (!_0x55a113 || _0x55a113["length"] < 0x2) {
    sugerenciasDiv["style"]["display"] = _0x1e6baa(0x3a8);
    return;
  }
  searchTimeout = setTimeout(async () => {
    const _0x503071 = _0x1e6baa;
    let _0xeccb7c = await getAllProductos(),
      _0x24554a = _0xeccb7c["filter"]((_0x1e85e7) => {
        const _0x227727 = _0x3929;
        return (
          (_0x1e85e7[_0x227727(0x220)] &&
            _0x1e85e7["pr_name"]
              [_0x227727(0x1e9)]()
              [_0x227727(0x37b)](_0x55a113)) ||
          (_0x1e85e7[_0x227727(0x3e7)] &&
            String(_0x1e85e7["pr_sku"])
              [_0x227727(0x1e9)]()
              [_0x227727(0x37b)](_0x55a113)) ||
          (_0x1e85e7["pr_gtin"] &&
            String(_0x1e85e7[_0x227727(0x367)])
              [_0x227727(0x1e9)]()
              ["includes"](_0x55a113))
        );
      });
    const _0x346769 = new Set();
    _0x24554a = _0x24554a["filter"]((_0x304e7b) => {
      const _0x53185d = _0x3929,
        _0x2e1a2c = _0x304e7b[_0x53185d(0x3e7)] || _0x304e7b[_0x53185d(0x367)];
      if (!_0x2e1a2c || _0x346769[_0x53185d(0x313)](_0x2e1a2c)) return ![];
      return _0x346769[_0x53185d(0x235)](_0x2e1a2c), !![];
    });
    if (_0x24554a["length"] === 0x0) {
      sugerenciasDiv[_0x503071(0x265)][_0x503071(0x3a1)] = "none";
      return;
    }
    _0x24554a[_0x503071(0x470)]((_0x22f777, _0x44f697) => {
      const _0x47a07 = _0x503071,
        _0x2ccea3 = (_0x22f777[_0x47a07(0x220)] || "")[_0x47a07(0x1e9)](),
        _0x5982e5 = (_0x44f697[_0x47a07(0x220)] || "")[_0x47a07(0x1e9)](),
        _0x385e68 = _0x2ccea3["startsWith"](_0x55a113),
        _0x20f780 = _0x5982e5[_0x47a07(0x416)](_0x55a113);
      if (_0x385e68 && !_0x20f780) return -0x1;
      if (!_0x385e68 && _0x20f780) return 0x1;
      return _0x2ccea3["length"] - _0x5982e5[_0x47a07(0x37d)];
    });
    const _0xfa90e = _0x24554a[_0x503071(0x231)]((_0x391921) =>
        tienePromociones(_0x391921)
      ),
      _0x437d0b = await Promise[_0x503071(0x45b)](_0xfa90e);
    _0x24554a[_0x503071(0x392)]((_0x24b4f2, _0x287bbc) => {
      const _0x3a5e00 = _0x503071,
        _0x266f9d = _0x437d0b[_0x287bbc],
        _0x28998b = document["createElement"]("button");
      (_0x28998b[_0x3a5e00(0x2b8)] = _0x3a5e00(0x386)),
        (_0x28998b[_0x3a5e00(0x42a)] = _0x3a5e00(0x33c));
      let _0x394a24 = "";
      if (
        _0x24b4f2[_0x3a5e00(0x296)] &&
        _0x24b4f2[_0x3a5e00(0x296)][_0x3a5e00(0x255)]() !== ""
      ) {
        let _0x1eb4ac = "";
        if (_0x24b4f2[_0x3a5e00(0x296)][_0x3a5e00(0x416)](_0x3a5e00(0x36b)))
          _0x1eb4ac = _0x24b4f2[_0x3a5e00(0x296)];
        else {
          let _0x374c32 = _0x24b4f2[_0x3a5e00(0x296)][_0x3a5e00(0x416)]("/")
            ? _0x24b4f2["pr_imagen"]
            : "/" + _0x24b4f2[_0x3a5e00(0x296)];
          _0x1eb4ac = _0x3a5e00(0x237) + _0x374c32;
        }
        _0x394a24 =
          _0x3a5e00(0x230) +
          _0x1eb4ac +
          _0x3a5e00(0x4b5) +
          _0x24b4f2[_0x3a5e00(0x220)] +
          _0x3a5e00(0x34d);
      }
      const _0x2f8899 = _0x266f9d ? _0x3a5e00(0x46d) : "";
      (_0x28998b[_0x3a5e00(0x2ea)] =
        _0x3a5e00(0x213) +
        _0x394a24 +
        "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-grow-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22d-flex\x20align-items-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>" +
        _0x24b4f2[_0x3a5e00(0x220)] +
        _0x3a5e00(0x352) +
        _0x2f8899 +
        _0x3a5e00(0x314) +
        (_0x24b4f2["pr_sku"] || _0x24b4f2[_0x3a5e00(0x367)] || "") +
        "</small>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20"),
        (_0x28998b[_0x3a5e00(0x494)] = function () {
          const _0x3895eb = _0x3a5e00;
          mostrarDetalleProducto(_0x24b4f2);
          const _0xd4d9da = {
            ..._0x24b4f2,
            FECHA_ESCANEO: new Date()["toISOString"](),
          };
          historial[_0x3895eb(0x48d)](_0xd4d9da),
            setCookie("historial", JSON[_0x3895eb(0x2b3)](historial), 0x1e),
            renderHistorial(),
            (inputCodigo[_0x3895eb(0x2c5)] = ""),
            (sugerenciasDiv["innerHTML"] = ""),
            (sugerenciasDiv[_0x3895eb(0x265)]["display"] = _0x3895eb(0x3a8));
        }),
        sugerenciasDiv[_0x3a5e00(0x3a2)](_0x28998b);
    }),
      (sugerenciasDiv[_0x503071(0x265)]["display"] = "block");
  }, 0x12c);
}),
  document[_0x765170(0x41e)]("click", function (_0x45395e) {
    const _0x531da1 = _0x765170;
    !inputCodigo[_0x531da1(0x330)](_0x45395e["target"]) &&
      !sugerenciasDiv[_0x531da1(0x330)](_0x45395e[_0x531da1(0x2a7)]) &&
      ((sugerenciasDiv[_0x531da1(0x2ea)] = ""),
      (sugerenciasDiv[_0x531da1(0x265)][_0x531da1(0x3a1)] = _0x531da1(0x3a8)));
  });
function iniciarScanner() {
  const _0x52b988 = _0x765170;
  if (scannerActivo) return;
  navigator[_0x52b988(0x3dc)]
    [_0x52b988(0x1fd)]({ video: !![] })
    [_0x52b988(0x461)]((_0x2ab685) => {
      const _0x5d3b7c = _0x52b988;
      _0x2ab685["getTracks"]()[_0x5d3b7c(0x392)]((_0x355e6b) =>
        _0x355e6b[_0x5d3b7c(0x3bb)]()
      ),
        (scannerActivo = !![]),
        (readerDiv[_0x5d3b7c(0x265)]["display"] = _0x5d3b7c(0x3c9)),
        document[_0x5d3b7c(0x2ce)](_0x5d3b7c(0x27c))[_0x5d3b7c(0x439)]({
          behavior: "smooth",
          block: "center",
        }),
        (ayudaTexto[_0x5d3b7c(0x265)][_0x5d3b7c(0x3a1)] = _0x5d3b7c(0x3c9));
      const _0x43b0a2 = new Html5Qrcode(_0x5d3b7c(0x27c)),
        _0x3ecbcc = {
          fps: 0xa,
          videoConstraints: {
            width: { min: 0x190, ideal: 0x780 },
            height: { min: 0x190, ideal: 0x438 },
            facingMode: "environment",
            advanced: [{ zoom: 0x2 }],
          },
          qrbox: function (_0x18d36b, _0x5592dd) {
            const _0x2f53c1 = Math["min"](0x12c, _0x18d36b * 0.9),
              _0x165a9a = 0x64;
            return { width: _0x2f53c1, height: _0x165a9a };
          },
          rememberLastUsedCamera: !![],
          aspectRatio: 0x1,
          formatsToSupport: [
            Html5QrcodeSupportedFormats["CODE_128"],
            Html5QrcodeSupportedFormats[_0x5d3b7c(0x2ad)],
            Html5QrcodeSupportedFormats[_0x5d3b7c(0x1f7)],
            Html5QrcodeSupportedFormats[_0x5d3b7c(0x25e)],
            Html5QrcodeSupportedFormats["UPC_E"],
            Html5QrcodeSupportedFormats[_0x5d3b7c(0x23f)],
            Html5QrcodeSupportedFormats[_0x5d3b7c(0x288)],
            Html5QrcodeSupportedFormats["CODABAR"],
            Html5QrcodeSupportedFormats[_0x5d3b7c(0x248)],
            Html5QrcodeSupportedFormats[_0x5d3b7c(0x3e9)],
            Html5QrcodeSupportedFormats[_0x5d3b7c(0x3a6)],
            Html5QrcodeSupportedFormats["AZTEC"],
            Html5QrcodeSupportedFormats["PDF_417"],
          ],
          experimentalFeatures: { useBarCodeDetectorIfSupported: !![] },
        };
      _0x43b0a2["start"](
        { facingMode: "environment" },
        _0x3ecbcc,
        (_0x47a024) => {
          const _0x3eecd6 = _0x5d3b7c;
          (inputCodigo[_0x3eecd6(0x2c5)] = _0x47a024[_0x3eecd6(0x255)]()[
            _0x3eecd6(0x4a1)
          ](/\s+$/, "")),
            _0x43b0a2[_0x3eecd6(0x3bb)]()[_0x3eecd6(0x461)](() => {
              const _0x563607 = _0x3eecd6;
              (readerDiv["style"][_0x563607(0x3a1)] = _0x563607(0x3a8)),
                (ayudaTexto[_0x563607(0x265)]["display"] = _0x563607(0x3a8)),
                (scannerActivo = ![]),
                _0x43b0a2[_0x563607(0x3d2)](),
                form["requestSubmit"](),
                setTimeout(() => {
                  const _0x491a63 = _0x563607,
                    _0x4d2e0e = document["getElementById"](_0x491a63(0x33e));
                  _0x4d2e0e &&
                    _0x4d2e0e[_0x491a63(0x439)]({
                      behavior: _0x491a63(0x45e),
                      block: _0x491a63(0x26f),
                      inline: "nearest",
                    });
                }, 0x1f4);
            });
        },
        (_0x3cd9a3) => {}
      )
        [_0x5d3b7c(0x461)](() => {
          setTimeout(() => {
            const _0x27e578 = _0x3929,
              _0x26754a = readerDiv[_0x27e578(0x39b)](_0x27e578(0x27e));
            if (_0x26754a) {
              const _0x12e43c =
                _0x26754a[_0x27e578(0x398)]["getVideoTracks"]()[0x0];
              _0x12e43c[_0x27e578(0x32e)]({
                focusMode: "continuous",
                advanced: [{ zoom: 0x2 }],
              })
                [_0x27e578(0x461)](() => {})
                ["catch"]((_0x5a83e3) => {});
            }
          }, 0x7d0);
        })
        [_0x5d3b7c(0x21b)]((_0x4a005d) => {
          const _0x559b5c = _0x5d3b7c;
          (scannerActivo = ![]),
            (resultadoDiv[_0x559b5c(0x2ea)] =
              "<div\x20class=\x22alert\x20alert-danger\x22\x20role=\x22alert\x22>No\x20se\x20pudo\x20acceder\x20a\x20la\x20cámara:\x20" +
              _0x4a005d +
              "</div>"),
            renderHistorial();
        });
      const _0x3108fe = new MutationObserver(() => {
        const _0x13561f = _0x5d3b7c,
          _0x3a68ee = readerDiv[_0x13561f(0x39b)](_0x13561f(0x27e));
        _0x3a68ee &&
          (_0x3a68ee[_0x13561f(0x347)](_0x13561f(0x276), ""),
          _0x3a68ee[_0x13561f(0x347)]("autoplay", ""),
          _0x3a68ee["setAttribute"](_0x13561f(0x1f9), ""),
          _0x3108fe[_0x13561f(0x2cb)]());
      });
      _0x3108fe["observe"](readerDiv, { childList: !![], subtree: !![] });
    })
    [_0x52b988(0x21b)]((_0x5d6704) => {
      const _0x423102 = _0x52b988;
      (resultadoDiv["innerHTML"] = _0x423102(0x259)), renderHistorial();
    });
}
const fileInput = document[_0x765170(0x2ce)]("fileInput");
fileInput[_0x765170(0x41e)](_0x765170(0x41a), async (_0x3623e7) => {
  const _0xf86558 = _0x765170,
    _0x858ffe = _0x3623e7["target"][_0xf86558(0x426)][0x0];
  if (!_0x858ffe) return;
  resultadoDiv[_0xf86558(0x2ea)] = _0xf86558(0x23a);
  try {
    const _0x31ea79 = new Image(),
      _0x3a4a4c = new Promise((_0x44329b, _0x34cfb8) => {
        const _0x4eb4b1 = _0xf86558;
        (_0x31ea79[_0x4eb4b1(0x215)] = _0x44329b),
          (_0x31ea79[_0x4eb4b1(0x472)] = _0x34cfb8),
          (_0x31ea79[_0x4eb4b1(0x345)] = URL["createObjectURL"](_0x858ffe));
      });
    await _0x3a4a4c;
    if (
      GOOGLE_VISION_CONFIG["enabled"] &&
      visionUsageTracker[_0xf86558(0x2fb)]()
    ) {
      console[_0xf86558(0x413)](
        "🚀\x20Intentando\x20con\x20Google\x20Vision\x20API..."
      );
      try {
        const _0x1d91e2 = await detectarConGoogleVision(_0x31ea79);
        if (_0x1d91e2) {
          console[_0xf86558(0x413)](
            "✅\x20Google\x20Vision\x20detectó:",
            _0x1d91e2
          ),
            (inputCodigo["value"] = _0x1d91e2),
            form[_0xf86558(0x24b)](),
            URL[_0xf86558(0x2f1)](_0x31ea79[_0xf86558(0x345)]),
            (fileInput[_0xf86558(0x2c5)] = "");
          return;
        }
      } catch (_0x5f0f6b) {
        console[_0xf86558(0x413)](
          "❌\x20Error\x20con\x20Google\x20Vision,\x20usando\x20fallback:",
          _0x5f0f6b[_0xf86558(0x48f)]
        );
        if (_0x5f0f6b[_0xf86558(0x48f)]["includes"]("CORS_ERROR"))
          console[_0xf86558(0x413)](_0xf86558(0x3df));
        else {
          if (_0x5f0f6b[_0xf86558(0x48f)][_0xf86558(0x37b)](_0xf86558(0x212)))
            console[_0xf86558(0x413)](
              "🔧\x20Error\x20500:\x20Problema\x20con\x20Google\x20Vision\x20API"
            ),
              _0x5f0f6b[_0xf86558(0x48f)]["includes"](_0xf86558(0x49d))
                ? (console[_0xf86558(0x413)](_0xf86558(0x3f5)),
                  console[_0xf86558(0x413)](
                    "💡\x20Ve\x20a:\x20https://console.developers.google.com/billing/enable?project=1070150612422"
                  ))
                : console[_0xf86558(0x413)](
                    "💡\x20Verifica\x20la\x20configuración\x20de\x20GOOGLE_VISION_API_KEY\x20en\x20Vercel"
                  );
          else
            _0x5f0f6b["message"][_0xf86558(0x37b)](_0xf86558(0x249)) &&
              console[_0xf86558(0x413)](
                "🔄\x20Backend\x20no\x20disponible,\x20usando\x20detección\x20local"
              );
        }
      }
    } else {
      if (
        GOOGLE_VISION_CONFIG[_0xf86558(0x344)] &&
        !visionUsageTracker[_0xf86558(0x2fb)]()
      ) {
        const _0x46a29a = visionUsageTracker[_0xf86558(0x3ad)]();
        console["log"](
          _0xf86558(0x3e3) +
            _0x46a29a["monthlyUsed"] +
            "/" +
            _0x46a29a["monthlyLimit"] +
            ",\x20Diario:\x20" +
            _0x46a29a[_0xf86558(0x326)] +
            "/" +
            _0x46a29a["dailyLimit"]
        );
      }
    }
    if ("BarcodeDetector" in window) {
      console[_0xf86558(0x413)](_0xf86558(0x445));
      try {
        const _0x59ef5f = [
            "aztec",
            _0xf86558(0x46b),
            "code_39",
            "code_93",
            _0xf86558(0x4b9),
            _0xf86558(0x434),
            _0xf86558(0x28b),
            _0xf86558(0x34b),
            _0xf86558(0x25c),
            "pdf417",
            _0xf86558(0x28e),
            _0xf86558(0x381),
            _0xf86558(0x34a),
          ],
          _0x28343e = new BarcodeDetector({ formats: _0x59ef5f }),
          _0xc4f153 = await _0x28343e[_0xf86558(0x27a)](_0x31ea79);
        console[_0xf86558(0x413)](
          "🔍\x20Códigos\x20detectados\x20por\x20API\x20nativa:\x20" +
            _0xc4f153[_0xf86558(0x37d)],
          _0xc4f153
        );
        if (_0xc4f153[_0xf86558(0x37d)] > 0x0) {
          const _0x3b23de = _0xc4f153[_0xf86558(0x447)]((_0x4da951) => {
            const _0x11ed2a = _0xf86558,
              _0x2395a5 = _0x4da951["rawValue"]["trim"]();
            console["log"](
              "🔍\x20Validando:\x20\x22" +
                _0x2395a5 +
                _0x11ed2a(0x3ee) +
                _0x4da951[_0x11ed2a(0x448)] +
                _0x11ed2a(0x250) +
                _0x2395a5[_0x11ed2a(0x37d)]
            );
            switch (_0x4da951[_0x11ed2a(0x448)]) {
              case _0x11ed2a(0x28b):
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] === 0xd &&
                  /^\d{13}$/[_0x11ed2a(0x26e)](_0x2395a5)
                );
              case _0x11ed2a(0x381):
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] === 0xc &&
                  /^\d{12}$/[_0x11ed2a(0x26e)](_0x2395a5)
                );
              case _0x11ed2a(0x34b):
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] === 0x8 &&
                  /^\d{8}$/[_0x11ed2a(0x26e)](_0x2395a5)
                );
              case _0x11ed2a(0x34a):
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] >= 0x6 &&
                  _0x2395a5["length"] <= 0x8 &&
                  /^\d+$/[_0x11ed2a(0x26e)](_0x2395a5)
                );
              case _0x11ed2a(0x46b):
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] >= 0x1 &&
                  _0x2395a5[_0x11ed2a(0x37d)] <= 0x32
                );
              case _0x11ed2a(0x43f):
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] >= 0x1 &&
                  /^[A-Z0-9\-. $\/+%*]+$/["test"](_0x2395a5)
                );
              case _0x11ed2a(0x48c):
                return (
                  _0x2395a5["length"] >= 0x1 &&
                  _0x2395a5[_0x11ed2a(0x37d)] <= 0x32
                );
              case _0x11ed2a(0x4b9):
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] >= 0x3 &&
                  /^[A-D][0-9\-$:\/.\+]+[A-D]$/[_0x11ed2a(0x26e)](_0x2395a5)
                );
              case _0x11ed2a(0x25c):
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] >= 0x2 &&
                  _0x2395a5["length"] % 0x2 === 0x0 &&
                  /^\d+$/[_0x11ed2a(0x26e)](_0x2395a5)
                );
              case "qr_code":
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] >= 0x1 &&
                  _0x2395a5["length"] <= 0x10c8
                );
              case _0x11ed2a(0x434):
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] >= 0x1 &&
                  _0x2395a5[_0x11ed2a(0x37d)] <= 0xc2c
                );
              case _0x11ed2a(0x40a):
                return (
                  _0x2395a5["length"] >= 0x1 &&
                  _0x2395a5[_0x11ed2a(0x37d)] <= 0xa96
                );
              case _0x11ed2a(0x3a9):
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] >= 0x1 &&
                  _0x2395a5["length"] <= 0xef8
                );
              default:
                return (
                  _0x2395a5[_0x11ed2a(0x37d)] >= 0x1 &&
                  _0x2395a5[_0x11ed2a(0x37d)] <= 0x64
                );
            }
          });
          console["log"](_0xf86558(0x3db) + _0x3b23de[_0xf86558(0x37d)]);
          if (_0x3b23de[_0xf86558(0x37d)] > 0x0) {
            const _0x3039e9 = {
                ean_13: 0xa,
                upc_a: 0x9,
                ean_8: 0x8,
                upc_e: 0x7,
                code_128: 0x6,
                code_39: 0x5,
                code_93: 0x4,
                itf: 0x3,
                codabar: 0x2,
                qr_code: 0x1,
                data_matrix: 0x1,
                pdf417: 0x1,
                aztec: 0x1,
              },
              _0x4d1059 = _0x3b23de[_0xf86558(0x470)](
                (_0x3d3053, _0x4d165f) => {
                  const _0x20d373 = _0xf86558,
                    _0x1fab5a =
                      (_0x3039e9[_0x4d165f[_0x20d373(0x448)]] || 0x0) -
                      (_0x3039e9[_0x3d3053["format"]] || 0x0);
                  if (_0x1fab5a !== 0x0) return _0x1fab5a;
                  if (
                    [
                      _0x20d373(0x28b),
                      _0x20d373(0x381),
                      _0x20d373(0x34b),
                      _0x20d373(0x34a),
                      _0x20d373(0x46b),
                      _0x20d373(0x43f),
                      _0x20d373(0x48c),
                      _0x20d373(0x25c),
                      _0x20d373(0x4b9),
                    ][_0x20d373(0x37b)](_0x3d3053["format"])
                  ) {
                    const _0x460dd4 =
                        _0x3d3053[_0x20d373(0x2b9)][_0x20d373(0x40c)] *
                        _0x3d3053["boundingBox"]["height"],
                      _0x4857c7 =
                        _0x4d165f[_0x20d373(0x2b9)][_0x20d373(0x40c)] *
                        _0x4d165f["boundingBox"][_0x20d373(0x1f3)];
                    return _0x4857c7 - _0x460dd4;
                  }
                  const _0x47a1b0 =
                      _0x3d3053["boundingBox"]["x"] +
                      _0x3d3053[_0x20d373(0x2b9)][_0x20d373(0x40c)] / 0x2,
                    _0x5e1fb5 =
                      _0x4d165f[_0x20d373(0x2b9)]["x"] +
                      _0x4d165f[_0x20d373(0x2b9)][_0x20d373(0x40c)] / 0x2,
                    _0x4294f8 = _0x31ea79[_0x20d373(0x40c)] / 0x2;
                  return (
                    Math[_0x20d373(0x3e1)](_0x47a1b0 - _0x4294f8) -
                    Math[_0x20d373(0x3e1)](_0x5e1fb5 - _0x4294f8)
                  );
                }
              ),
              _0x308ed4 = _0x4d1059[0x0],
              _0x1cbb7d = _0x308ed4[_0xf86558(0x245)]
                [_0xf86558(0x255)]()
                [_0xf86558(0x4a1)](/\s+$/, "");
            console[_0xf86558(0x413)](
              "🎯\x20Mejor\x20código\x20seleccionado:\x20\x22" +
                _0x1cbb7d +
                _0xf86558(0x28f) +
                _0x308ed4[_0xf86558(0x448)] +
                ")"
            ),
              (inputCodigo["value"] = _0x1cbb7d),
              form[_0xf86558(0x24b)](),
              URL[_0xf86558(0x2f1)](_0x31ea79["src"]),
              (fileInput["value"] = "");
            return;
          }
        }
        console[_0xf86558(0x413)](_0xf86558(0x2fc));
      } catch (_0x3e02e7) {
        console[_0xf86558(0x413)](_0xf86558(0x44c), _0x3e02e7);
      }
    } else
      console[_0xf86558(0x413)](
        "⚠️\x20BarcodeDetector\x20no\x20disponible\x20en\x20este\x20navegador"
      );
    console["log"](_0xf86558(0x478)), usarQuaggaFallback(_0x31ea79);
  } catch (_0x211aee) {
    console[_0xf86558(0x258)]("Error\x20procesando\x20imagen:", _0x211aee),
      (resultadoDiv[_0xf86558(0x2ea)] = _0xf86558(0x38c)),
      renderHistorial(),
      (fileInput[_0xf86558(0x2c5)] = "");
  }
});
function usarQuaggaFallback(_0x44e9b9) {
  const _0x1a2999 = _0x765170;
  console[_0x1a2999(0x413)]("📸\x20Procesando\x20con\x20Quagga...");
  const _0x509015 = document["createElement"](_0x1a2999(0x406)),
    _0x79b452 = _0x509015[_0x1a2999(0x373)]("2d");
  let { width: _0x353703, height: _0x2b2eb6 } = _0x44e9b9;
  const _0x18d826 = 0x190;
  if (_0x353703 < _0x18d826 || _0x2b2eb6 < _0x18d826) {
    const _0x432427 =
      Math[_0x1a2999(0x267)](_0x18d826 / _0x353703, _0x18d826 / _0x2b2eb6) *
      1.5;
    (_0x353703 *= _0x432427),
      (_0x2b2eb6 *= _0x432427),
      console["log"](
        _0x1a2999(0x2b7) +
          _0x44e9b9[_0x1a2999(0x40c)] +
          "x" +
          _0x44e9b9[_0x1a2999(0x1f3)] +
          _0x1a2999(0x368) +
          _0x353703 +
          "x" +
          _0x2b2eb6
      );
  }
  const _0x4ac249 = 0x5dc;
  if (_0x353703 > _0x4ac249 || _0x2b2eb6 > _0x4ac249) {
    const _0x25311e = Math["min"](_0x4ac249 / _0x353703, _0x4ac249 / _0x2b2eb6);
    (_0x353703 *= _0x25311e), (_0x2b2eb6 *= _0x25311e);
  }
  (_0x509015[_0x1a2999(0x40c)] = _0x353703),
    (_0x509015[_0x1a2999(0x1f3)] = _0x2b2eb6),
    (_0x79b452[_0x1a2999(0x25a)] = ![]),
    _0x79b452[_0x1a2999(0x45d)](_0x44e9b9, 0x0, 0x0, _0x353703, _0x2b2eb6);
  const _0xb37484 = _0x79b452[_0x1a2999(0x35d)](0x0, 0x0, _0x353703, _0x2b2eb6),
    _0x11bd8c = _0xb37484["data"];
  let _0x4cc13d = new Array(0x100)[_0x1a2999(0x25d)](0x0);
  for (
    let _0x33a01b = 0x0;
    _0x33a01b < _0x11bd8c[_0x1a2999(0x37d)];
    _0x33a01b += 0x4
  ) {
    const _0x534695 = Math[_0x1a2999(0x2d7)](
      0.299 * _0x11bd8c[_0x33a01b] +
        0.587 * _0x11bd8c[_0x33a01b + 0x1] +
        0.114 * _0x11bd8c[_0x33a01b + 0x2]
    );
    _0x4cc13d[_0x534695]++;
  }
  let _0x33e8a6 = 0x80,
    _0x255b84 = 0x0;
  const _0x321285 = _0x353703 * _0x2b2eb6;
  for (let _0x30c668 = 0x0; _0x30c668 < 0x100; _0x30c668++) {
    let _0x3bb77e = 0x0,
      _0x4aaade = 0x0,
      _0x4d426e = 0x0,
      _0x223804 = 0x0;
    for (let _0x1c935c = 0x0; _0x1c935c <= _0x30c668; _0x1c935c++) {
      (_0x3bb77e += _0x4cc13d[_0x1c935c]),
        (_0x4d426e += _0x1c935c * _0x4cc13d[_0x1c935c]);
    }
    for (let _0x45b648 = _0x30c668 + 0x1; _0x45b648 < 0x100; _0x45b648++) {
      (_0x4aaade += _0x4cc13d[_0x45b648]),
        (_0x223804 += _0x45b648 * _0x4cc13d[_0x45b648]);
    }
    if (_0x3bb77e === 0x0 || _0x4aaade === 0x0) continue;
    const _0x4c90ae = _0x4d426e / _0x3bb77e,
      _0x4c92f9 = _0x223804 / _0x4aaade,
      _0x4fbc57 =
        _0x3bb77e *
        _0x4aaade *
        (_0x4c90ae - _0x4c92f9) *
        (_0x4c90ae - _0x4c92f9);
    _0x4fbc57 > _0x255b84 && ((_0x255b84 = _0x4fbc57), (_0x33e8a6 = _0x30c668));
  }
  console[_0x1a2999(0x413)](_0x1a2999(0x394) + _0x33e8a6);
  const _0x31e05e = new Uint8ClampedArray(_0x11bd8c);
  for (let _0xb7cf9b = 0x0; _0xb7cf9b < _0x11bd8c["length"]; _0xb7cf9b += 0x4) {
    const _0xb60e76 = Math[_0x1a2999(0x2d7)](
        0.299 * _0x11bd8c[_0xb7cf9b] +
          0.587 * _0x11bd8c[_0xb7cf9b + 0x1] +
          0.114 * _0x11bd8c[_0xb7cf9b + 0x2]
      ),
      _0x3480a2 = _0xb60e76 > _0x33e8a6 ? 0xff : 0x0;
    (_0x11bd8c[_0xb7cf9b] = _0x3480a2),
      (_0x11bd8c[_0xb7cf9b + 0x1] = _0x3480a2),
      (_0x11bd8c[_0xb7cf9b + 0x2] = _0x3480a2);
  }
  _0x79b452[_0x1a2999(0x246)](_0xb37484, 0x0, 0x0);
  let _0x3831a8 = _0x509015[_0x1a2999(0x277)](_0x1a2999(0x229));
  const _0x21b886 = _0x79b452["createImageData"](_0x353703, _0x2b2eb6),
    _0x2eefda = _0x21b886[_0x1a2999(0x3b3)];
  for (
    let _0x522148 = 0x0;
    _0x522148 < _0x31e05e[_0x1a2999(0x37d)];
    _0x522148 += 0x4
  ) {
    const _0x585bf8 = Math[_0x1a2999(0x2d7)](
        0.299 * _0x31e05e[_0x522148] +
          0.587 * _0x31e05e[_0x522148 + 0x1] +
          0.114 * _0x31e05e[_0x522148 + 0x2]
      ),
      _0x398e53 = _0x585bf8 > _0x33e8a6 * 0.7 ? 0xff : 0x0;
    (_0x2eefda[_0x522148] = _0x398e53),
      (_0x2eefda[_0x522148 + 0x1] = _0x398e53),
      (_0x2eefda[_0x522148 + 0x2] = _0x398e53),
      (_0x2eefda[_0x522148 + 0x3] = 0xff);
  }
  const _0x4cd1bf = document["createElement"](_0x1a2999(0x406));
  (_0x4cd1bf[_0x1a2999(0x40c)] = _0x353703),
    (_0x4cd1bf[_0x1a2999(0x1f3)] = _0x2b2eb6);
  const _0x3f1657 = _0x4cd1bf[_0x1a2999(0x373)]("2d");
  _0x3f1657[_0x1a2999(0x246)](_0x21b886, 0x0, 0x0);
  const _0xaade35 = _0x4cd1bf["toDataURL"](_0x1a2999(0x229)),
    _0xbc40ab = {
      src: _0x3831a8,
      numOfWorkers: 0x0,
      locate: !![],
      inputStream: { size: Math[_0x1a2999(0x267)](_0x353703, _0x2b2eb6) },
      locator: {
        patchSize: _0x1a2999(0x22a),
        halfSample: ![],
        debug: {
          showCanvas: ![],
          showPatches: ![],
          showFoundPatches: ![],
          showSkeleton: ![],
          showLabels: ![],
          showPatchLabels: ![],
          showRemainingPatchLabels: ![],
          boxFromPatches: {
            showTransformed: ![],
            showTransformedBox: ![],
            showBB: ![],
          },
        },
      },
      decoder: {
        readers: [
          _0x1a2999(0x493),
          _0x1a2999(0x20f),
          "upc_reader",
          _0x1a2999(0x299),
          _0x1a2999(0x458),
          _0x1a2999(0x32a),
          _0x1a2999(0x329),
          "code_93_reader",
          _0x1a2999(0x432),
          _0x1a2999(0x46e),
          _0x1a2999(0x2e1),
        ],
        multiple: !![],
        debug: { drawBoundingBox: ![], showFrequency: ![], showPattern: ![] },
      },
    };
  console[_0x1a2999(0x413)](_0x1a2999(0x287));
  const _0x3fa038 = (_0x47ab18, _0x3ce582, _0x134219) => {
    const _0x5c870b = _0x1a2999;
    console[_0x5c870b(0x413)](_0x5c870b(0x20c) + _0x3ce582);
    const _0x30d47d = {
      src: _0x47ab18,
      numOfWorkers: 0x0,
      locate: !![],
      inputStream: { size: Math["max"](_0x353703, _0x2b2eb6) },
      locator: {
        patchSize: _0x3ce582 === "agresiva" ? _0x5c870b(0x1f2) : "large",
        halfSample: _0x3ce582 === "alternativa" ? !![] : ![],
        debug: { showCanvas: ![], showPatches: ![], showFoundPatches: ![] },
      },
      decoder: {
        readers: [
          "ean_reader",
          _0x5c870b(0x20f),
          _0x5c870b(0x2b6),
          "upc_e_reader",
          _0x5c870b(0x458),
          _0x5c870b(0x32a),
          "code_39_vin_reader",
          "code_93_reader",
          _0x5c870b(0x432),
          _0x5c870b(0x46e),
        ],
        multiple: !![],
        debug: { drawBoundingBox: ![], showFrequency: ![], showPattern: ![] },
      },
    };
    Quagga[_0x5c870b(0x357)](_0x30d47d, _0x134219);
  };
  let _0x2f4398 = [];
  _0x3fa038(_0x3831a8, _0x1a2999(0x301), function (_0x55f789) {
    const _0x35a6d1 = _0x1a2999;
    if (_0x55f789 && _0x55f789[_0x35a6d1(0x455)]) {
      let _0x5b177c = _0x55f789[_0x35a6d1(0x455)][_0x35a6d1(0x2a9)]
        [_0x35a6d1(0x255)]()
        [_0x35a6d1(0x4a1)](/\s+$/, "");
      _0x2f4398[_0x35a6d1(0x424)](
        _0x5b177c +
          "\x20(" +
          _0x55f789[_0x35a6d1(0x455)][_0x35a6d1(0x448)] +
          ")"
      ),
        console[_0x35a6d1(0x413)](
          _0x35a6d1(0x30b),
          _0x5b177c,
          _0x35a6d1(0x342),
          _0x55f789["codeResult"][_0x35a6d1(0x448)]
        );
      if (
        validarCodigo(_0x5b177c, _0x55f789[_0x35a6d1(0x455)][_0x35a6d1(0x448)])
      ) {
        (inputCodigo[_0x35a6d1(0x2c5)] = _0x5b177c),
          form[_0x35a6d1(0x24b)](),
          URL["revokeObjectURL"](_0x44e9b9[_0x35a6d1(0x345)]),
          (fileInput["value"] = "");
        return;
      }
    }
    console["log"](_0x35a6d1(0x2da)),
      _0x3fa038(_0xaade35, _0x35a6d1(0x224), function (_0x3ec1d2) {
        const _0x5de01b = _0x35a6d1;
        if (_0x3ec1d2 && _0x3ec1d2[_0x5de01b(0x455)]) {
          let _0x13ea0c = _0x3ec1d2[_0x5de01b(0x455)][_0x5de01b(0x2a9)]
            ["trim"]()
            ["replace"](/\s+$/, "");
          _0x2f4398[_0x5de01b(0x424)](
            _0x13ea0c +
              "\x20(" +
              _0x3ec1d2[_0x5de01b(0x455)][_0x5de01b(0x448)] +
              ")"
          ),
            console[_0x5de01b(0x413)](
              _0x5de01b(0x1ed),
              _0x13ea0c,
              "Formato:",
              _0x3ec1d2["codeResult"][_0x5de01b(0x448)]
            );
          if (
            validarCodigo(_0x13ea0c, _0x3ec1d2["codeResult"][_0x5de01b(0x448)])
          ) {
            (inputCodigo["value"] = _0x13ea0c),
              form[_0x5de01b(0x24b)](),
              URL[_0x5de01b(0x2f1)](_0x44e9b9[_0x5de01b(0x345)]),
              (fileInput[_0x5de01b(0x2c5)] = "");
            return;
          }
        }
        console["log"](_0x5de01b(0x30f)),
          intentarSegundaPasada(_0x44e9b9, _0x2f4398);
      });
  });
}
function validarCodigo(_0x5a61b2, _0x1c6c3f) {
  const _0x327f21 = _0x765170;
  console[_0x327f21(0x413)](
    _0x327f21(0x466) +
      _0x5a61b2 +
      _0x327f21(0x3ee) +
      _0x1c6c3f +
      _0x327f21(0x250) +
      _0x5a61b2["length"]
  );
  switch (_0x1c6c3f) {
    case _0x327f21(0x28b):
      return (
        _0x5a61b2[_0x327f21(0x37d)] === 0xd &&
        /^\d{13}$/[_0x327f21(0x26e)](_0x5a61b2)
      );
    case _0x327f21(0x381):
      return (
        _0x5a61b2[_0x327f21(0x37d)] === 0xc &&
        /^\d{12}$/[_0x327f21(0x26e)](_0x5a61b2)
      );
    case "ean_8":
      return (
        _0x5a61b2["length"] === 0x8 && /^\d{8}$/[_0x327f21(0x26e)](_0x5a61b2)
      );
    case _0x327f21(0x34a):
      return (
        _0x5a61b2[_0x327f21(0x37d)] >= 0x6 &&
        _0x5a61b2[_0x327f21(0x37d)] <= 0x8 &&
        /^\d+$/[_0x327f21(0x26e)](_0x5a61b2)
      );
    case _0x327f21(0x46b):
    case _0x327f21(0x43f):
    case _0x327f21(0x48c):
      return (
        _0x5a61b2[_0x327f21(0x37d)] >= 0x1 &&
        _0x5a61b2[_0x327f21(0x37d)] <= 0x32
      );
    case _0x327f21(0x4b9):
      return (
        _0x5a61b2[_0x327f21(0x37d)] >= 0x3 &&
        /^[A-D][0-9\-$:\/.\+]+[A-D]$/[_0x327f21(0x26e)](_0x5a61b2)
      );
    case _0x327f21(0x28c):
      return (
        _0x5a61b2["length"] >= 0x2 &&
        _0x5a61b2[_0x327f21(0x37d)] % 0x2 === 0x0 &&
        /^\d+$/[_0x327f21(0x26e)](_0x5a61b2)
      );
    default:
      return _0x5a61b2[_0x327f21(0x37d)] >= 0x1 && _0x5a61b2["length"] <= 0x32;
  }
}
function intentarSegundaPasada(_0x2d640e, _0x5a083f = []) {
  const _0x590a72 = _0x765170;
  console[_0x590a72(0x413)](_0x590a72(0x2a3));
  const _0xb3b973 = document[_0x590a72(0x47a)](_0x590a72(0x406)),
    _0x3b95eb = _0xb3b973[_0x590a72(0x373)]("2d");
  let { width: _0x54c512, height: _0xd6f1b2 } = _0x2d640e;
  const _0x57c1b0 = 0x640;
  if (_0x54c512 < _0x57c1b0) {
    const _0x3a5c97 = _0x57c1b0 / _0x54c512;
    (_0x54c512 *= _0x3a5c97), (_0xd6f1b2 *= _0x3a5c97);
  }
  (_0xb3b973[_0x590a72(0x40c)] = _0x54c512),
    (_0xb3b973[_0x590a72(0x1f3)] = _0xd6f1b2),
    (_0x3b95eb[_0x590a72(0x25a)] = ![]),
    _0x3b95eb[_0x590a72(0x45d)](_0x2d640e, 0x0, 0x0, _0x54c512, _0xd6f1b2);
  const _0x10e084 = _0x3b95eb[_0x590a72(0x35d)](0x0, 0x0, _0x54c512, _0xd6f1b2),
    _0x1471cd = _0x10e084[_0x590a72(0x3b3)];
  for (
    let _0x4c970c = 0x0;
    _0x4c970c < _0x1471cd[_0x590a72(0x37d)];
    _0x4c970c += 0x4
  ) {
    const _0x561dca = _0x1471cd[_0x4c970c],
      _0x1cce5d = _0x1471cd[_0x4c970c + 0x1],
      _0x23d83a = _0x1471cd[_0x4c970c + 0x2],
      _0xd12d5a = 1.5,
      _0x5a763c = Math["round"](
        0.299 * _0x561dca + 0.587 * _0x1cce5d + 0.114 * _0x23d83a
      ),
      _0x3a50d3 = Math[_0x590a72(0x356)](
        0xff,
        Math["max"](0x0, (_0x5a763c - 0x80) * _0xd12d5a + 0x80)
      );
    (_0x1471cd[_0x4c970c] = _0x3a50d3),
      (_0x1471cd[_0x4c970c + 0x1] = _0x3a50d3),
      (_0x1471cd[_0x4c970c + 0x2] = _0x3a50d3);
  }
  _0x3b95eb[_0x590a72(0x246)](_0x10e084, 0x0, 0x0);
  const _0xd8227c = {
    src: _0xb3b973[_0x590a72(0x277)](_0x590a72(0x229)),
    numOfWorkers: 0x0,
    locate: !![],
    inputStream: {
      size: Math[_0x590a72(0x267)](_0x54c512, _0xd6f1b2),
      area: { top: "0%", right: "0%", left: "0%", bottom: "0%" },
    },
    locator: {
      patchSize: _0x590a72(0x1f2),
      halfSample: ![],
      debug: { showCanvas: ![], showPatches: ![], showFoundPatches: ![] },
    },
    decoder: {
      readers: [
        "ean_reader",
        "upc_reader",
        _0x590a72(0x458),
        "code_39_reader",
        _0x590a72(0x20f),
        _0x590a72(0x299),
        _0x590a72(0x46e),
        _0x590a72(0x432),
      ],
      multiple: !![],
      debug: { drawBoundingBox: ![], showFrequency: ![], showPattern: ![] },
    },
  };
  console["log"](_0x590a72(0x29a)),
    Quagga[_0x590a72(0x357)](_0xd8227c, function (_0x221bcd) {
      const _0x23cb6a = _0x590a72;
      if (_0x221bcd && _0x221bcd[_0x23cb6a(0x455)]) {
        const _0x3afbb6 = _0x221bcd[_0x23cb6a(0x455)][_0x23cb6a(0x2a9)]
          ["trim"]()
          [_0x23cb6a(0x4a1)](/\s+$/, "");
        _0x5a083f[_0x23cb6a(0x424)](
          _0x3afbb6 +
            "\x20(" +
            _0x221bcd[_0x23cb6a(0x455)][_0x23cb6a(0x448)] +
            ")"
        ),
          console[_0x23cb6a(0x413)](
            "✅\x20Tercera\x20tentativa\x20exitosa:",
            _0x3afbb6,
            _0x23cb6a(0x342),
            _0x221bcd["codeResult"][_0x23cb6a(0x448)]
          );
        if (
          validarCodigo(
            _0x3afbb6,
            _0x221bcd[_0x23cb6a(0x455)][_0x23cb6a(0x448)]
          )
        ) {
          (inputCodigo[_0x23cb6a(0x2c5)] = _0x3afbb6), form[_0x23cb6a(0x24b)]();
          return;
        }
      }
      console[_0x23cb6a(0x413)](
        "❌\x20Todas\x20las\x20configuraciones\x20fallaron"
      );
      let _0xd28ce3 = "";
      _0x5a083f[_0x23cb6a(0x37d)] > 0x0 &&
        (_0xd28ce3 = _0x23cb6a(0x20a) + _0x5a083f[_0x23cb6a(0x36e)](",\x20"));
      let _0x1b6036 = "";
      if (GOOGLE_VISION_CONFIG[_0x23cb6a(0x344)]) {
        const _0x5ba8cc = visionUsageTracker[_0x23cb6a(0x3ad)]();
        (_0x1b6036 =
          _0x23cb6a(0x476) +
          _0x5ba8cc["monthlyUsed"] +
          "/" +
          _0x5ba8cc["monthlyLimit"] +
          _0x23cb6a(0x496) +
          _0x5ba8cc[_0x23cb6a(0x326)] +
          "/" +
          _0x5ba8cc[_0x23cb6a(0x3b0)] +
          _0x23cb6a(0x30a)),
          verificarBackend()
            [_0x23cb6a(0x461)]((_0x347f3e) => {
              const _0x52b061 = _0x23cb6a;
              if (document[_0x52b061(0x39b)](_0x52b061(0x272))) {
                const _0x1a5eae = document["querySelector"](_0x52b061(0x272));
                _0x1a5eae &&
                  (_0x1a5eae["innerHTML"] = _0x1a5eae[_0x52b061(0x2ea)][
                    _0x52b061(0x4a1)
                  ](_0x52b061(0x2c0), _0x52b061(0x2de) + _0x347f3e["mensaje"]));
              }
            })
            ["catch"](() => {});
      }
      (resultadoDiv[_0x23cb6a(0x2ea)] =
        _0x23cb6a(0x37c) + _0xd28ce3 + _0x1b6036 + _0x23cb6a(0x3aa)),
        renderHistorial();
    });
}
async function mostrarConfiguracion() {
  const _0x4bd91e = _0x765170,
    _0x1a0dcd = await verificarBackend();
  let _0xef3a2a = null;
  if (CONFIG_ENDPOINTS[_0x4bd91e(0x46f)])
    try {
      const _0x3f2358 = await fetch(
        CONFIG_ENDPOINTS["productosConCodigos"] + _0x4bd91e(0x23e)
      );
      if (_0x3f2358["ok"]) {
        const _0x4e8f48 = await _0x3f2358[_0x4bd91e(0x497)]();
        _0xef3a2a = _0x4e8f48[_0x4bd91e(0x3fd)];
      }
    } catch (_0x48d7b5) {
      console[_0x4bd91e(0x413)](_0x4bd91e(0x360));
    }
  let _0x434d81 = "";
  _0xef3a2a &&
    (_0x434d81 =
      "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>🏷️\x20Sistema\x20de\x20Códigos\x20de\x20Barras:</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20•\x20<strong>Productos:</strong>\x20" +
      _0xef3a2a["totalProductos"] +
      _0x4bd91e(0x469) +
      _0xef3a2a[_0x4bd91e(0x495)] +
      _0x4bd91e(0x3ab) +
      _0xef3a2a["productosConCodigosAdicionales"] +
      "<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20•\x20<strong>Actualizado:</strong>\x20" +
      new Date(_0xef3a2a[_0x4bd91e(0x3f0)])[_0x4bd91e(0x408)]() +
      _0x4bd91e(0x362)),
    Swal["fire"]({
      title: _0x4bd91e(0x239),
      html:
        _0x4bd91e(0x383) +
        (GOOGLE_VISION_CONFIG[_0x4bd91e(0x344)] ? _0x4bd91e(0x423) : "") +
        _0x4bd91e(0x402) +
        (_0x1a0dcd[_0x4bd91e(0x44a)] ? "alert-success" : _0x4bd91e(0x355)) +
        _0x4bd91e(0x282) +
        _0x1a0dcd[_0x4bd91e(0x2d1)] +
        _0x4bd91e(0x242) +
        _0x434d81 +
        "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!--\x20Área\x20para\x20mostrar\x20resultados\x20del\x20diagnóstico\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diagnostico-resultado\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>💡\x20Detección\x20de\x20Códigos\x20de\x20Barras:</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20•\x20📷\x20<strong>Local:</strong>\x20Html5QrCode\x20+\x20BarcodeDetector\x20+\x20Quagga.js<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20•\x20🌐\x20<strong>Premium:</strong>\x20Google\x20Vision\x20API\x20(para\x20códigos\x20difíciles)<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20•\x20🔄\x20<strong>Automático:</strong>\x20Fallback\x20inteligente\x20entre\x20métodos\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-success\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>✅\x20Ventajas\x20del\x20backend:</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20•\x20Sin\x20límites\x20por\x20dispositivo<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20•\x20Detección\x20superior\x20en\x20superficies\x20reflectivas<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20•\x20Mejor\x20precisión\x20con\x20códigos\x20largos<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20•\x20Funciona\x20con\x20imágenes\x20de\x20baja\x20calidad<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20•\x20Gestión\x20centralizada\x20de\x20recursos\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>🔄\x20Fallback\x20automático:</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Si\x20el\x20backend\x20no\x20está\x20disponible,\x20la\x20app\x20usará\x20detección\x20local\x20automáticamente.\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-muted\x20small\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>💡\x20Recomendación:</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Mantén\x20activada\x20la\x20detección\x20avanzada\x20para\x20mejores\x20resultados.\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20",
      width: 0x258,
      showCancelButton: !![],
      confirmButtonText: _0x4bd91e(0x26d),
      cancelButtonText: _0x4bd91e(0x29d),
      confirmButtonColor: _0x4bd91e(0x4a6),
      cancelButtonColor: _0x4bd91e(0x456),
      preConfirm: () => {
        const _0x13cc5f = _0x4bd91e,
          _0x4e9144 =
            document[_0x13cc5f(0x2ce)]("enabledCheck")[_0x13cc5f(0x423)];
        return { enabled: _0x4e9144 };
      },
    })["then"]((_0x40191e) => {
      const _0x25bd9e = _0x4bd91e;
      if (_0x40191e["isConfirmed"]) {
        const { enabled: _0x58e66f } = _0x40191e[_0x25bd9e(0x2c5)];
        (GOOGLE_VISION_CONFIG[_0x25bd9e(0x344)] = _0x58e66f),
          localStorage[_0x25bd9e(0x266)](
            "googleVisionConfig",
            JSON[_0x25bd9e(0x2b3)]({ enabled: _0x58e66f })
          );
        const _0x2e28cc = _0x58e66f ? _0x25bd9e(0x1ec) : _0x25bd9e(0x2af);
        Swal[_0x25bd9e(0x2e8)]({
          title: _0x25bd9e(0x240),
          text: _0x2e28cc,
          icon: _0x25bd9e(0x292),
          timer: 0x7d0,
          showConfirmButton: ![],
        });
      }
    });
}
function cargarConfiguracionGuardada() {
  const _0x4ca8bc = _0x765170,
    _0x3b9724 = localStorage[_0x4ca8bc(0x341)](_0x4ca8bc(0x21e));
  if (_0x3b9724)
    try {
      const _0x9a6abf = JSON[_0x4ca8bc(0x336)](_0x3b9724);
      (GOOGLE_VISION_CONFIG["enabled"] = _0x9a6abf[_0x4ca8bc(0x344)] || ![]),
        GOOGLE_VISION_CONFIG[_0x4ca8bc(0x344)] &&
          console[_0x4ca8bc(0x413)](
            "✅\x20Detección\x20avanzada\x20(backend)\x20configurada\x20y\x20activa"
          );
    } catch (_0x157d67) {
      console[_0x4ca8bc(0x413)](
        "❌\x20Error\x20cargando\x20configuración:",
        _0x157d67
      );
    }
}
"serviceWorker" in navigator &&
  window[_0x765170(0x41e)]("load", () => {
    const _0x5b9b1f = _0x765170;
    navigator[_0x5b9b1f(0x253)]
      [_0x5b9b1f(0x300)](_0x5b9b1f(0x38d))
      [_0x5b9b1f(0x461)]((_0x51905a) => {
        const _0x1f1295 = _0x5b9b1f;
        console[_0x1f1295(0x413)](
          "✅\x20Service\x20Worker\x20registrado:",
          _0x51905a[_0x1f1295(0x2bd)]
        ),
          _0x51905a["addEventListener"](_0x1f1295(0x34f), () => {
            const _0x32e11f = _0x1f1295;
            console[_0x32e11f(0x413)](_0x32e11f(0x387));
            const _0x1adf97 = _0x51905a[_0x32e11f(0x482)];
            _0x1adf97[_0x32e11f(0x41e)]("statechange", () => {
              const _0x10c5b1 = _0x32e11f;
              _0x1adf97[_0x10c5b1(0x200)] === _0x10c5b1(0x49a) &&
                navigator["serviceWorker"][_0x10c5b1(0x340)] &&
                (console["log"](
                  "🆕\x20Nueva\x20versión\x20lista\x20para\x20usar"
                ),
                confirm(
                  "Nueva\x20versión\x20disponible.\x20¿Recargar\x20la\x20página?"
                ) &&
                  (_0x1adf97[_0x10c5b1(0x4ac)]({ type: _0x10c5b1(0x3cc) }),
                  window["location"][_0x10c5b1(0x3f2)]()));
            });
          });
      })
      ["catch"]((_0x3884b5) =>
        console[_0x5b9b1f(0x258)](_0x5b9b1f(0x27d), _0x3884b5)
      ),
      navigator[_0x5b9b1f(0x253)][_0x5b9b1f(0x41e)](_0x5b9b1f(0x366), () => {
        const _0x431657 = _0x5b9b1f;
        console[_0x431657(0x413)]("🔄\x20Service\x20Worker\x20actualizado"),
          window[_0x431657(0x315)]["reload"]();
      });
  });
window[_0x765170(0x41e)](_0x765170(0x30d), (_0x4704e1) => {
  const _0x25c74b = _0x765170;
  _0x4704e1[_0x25c74b(0x481)](),
    (deferredPrompt = _0x4704e1),
    installBtn &&
      installBtn[_0x25c74b(0x2f0)][_0x25c74b(0x256)](_0x25c74b(0x49f));
}),
  installBtn[_0x765170(0x41e)](_0x765170(0x228), (_0x25fd74) => {
    deferredPrompt &&
      (deferredPrompt["prompt"](),
      deferredPrompt["userChoice"]["then"]((_0x2d7e89) => {
        const _0xa5accd = _0x3929;
        _0x2d7e89[_0xa5accd(0x3c3)] === "accepted"
          ? console[_0xa5accd(0x413)](_0xa5accd(0x4af))
          : console["log"](_0xa5accd(0x269)),
          (deferredPrompt = null),
          installBtn[_0xa5accd(0x2f0)][_0xa5accd(0x235)](_0xa5accd(0x49f));
      }));
  });
_0x765170(0x253) in navigator &&
  (navigator[_0x765170(0x253)]
    [_0x765170(0x3bf)]()
    [_0x765170(0x461)](function (_0x128e21) {
      const _0xd77829 = _0x765170;
      for (let _0x288a0a of _0x128e21) {
        _0x288a0a[_0xd77829(0x391)]();
      }
    }),
  navigator[_0x765170(0x253)][_0x765170(0x41e)](_0x765170(0x366), function () {
    const _0x10198e = _0x765170;
    window[_0x10198e(0x315)][_0x10198e(0x3f2)]();
  }));
const style = document[_0x765170(0x47a)](_0x765170(0x265));
(style["innerHTML"] = _0x765170(0x412)),
  document[_0x765170(0x32c)]["appendChild"](style);
async function verPromociones() {
  const _0x1df141 = _0x765170;
  try {
    console[_0x1df141(0x413)]("🎯\x20Consultando\x20promociones..."),
      (document[_0x1df141(0x2ce)](_0x1df141(0x33e))["innerHTML"] =
        _0x1df141(0x29c));
    const [_0x38bd6c, _0x2a9c46] = await Promise[_0x1df141(0x45b)]([
      fetch(_0x1df141(0x41d)),
      getAllProductos(),
    ]);
    if (!_0x38bd6c["ok"])
      throw new Error(
        _0x1df141(0x2c9) +
          _0x38bd6c[_0x1df141(0x241)] +
          ":\x20" +
          _0x38bd6c[_0x1df141(0x2bc)]
      );
    const _0x366c47 = await _0x38bd6c["json"]();
    console[_0x1df141(0x413)]("📋\x20Datos\x20de\x20promociones:", _0x366c47);
    let _0x238253 = [];
    if (
      _0x366c47[_0x1df141(0x241)] === _0x1df141(0x417) &&
      _0x366c47[_0x1df141(0x2a5)]
    )
      _0x238253 = _0x366c47["promoResult"];
    else {
      if (Array[_0x1df141(0x263)](_0x366c47)) _0x238253 = _0x366c47;
      else throw new Error(_0x1df141(0x319));
    }
    if (_0x238253[_0x1df141(0x37d)] === 0x0) {
      document[_0x1df141(0x2ce)](_0x1df141(0x33e))[_0x1df141(0x2ea)] =
        _0x1df141(0x4b6);
      return;
    }
    let _0x32c9f5 = "<div\x20class=\x22row\x22>";
    _0x238253["forEach"]((_0x386167, _0x3a03db) => {
      const _0x3cc4ab = _0x1df141;
      let _0x4ccc54 = [];
      if (
        _0x386167[_0x3cc4ab(0x3c7)] &&
        Array["isArray"](_0x386167[_0x3cc4ab(0x3c7)])
      )
        _0x4ccc54 = _0x386167[_0x3cc4ab(0x3c7)];
      else
        _0x386167["pro_grupoProductos_primaria"] &&
          _0x386167[_0x3cc4ab(0x47e)][_0x3cc4ab(0x3e7)] &&
          (Array[_0x3cc4ab(0x263)](
            _0x386167[_0x3cc4ab(0x47e)][_0x3cc4ab(0x3e7)]
          )
            ? (_0x4ccc54 = _0x386167[_0x3cc4ab(0x47e)][_0x3cc4ab(0x3e7)])
            : (_0x4ccc54 = _0x386167[_0x3cc4ab(0x47e)][_0x3cc4ab(0x3e7)]
                ["split"]("\x20")
                [_0x3cc4ab(0x447)]((_0x2cb357) => _0x2cb357["trim"]())));
      const _0x33774f = _0x4ccc54[_0x3cc4ab(0x231)]((_0x15318a) => {
          return _0x2a9c46["find"](
            (_0x942f6c) => _0x942f6c["pr_sku"] === _0x15318a
          );
        })["filter"]((_0x2be478) => _0x2be478 !== undefined),
        _0x977b88 =
          _0x386167[_0x3cc4ab(0x3cd)] ||
          _0x386167[_0x3cc4ab(0x3ec)] ||
          _0x3cc4ab(0x441) + (_0x3a03db + 0x1),
        _0x49a1dc =
          _0x386167[_0x3cc4ab(0x257)] ||
          _0x386167[_0x3cc4ab(0x28a)] ||
          "No\x20especificado",
        _0x1e6a2c =
          _0x386167[_0x3cc4ab(0x396)] || _0x386167[_0x3cc4ab(0x2d1)] || "",
        _0x32b3aa = _0x386167["pro_cantidad_base"] || "",
        _0xcec849 = Number(_0x32b3aa) || 0x1;
      let _0x44c909 = 0x0;
      const _0x4fe692 = (_0x1e6a2c + "\x20" + _0x977b88)[_0x3cc4ab(0x1e9)](),
        _0x2cd2c6 = _0x4fe692[_0x3cc4ab(0x3d1)](/(\d+)\s*x\s*(\d+)/);
      if (_0x2cd2c6) _0x44c909 = Number(_0x2cd2c6[0x2]);
      else {
        const _0x54c6e9 = Number(_0x386167[_0x3cc4ab(0x3c5)]) || 0x0;
        _0x44c909 = _0x54c6e9 * _0xcec849;
      }
      let _0x56153d = 0x0,
        _0x5b6a0f = 0x0;
      if (_0x33774f[_0x3cc4ab(0x37d)] > 0x0 && _0x32b3aa && _0x44c909 > 0x0) {
        const _0x1981fd = _0x33774f[_0x3cc4ab(0x231)]((_0x17c452) => {
            const _0x57a314 = _0x3cc4ab;
            let _0x5d1db5 =
              Number(_0x17c452[_0x57a314(0x279)]) ||
              Number(_0x17c452["L1"]) ||
              0x0;
            return Math["round"](_0x5d1db5 * 1.16 * 0x64) / 0x64;
          }),
          _0x4b405c =
            _0x1981fd[_0x3cc4ab(0x379)](
              (_0x403ead, _0x488ad9) => _0x403ead + _0x488ad9,
              0x0
            ) / _0x1981fd["length"];
        (_0x56153d =
          Math[_0x3cc4ab(0x2d7)](_0x4b405c * _0xcec849 * 0x64) / 0x64),
          (_0x5b6a0f =
            Math[_0x3cc4ab(0x2d7)]((_0x56153d - _0x44c909) * 0x64) / 0x64);
      }
      let _0x3c0f0a = "";
      if (_0x33774f["length"] > 0x0) {
        const _0x41d00a = _0x33774f["slice"](0x0, 0x4)
          [_0x3cc4ab(0x231)]((_0x39fcde) => {
            const _0x5cf546 = _0x3cc4ab;
            let _0x255596 = "";
            if (
              _0x39fcde[_0x5cf546(0x296)] &&
              _0x39fcde[_0x5cf546(0x296)][_0x5cf546(0x255)]() !== ""
            ) {
              if (_0x39fcde[_0x5cf546(0x296)]["startsWith"]("http"))
                _0x255596 = _0x39fcde[_0x5cf546(0x296)];
              else {
                let _0x44f453 = _0x39fcde[_0x5cf546(0x296)][_0x5cf546(0x416)](
                  "/"
                )
                  ? _0x39fcde[_0x5cf546(0x296)]
                  : "/" + _0x39fcde[_0x5cf546(0x296)];
                _0x255596 = "https://media.megaservicio.net" + _0x44f453;
              }
            }
            return _0x255596
              ? _0x5cf546(0x358) +
                  _0x255596 +
                  _0x5cf546(0x3c1) +
                  _0x39fcde[_0x5cf546(0x220)] +
                  _0x5cf546(0x35a) +
                  _0x39fcde[_0x5cf546(0x220)] +
                  _0x5cf546(0x334) +
                  _0x39fcde[_0x5cf546(0x3e7)] +
                  "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-outline-primary\x20btn-sm\x20copiar-sku-btn\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-sku=\x22" +
                  _0x39fcde["pr_sku"] +
                  "\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22font-size:\x200.6rem;\x20padding:\x201px\x204px;\x20border-radius:\x203px;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22Copiar\x20SKU\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20📋\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20"
              : "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-6\x20col-md-3\x20mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card\x20border-0\x20bg-light\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-img-top\x20d-flex\x20align-items-center\x20justify-content-center\x20bg-secondary\x22\x20style=\x22height:\x2080px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-white\x22>📦</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-body\x20p-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x22text-muted\x20d-block\x20text-truncate\x22\x20style=\x22font-size:\x200.7rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20" +
                  _0x39fcde["pr_name"] +
                  _0x5cf546(0x334) +
                  _0x39fcde["pr_sku"] +
                  _0x5cf546(0x2eb) +
                  _0x39fcde["pr_sku"] +
                  _0x5cf546(0x45c);
          })
          [_0x3cc4ab(0x36e)]("");
        _0x3c0f0a =
          "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6\x20class=\x22text-muted\x20mb-2\x22>📦\x20Productos\x20en\x20promoción:</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20" +
          _0x41d00a +
          _0x3cc4ab(0x463) +
          (_0x33774f[_0x3cc4ab(0x37d)] > 0x4
            ? _0x3cc4ab(0x488) +
              (_0x33774f["length"] - 0x4) +
              "\x20producto" +
              (_0x33774f[_0x3cc4ab(0x37d)] - 0x4 > 0x1 ? "s" : "") +
              _0x3cc4ab(0x363)
            : "") +
          "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20";
      }
      _0x32c9f5 +=
        "\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-md-6\x20mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card\x20h-100\x20border-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h6\x20class=\x22card-title\x20text-warning\x20d-flex\x20align-items-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20🔥\x20" +
        _0x977b88 +
        "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22badge\x20bg-warning\x20text-dark\x22>" +
        _0x49a1dc[_0x3cc4ab(0x4a1)](_0x3cc4ab(0x2db), _0x3cc4ab(0x271)) +
        _0x3cc4ab(0x3a7) +
        (_0x1e6a2c && _0x1e6a2c !== _0x977b88
          ? "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22card-text\x20text-muted\x20small\x22>" +
            _0x1e6a2c +
            _0x3cc4ab(0x39f)
          : "") +
        _0x3cc4ab(0x346) +
        (_0x44c909 > 0x0
          ? _0x3cc4ab(0x1f1) +
            _0xcec849 +
            _0x3cc4ab(0x365) +
            _0x44c909["toLocaleString"](_0x3cc4ab(0x480)) +
            _0x3cc4ab(0x2dc) +
            (_0x56153d > 0x0
              ? _0x3cc4ab(0x1f5) +
                _0x56153d[_0x3cc4ab(0x408)](_0x3cc4ab(0x480)) +
                _0x3cc4ab(0x427)
              : _0x3cc4ab(0x487)) +
            "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20" +
            (_0x5b6a0f > 0x0
              ? "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22badge\x20bg-success\x22\x20style=\x22font-size:\x200.9rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20💰\x20Ahorras\x20$" +
                _0x5b6a0f["toLocaleString"]("es-CL") +
                _0x3cc4ab(0x2e4) +
                _0xcec849 +
                _0x3cc4ab(0x35f)
              : "") +
            "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20"
          : "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22row\x20text-center\x20mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20" +
            (_0x32b3aa ? _0x3cc4ab(0x3ca) + _0x32b3aa + _0x3cc4ab(0x21c) : "") +
            _0x3cc4ab(0x437) +
            (precioPromo
              ? _0x3cc4ab(0x443) + precioPromo + _0x3cc4ab(0x2c7)
              : "") +
            "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20") +
        _0x3cc4ab(0x346) +
        _0x3c0f0a +
        _0x3cc4ab(0x346) +
        (_0x33774f[_0x3cc4ab(0x37d)] > 0x0
          ? _0x3cc4ab(0x4a0) +
            _0x33774f["map"](
              (_0x4c1594, _0x34304c) =>
                _0x3cc4ab(0x2b2) +
                (_0x34304c < _0x33774f["length"] - 0x1
                  ? "border-bottom\x20pb-3"
                  : "") +
                _0x3cc4ab(0x3ed) +
                _0x4c1594[_0x3cc4ab(0x220)] +
                _0x3cc4ab(0x473) +
                _0x4c1594["pr_sku"] +
                _0x3cc4ab(0x1f6) +
                (_0x4c1594[_0x3cc4ab(0x367)]
                  ? _0x3cc4ab(0x247) +
                    _0x4c1594[_0x3cc4ab(0x367)] +
                    _0x3cc4ab(0x2b4)
                  : "") +
                _0x3cc4ab(0x327) +
                (() => {
                  const _0x59d6ec = _0x3cc4ab;
                  let _0x25548c =
                      Number(_0x4c1594[_0x59d6ec(0x279)]) ||
                      Number(_0x4c1594["L1"]) ||
                      0x0,
                    _0x3bae3d = Math["round"](_0x25548c * 1.16 * 0x64) / 0x64;
                  return _0x3bae3d > 0x0
                    ? _0x59d6ec(0x304) +
                        _0x3bae3d[_0x59d6ec(0x3ae)](0x2) +
                        _0x59d6ec(0x2b4)
                    : "";
                })() +
                "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20"
            )["join"]("") +
            _0x3cc4ab(0x285)
          : "") +
        _0x3cc4ab(0x346) +
        (_0x4ccc54[_0x3cc4ab(0x37d)] > _0x33774f[_0x3cc4ab(0x37d)]
          ? _0x3cc4ab(0x23d) +
            _0x4ccc54["length"] +
            "\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(" +
            _0x33774f[_0x3cc4ab(0x37d)] +
            _0x3cc4ab(0x2bf) +
            _0x4ccc54[_0x3cc4ab(0x2c4)](0x0, 0x6)
              [_0x3cc4ab(0x231)](
                (_0x214439) => _0x3cc4ab(0x333) + _0x214439 + _0x3cc4ab(0x2dd)
              )
              [_0x3cc4ab(0x36e)]("") +
            "\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20" +
            (_0x4ccc54["length"] > 0x6
              ? "<span\x20class=\x22badge\x20bg-secondary\x22\x20style=\x22font-size:\x200.7rem;\x22>+" +
                (_0x4ccc54[_0x3cc4ab(0x37d)] - 0x6) +
                _0x3cc4ab(0x2f3)
              : "") +
            _0x3cc4ab(0x285)
          : "") +
        _0x3cc4ab(0x346) +
        (_0x386167[_0x3cc4ab(0x2b5)] && _0x386167[_0x3cc4ab(0x216)]
          ? _0x3cc4ab(0x3b4) +
            _0x386167[_0x3cc4ab(0x2b5)] +
            "\x20al\x20" +
            _0x386167[_0x3cc4ab(0x216)] +
            _0x3cc4ab(0x2f8)
          : "") +
        _0x3cc4ab(0x307);
    }),
      (_0x32c9f5 += _0x1df141(0x289)),
      (_0x32c9f5 += _0x1df141(0x29e)),
      (document[_0x1df141(0x2ce)](_0x1df141(0x33e))[_0x1df141(0x2ea)] =
        _0x32c9f5);
    const _0x356e1c = document[_0x1df141(0x31b)](".copiar-sku-btn");
    _0x356e1c[_0x1df141(0x392)]((_0x58bacc) => {
      const _0x44a8c0 = _0x1df141;
      _0x58bacc[_0x44a8c0(0x41e)](_0x44a8c0(0x228), function (_0x4465bc) {
        const _0x476db2 = _0x44a8c0;
        _0x4465bc["preventDefault"]();
        const _0x3cc28f = _0x58bacc[_0x476db2(0x280)](_0x476db2(0x42b));
        navigator[_0x476db2(0x4b8)] &&
          navigator[_0x476db2(0x4b8)]
            [_0x476db2(0x4ab)](_0x3cc28f)
            ["then"](() => {
              const _0x579f6f = _0x476db2,
                _0x436869 = _0x58bacc["innerHTML"];
              (_0x58bacc[_0x579f6f(0x2ea)] = "✅"),
                _0x58bacc[_0x579f6f(0x2f0)][_0x579f6f(0x256)](_0x579f6f(0x2cf)),
                _0x58bacc["classList"][_0x579f6f(0x235)]("btn-success"),
                setTimeout(() => {
                  const _0x475d8e = _0x579f6f;
                  (_0x58bacc[_0x475d8e(0x2ea)] = _0x436869),
                    _0x58bacc["classList"][_0x475d8e(0x256)]("btn-success"),
                    _0x58bacc[_0x475d8e(0x2f0)][_0x475d8e(0x235)](
                      _0x475d8e(0x2cf)
                    );
                }, 0x4b0);
            })
            [_0x476db2(0x21b)]((_0x321679) => {
              const _0x21d929 = _0x476db2;
              console[_0x21d929(0x258)](_0x21d929(0x3fb), _0x321679);
              const _0x5b5499 = _0x58bacc[_0x21d929(0x2ea)];
              (_0x58bacc[_0x21d929(0x2ea)] = "❌"),
                setTimeout(() => {
                  const _0xa69142 = _0x21d929;
                  _0x58bacc[_0xa69142(0x2ea)] = _0x5b5499;
                }, 0x4b0);
            });
      });
    });
  } catch (_0x218976) {
    console[_0x1df141(0x258)](_0x1df141(0x3e0), _0x218976),
      (document[_0x1df141(0x2ce)]("resultado")[_0x1df141(0x2ea)] =
        "\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-danger\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h6>❌\x20Error</h6>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>No\x20se\x20pudieron\x20cargar\x20las\x20promociones:\x20" +
        _0x218976["message"] +
        "</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22verPromociones()\x22\x20class=\x22btn\x20btn-outline-primary\x20btn-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20🔄\x20Reintentar\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20");
  }
}
cargarConfiguracionGuardada(), renderHistorial();
